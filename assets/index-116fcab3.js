var _s=Object.defineProperty;var ys=(t,e,n)=>e in t?_s(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var G=(t,e,n)=>(ys(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var at,E,dr,En,Ue,Kn,fr,gt={},hr=[],gs=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function se(t,e){for(var n in e)t[n]=e[n];return t}function pr(t){var e=t.parentNode;e&&e.removeChild(t)}function kn(t,e,n){var r,s,i,a={};for(i in e)i=="key"?r=e[i]:i=="ref"?s=e[i]:a[i]=e[i];if(arguments.length>2&&(a.children=arguments.length>3?at.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(i in t.defaultProps)a[i]===void 0&&(a[i]=t.defaultProps[i]);return Ze(t,a,r,s,null)}function Ze(t,e,n,r,s){var i={type:t,props:e,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:s??++dr};return s==null&&E.vnode!=null&&E.vnode(i),i}function ot(t){return t.children}function je(t,e){this.props=t,this.context=e}function ze(t,e){if(e==null)return t.__?ze(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?ze(t):null}function mr(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return mr(t)}}function un(t){(!t.__d&&(t.__d=!0)&&Ue.push(t)&&!vt.__r++||Kn!==E.debounceRendering)&&((Kn=E.debounceRendering)||setTimeout)(vt)}function vt(){for(var t;vt.__r=Ue.length;)t=Ue.sort(function(e,n){return e.__v.__b-n.__v.__b}),Ue=[],t.some(function(e){var n,r,s,i,a,o;e.__d&&(a=(i=(n=e).__v).__e,(o=n.__P)&&(r=[],(s=se({},i)).__v=i.__v+1,Tn(o,i,s,n.__n,o.ownerSVGElement!==void 0,i.__h!=null?[a]:null,r,a??ze(i),i.__h),vr(r,i),i.__e!=a&&mr(i)))})}function _r(t,e,n,r,s,i,a,o,c,l){var u,_,h,d,m,T,S,v=r&&r.__k||hr,C=v.length;for(n.__k=[],u=0;u<e.length;u++)if((d=n.__k[u]=(d=e[u])==null||typeof d=="boolean"?null:typeof d=="string"||typeof d=="number"||typeof d=="bigint"?Ze(null,d,null,null,d):Array.isArray(d)?Ze(ot,{children:d},null,null,null):d.__b>0?Ze(d.type,d.props,d.key,d.ref?d.ref:null,d.__v):d)!=null){if(d.__=n,d.__b=n.__b+1,(h=v[u])===null||h&&d.key==h.key&&d.type===h.type)v[u]=void 0;else for(_=0;_<C;_++){if((h=v[_])&&d.key==h.key&&d.type===h.type){v[_]=void 0;break}h=null}Tn(t,d,h=h||gt,s,i,a,o,c,l),m=d.__e,(_=d.ref)&&h.ref!=_&&(S||(S=[]),h.ref&&S.push(h.ref,null,d),S.push(_,d.__c||m,d)),m!=null?(T==null&&(T=m),typeof d.type=="function"&&d.__k===h.__k?d.__d=c=yr(d,c,t):c=gr(t,d,h,v,m,c),typeof n.type=="function"&&(n.__d=c)):c&&h.__e==c&&c.parentNode!=t&&(c=ze(h))}for(n.__e=T,u=C;u--;)v[u]!=null&&br(v[u],v[u]);if(S)for(u=0;u<S.length;u++)wr(S[u],S[++u],S[++u])}function yr(t,e,n){for(var r,s=t.__k,i=0;s&&i<s.length;i++)(r=s[i])&&(r.__=t,e=typeof r.type=="function"?yr(r,e,n):gr(n,r,r,s,r.__e,e));return e}function gr(t,e,n,r,s,i){var a,o,c;if(e.__d!==void 0)a=e.__d,e.__d=void 0;else if(n==null||s!=i||s.parentNode==null)e:if(i==null||i.parentNode!==t)t.appendChild(s),a=null;else{for(o=i,c=0;(o=o.nextSibling)&&c<r.length;c+=1)if(o==s)break e;t.insertBefore(s,i),a=i}return a!==void 0?a:s.nextSibling}function vs(t,e,n,r,s){var i;for(i in n)i==="children"||i==="key"||i in e||wt(t,i,null,n[i],r);for(i in e)s&&typeof e[i]!="function"||i==="children"||i==="key"||i==="value"||i==="checked"||n[i]===e[i]||wt(t,i,e[i],n[i],r)}function zn(t,e,n){e[0]==="-"?t.setProperty(e,n):t[e]=n==null?"":typeof n!="number"||gs.test(e)?n:n+"px"}function wt(t,e,n,r,s){var i;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof r=="string"&&(t.style.cssText=r=""),r)for(e in r)n&&e in n||zn(t.style,e,"");if(n)for(e in n)r&&n[e]===r[e]||zn(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")i=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+i]=n,n?r||t.addEventListener(e,i?Fn:Hn,i):t.removeEventListener(e,i?Fn:Hn,i);else if(e!=="dangerouslySetInnerHTML"){if(s)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e.indexOf("-")==-1?t.removeAttribute(e):t.setAttribute(e,n))}}function Hn(t){this.l[t.type+!1](E.event?E.event(t):t)}function Fn(t){this.l[t.type+!0](E.event?E.event(t):t)}function Tn(t,e,n,r,s,i,a,o,c){var l,u,_,h,d,m,T,S,v,C,b,w,M,B,U,O=e.type;if(e.constructor!==void 0)return null;n.__h!=null&&(c=n.__h,o=e.__e=n.__e,e.__h=null,i=[o]),(l=E.__b)&&l(e);try{e:if(typeof O=="function"){if(S=e.props,v=(l=O.contextType)&&r[l.__c],C=l?v?v.props.value:l.__:r,n.__c?T=(u=e.__c=n.__c).__=u.__E:("prototype"in O&&O.prototype.render?e.__c=u=new O(S,C):(e.__c=u=new je(S,C),u.constructor=O,u.render=bs),v&&v.sub(u),u.props=S,u.state||(u.state={}),u.context=C,u.__n=r,_=u.__d=!0,u.__h=[],u._sb=[]),u.__s==null&&(u.__s=u.state),O.getDerivedStateFromProps!=null&&(u.__s==u.state&&(u.__s=se({},u.__s)),se(u.__s,O.getDerivedStateFromProps(S,u.__s))),h=u.props,d=u.state,_)O.getDerivedStateFromProps==null&&u.componentWillMount!=null&&u.componentWillMount(),u.componentDidMount!=null&&u.__h.push(u.componentDidMount);else{if(O.getDerivedStateFromProps==null&&S!==h&&u.componentWillReceiveProps!=null&&u.componentWillReceiveProps(S,C),!u.__e&&u.shouldComponentUpdate!=null&&u.shouldComponentUpdate(S,u.__s,C)===!1||e.__v===n.__v){for(u.props=S,u.state=u.__s,e.__v!==n.__v&&(u.__d=!1),u.__v=e,e.__e=n.__e,e.__k=n.__k,e.__k.forEach(function(H){H&&(H.__=e)}),b=0;b<u._sb.length;b++)u.__h.push(u._sb[b]);u._sb=[],u.__h.length&&a.push(u);break e}u.componentWillUpdate!=null&&u.componentWillUpdate(S,u.__s,C),u.componentDidUpdate!=null&&u.__h.push(function(){u.componentDidUpdate(h,d,m)})}if(u.context=C,u.props=S,u.__v=e,u.__P=t,w=E.__r,M=0,"prototype"in O&&O.prototype.render){for(u.state=u.__s,u.__d=!1,w&&w(e),l=u.render(u.props,u.state,u.context),B=0;B<u._sb.length;B++)u.__h.push(u._sb[B]);u._sb=[]}else do u.__d=!1,w&&w(e),l=u.render(u.props,u.state,u.context),u.state=u.__s;while(u.__d&&++M<25);u.state=u.__s,u.getChildContext!=null&&(r=se(se({},r),u.getChildContext())),_||u.getSnapshotBeforeUpdate==null||(m=u.getSnapshotBeforeUpdate(h,d)),U=l!=null&&l.type===ot&&l.key==null?l.props.children:l,_r(t,Array.isArray(U)?U:[U],e,n,r,s,i,a,o,c),u.base=e.__e,e.__h=null,u.__h.length&&a.push(u),T&&(u.__E=u.__=null),u.__e=!1}else i==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=ws(n.__e,e,n,r,s,i,a,c);(l=E.diffed)&&l(e)}catch(H){e.__v=null,(c||i!=null)&&(e.__e=o,e.__h=!!c,i[i.indexOf(o)]=null),E.__e(H,e,n)}}function vr(t,e){E.__c&&E.__c(e,t),t.some(function(n){try{t=n.__h,n.__h=[],t.some(function(r){r.call(n)})}catch(r){E.__e(r,n.__v)}})}function ws(t,e,n,r,s,i,a,o){var c,l,u,_=n.props,h=e.props,d=e.type,m=0;if(d==="svg"&&(s=!0),i!=null){for(;m<i.length;m++)if((c=i[m])&&"setAttribute"in c==!!d&&(d?c.localName===d:c.nodeType===3)){t=c,i[m]=null;break}}if(t==null){if(d===null)return document.createTextNode(h);t=s?document.createElementNS("http://www.w3.org/2000/svg",d):document.createElement(d,h.is&&h),i=null,o=!1}if(d===null)_===h||o&&t.data===h||(t.data=h);else{if(i=i&&at.call(t.childNodes),l=(_=n.props||gt).dangerouslySetInnerHTML,u=h.dangerouslySetInnerHTML,!o){if(i!=null)for(_={},m=0;m<t.attributes.length;m++)_[t.attributes[m].name]=t.attributes[m].value;(u||l)&&(u&&(l&&u.__html==l.__html||u.__html===t.innerHTML)||(t.innerHTML=u&&u.__html||""))}if(vs(t,h,_,s,o),u)e.__k=[];else if(m=e.props.children,_r(t,Array.isArray(m)?m:[m],e,n,r,s&&d!=="foreignObject",i,a,i?i[0]:n.__k&&ze(n,0),o),i!=null)for(m=i.length;m--;)i[m]!=null&&pr(i[m]);o||("value"in h&&(m=h.value)!==void 0&&(m!==t.value||d==="progress"&&!m||d==="option"&&m!==_.value)&&wt(t,"value",m,_.value,!1),"checked"in h&&(m=h.checked)!==void 0&&m!==t.checked&&wt(t,"checked",m,_.checked,!1))}return t}function wr(t,e,n){try{typeof t=="function"?t(e):t.current=e}catch(r){E.__e(r,n)}}function br(t,e,n){var r,s;if(E.unmount&&E.unmount(t),(r=t.ref)&&(r.current&&r.current!==t.__e||wr(r,null,e)),(r=t.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(i){E.__e(i,e)}r.base=r.__P=null,t.__c=void 0}if(r=t.__k)for(s=0;s<r.length;s++)r[s]&&br(r[s],e,n||typeof t.type!="function");n||t.__e==null||pr(t.__e),t.__=t.__e=t.__d=void 0}function bs(t,e,n){return this.constructor(t,n)}function xs(t,e,n){var r,s,i;E.__&&E.__(t,e),s=(r=typeof n=="function")?null:n&&n.__k||e.__k,i=[],Tn(e,t=(!r&&n||e).__k=kn(ot,null,[t]),s||gt,gt,e.ownerSVGElement!==void 0,!r&&n?[n]:s?null:e.firstChild?at.call(e.childNodes):null,i,!r&&n?n:s?s.__e:e.firstChild,r),vr(i,t)}function xr(t,e,n){var r,s,i,a=se({},t.props);for(i in e)i=="key"?r=e[i]:i=="ref"?s=e[i]:a[i]=e[i];return arguments.length>2&&(a.children=arguments.length>3?at.call(arguments,2):n),Ze(t.type,a,r||t.key,s||t.ref,null)}function Cs(t,e){var n={__c:e="__cC"+fr++,__:t,Consumer:function(r,s){return r.children(s)},Provider:function(r){var s,i;return this.getChildContext||(s=[],(i={})[e]=this,this.getChildContext=function(){return i},this.shouldComponentUpdate=function(a){this.props.value!==a.value&&s.some(un)},this.sub=function(a){s.push(a);var o=a.componentWillUnmount;a.componentWillUnmount=function(){s.splice(s.indexOf(a),1),o&&o.call(a)}}),r.children}};return n.Provider.__=n.Consumer.contextType=n}at=hr.slice,E={__e:function(t,e,n,r){for(var s,i,a;e=e.__;)if((s=e.__c)&&!s.__)try{if((i=s.constructor)&&i.getDerivedStateFromError!=null&&(s.setState(i.getDerivedStateFromError(t)),a=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(t,r||{}),a=s.__d),a)return s.__E=s}catch(o){t=o}throw t}},dr=0,En=function(t){return t!=null&&t.constructor===void 0},je.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=se({},this.state),typeof t=="function"&&(t=t(se({},n),this.props)),t&&se(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),un(this))},je.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),un(this))},je.prototype.render=ot,Ue=[],vt.__r=0,fr=0;var De,Z,Yt,Wn,bt=0,Cr=[],mt=[],Jn=E.__b,Yn=E.__r,qn=E.diffed,Gn=E.__c,Qn=E.unmount;function ct(t,e){E.__h&&E.__h(Z,t,bt||e),bt=0;var n=Z.__H||(Z.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({__V:mt}),n.__[t]}function Es(t){return bt=1,ks(Er,t)}function ks(t,e,n){var r=ct(De++,2);if(r.t=t,!r.__c&&(r.__=[n?n(e):Er(void 0,e),function(i){var a=r.__N?r.__N[0]:r.__[0],o=r.t(a,i);a!==o&&(r.__N=[o,r.__[1]],r.__c.setState({}))}],r.__c=Z,!Z.u)){Z.u=!0;var s=Z.shouldComponentUpdate;Z.shouldComponentUpdate=function(i,a,o){if(!r.__c.__H)return!0;var c=r.__c.__H.__.filter(function(u){return u.__c});if(c.every(function(u){return!u.__N}))return!s||s.call(this,i,a,o);var l=!1;return c.forEach(function(u){if(u.__N){var _=u.__[0];u.__=u.__N,u.__N=void 0,_!==u.__[0]&&(l=!0)}}),!(!l&&r.__c.props===i)&&(!s||s.call(this,i,a,o))}}return r.__N||r.__}function xt(t,e){var n=ct(De++,3);!E.__s&&In(n.__H,e)&&(n.__=t,n.i=e,Z.__H.__h.push(n))}function Sn(t,e){var n=ct(De++,4);!E.__s&&In(n.__H,e)&&(n.__=t,n.i=e,Z.__h.push(n))}function Ts(t){return bt=5,Nn(function(){return{current:t}},[])}function Nn(t,e){var n=ct(De++,7);return In(n.__H,e)?(n.__V=t(),n.i=e,n.__h=t,n.__V):n.__}function Ss(t){var e=Z.context[t.__c],n=ct(De++,9);return n.c=t,e?(n.__==null&&(n.__=!0,e.sub(Z)),e.props.value):t.__}function Ns(){for(var t;t=Cr.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(_t),t.__H.__h.forEach(ln),t.__H.__h=[]}catch(e){t.__H.__h=[],E.__e(e,t.__v)}}E.__b=function(t){Z=null,Jn&&Jn(t)},E.__r=function(t){Yn&&Yn(t),De=0;var e=(Z=t.__c).__H;e&&(Yt===Z?(e.__h=[],Z.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=mt,n.__N=n.i=void 0})):(e.__h.forEach(_t),e.__h.forEach(ln),e.__h=[])),Yt=Z},E.diffed=function(t){qn&&qn(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Cr.push(e)!==1&&Wn===E.requestAnimationFrame||((Wn=E.requestAnimationFrame)||Is)(Ns)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==mt&&(n.__=n.__V),n.i=void 0,n.__V=mt})),Yt=Z=null},E.__c=function(t,e){e.some(function(n){try{n.__h.forEach(_t),n.__h=n.__h.filter(function(r){return!r.__||ln(r)})}catch(r){e.some(function(s){s.__h&&(s.__h=[])}),e=[],E.__e(r,n.__v)}}),Gn&&Gn(t,e)},E.unmount=function(t){Qn&&Qn(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{_t(r)}catch(s){e=s}}),n.__H=void 0,e&&E.__e(e,n.__v))};var Xn=typeof requestAnimationFrame=="function";function Is(t){var e,n=function(){clearTimeout(r),Xn&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(n,100);Xn&&(e=requestAnimationFrame(n))}function _t(t){var e=Z,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),Z=e}function ln(t){var e=Z;t.__c=t.__(),Z=e}function In(t,e){return!t||t.length!==e.length||e.some(function(n,r){return n!==t[r]})}function Er(t,e){return typeof e=="function"?e(t):e}function qt(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}function As(t,e){const n=e(),[{_instance:r},s]=Es({_instance:{_value:n,_getSnapshot:e}});return Sn(()=>{r._value=n,r._getSnapshot=e,qt(r._value,e())||s({_instance:r})},[t,n,e]),xt(()=>(qt(r._value,r._getSnapshot())||s({_instance:r}),t(()=>{qt(r._value,r._getSnapshot())||s({_instance:r})})),[t]),n}const An=t=>{const e=Ts([t,(...n)=>e[0](...n)]).current;return Sn(()=>{e[0]=t}),e[1]},Rs=(t="",e=location.pathname)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",Ms=(t,e="")=>t[0]==="~"?t.slice(1):e+t,Ps="popstate",Rn="pushState",Mn="replaceState",Bs="hashchange",er=[Ps,Rn,Mn,Bs],Ls=t=>{for(const e of er)addEventListener(e,t);return()=>{for(const e of er)removeEventListener(e,t)}},Ds=t=>As(Ls,t),Os=()=>location.pathname,$s=()=>Ds(Os),Us=(t,{replace:e=!1}={})=>history[e?Mn:Rn](null,"",t),Zs=(t={})=>[Rs(t.base,$s()),An((e,n)=>Us(Ms(e,t.base),n))];if(typeof history<"u")for(const t of[Rn,Mn]){const e=history[t];history[t]=function(){const n=e.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),n}}function js(t=Ks){let e={};const n=r=>e[r]||(e[r]=t(r));return(r,s)=>{const{regexp:i,keys:a}=n(r||""),o=i.exec(s);return o?[!0,a.reduce((l,u,_)=>(l[u.name]=o[_+1],l),{})]:[!1,null]}}const tr=t=>t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),Vs=(t,e,n)=>{let r=t?"((?:[^\\/]+?)(?:\\/(?:[^\\/]+?))*)":"([^\\/]+?)";return e&&n&&(r="(?:\\/"+r+")"),r+(e?"?":"")},Ks=t=>{const e=/:([A-Za-z0-9_]+)([?+*]?)/g;let n=null,r=0,s=[],i="";for(;(n=e.exec(t))!==null;){const[a,o,c]=n,l=c==="+"||c==="*",u=c==="?"||c==="*",_=u&&t[n.index-1]==="/"?1:0,h=t.substring(r,n.index-_);s.push({name:o}),r=e.lastIndex,i+=tr(h)+Vs(l,u,_)}return i+=tr(t.substring(r)),{keys:s,regexp:new RegExp("^"+i+"(?:\\/)?$","i")}},zs={hook:Zs,matcher:js(),base:""},Hs=Cs(zs),$t=()=>Ss(Hs),Ut=t=>t.hook(t),kr=()=>Ut($t()),Fs=t=>{const e=$t(),[n]=Ut(e);return e.matcher(t,n)},Gt=({path:t,match:e,component:n,children:r})=>{const s=Fs(t),[i,a]=e||s;return i?n?kn(n,{params:a}):typeof r=="function"?r(a):r:null},Pn=(t,e)=>{const n=$t(),[,r]=Ut(n),{to:s,href:i=s,children:a,onClick:o}=t,c=An(_=>{_.ctrlKey||_.metaKey||_.altKey||_.shiftKey||_.button!==0||(o&&o(_),_.defaultPrevented||(_.preventDefault(),r(s||i,t)))}),l={href:i[0]==="~"?i.slice(1):n.base+i,onClick:c,to:null,ref:e},u=En(a)?a:kn("a",t);return xr(u,l)},dn=t=>Array.isArray(t)?[].concat(...t.map(e=>e&&e.type===ot?dn(e.props.children):dn(e))):[t],Ws=({children:t,location:e})=>{const n=$t(),r=n.matcher,[s]=Ut(n);for(const i of dn(t)){let a=0;if(En(i)&&(a=i.props.path?r(i.props.path,e||s):[!0,{}])[0])return xr(i,{match:a})}return null},Js=t=>{const{to:e,href:n=e}=t,[,r]=kr(),s=An(()=>r(e||n,t));return Sn(()=>{s()},[]),null};function Zt(){throw new Error("Cycle detected")}function Bn(){if(xe>1)xe--;else{for(var t,e=!1;Ve!==void 0;){var n=Ve;for(Ve=void 0,fn++;n!==void 0;){var r=n.o;if(n.o=void 0,n.f&=-3,!(8&n.f)&&Sr(n))try{n.c()}catch(s){e||(t=s,e=!0)}n=r}}if(fn=0,xe--,e)throw t}}var j=void 0,Ve=void 0,xe=0,fn=0,Ct=0;function Tr(t){if(j!==void 0){var e=t.n;if(e===void 0||e.t!==j)return e={i:0,S:t,p:j.s,n:void 0,t:j,e:void 0,x:void 0,r:e},j.s!==void 0&&(j.s.n=e),j.s=e,t.n=e,32&j.f&&t.S(e),e;if(e.i===-1)return e.i=0,e.n!==void 0&&(e.n.p=e.p,e.p!==void 0&&(e.p.n=e.n),e.p=j.s,e.n=void 0,j.s.n=e,j.s=e),e}}function z(t){this.v=t,this.i=0,this.n=void 0,this.t=void 0}z.prototype.h=function(){return!0};z.prototype.S=function(t){this.t!==t&&t.e===void 0&&(t.x=this.t,this.t!==void 0&&(this.t.e=t),this.t=t)};z.prototype.U=function(t){if(this.t!==void 0){var e=t.e,n=t.x;e!==void 0&&(e.x=n,t.e=void 0),n!==void 0&&(n.e=e,t.x=void 0),t===this.t&&(this.t=n)}};z.prototype.subscribe=function(t){var e=this;return jt(function(){var n=e.value,r=32&this.f;this.f&=-33;try{t(n)}finally{this.f|=r}})};z.prototype.valueOf=function(){return this.value};z.prototype.toString=function(){return this.value+""};z.prototype.peek=function(){return this.v};Object.defineProperty(z.prototype,"value",{get:function(){var t=Tr(this);return t!==void 0&&(t.i=this.i),this.v},set:function(t){if(t!==this.v){fn>100&&Zt(),this.v=t,this.i++,Ct++,xe++;try{for(var e=this.t;e!==void 0;e=e.x)e.t.N()}finally{Bn()}}}});function ue(t){return new z(t)}function Sr(t){for(var e=t.s;e!==void 0;e=e.n)if(e.S.i!==e.i||!e.S.h()||e.S.i!==e.i)return!0;return!1}function Nr(t){for(var e=t.s;e!==void 0;e=e.n){var n=e.S.n;if(n!==void 0&&(e.r=n),e.S.n=e,e.i=-1,e.n===void 0){t.s=e;break}}}function Ir(t){for(var e=t.s,n=void 0;e!==void 0;){var r=e.p;e.i===-1?(e.S.U(e),r!==void 0&&(r.n=e.n),e.n!==void 0&&(e.n.p=r)):n=e,e.S.n=e.r,e.r!==void 0&&(e.r=void 0),e=r}t.s=n}function we(t){z.call(this,void 0),this.x=t,this.s=void 0,this.g=Ct-1,this.f=4}(we.prototype=new z).h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===Ct))return!0;if(this.g=Ct,this.f|=1,this.i>0&&!Sr(this))return this.f&=-2,!0;var t=j;try{Nr(this),j=this;var e=this.x();(16&this.f||this.v!==e||this.i===0)&&(this.v=e,this.f&=-17,this.i++)}catch(n){this.v=n,this.f|=16,this.i++}return j=t,Ir(this),this.f&=-2,!0};we.prototype.S=function(t){if(this.t===void 0){this.f|=36;for(var e=this.s;e!==void 0;e=e.n)e.S.S(e)}z.prototype.S.call(this,t)};we.prototype.U=function(t){if(this.t!==void 0&&(z.prototype.U.call(this,t),this.t===void 0)){this.f&=-33;for(var e=this.s;e!==void 0;e=e.n)e.S.U(e)}};we.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var t=this.t;t!==void 0;t=t.x)t.t.N()}};we.prototype.peek=function(){if(this.h()||Zt(),16&this.f)throw this.v;return this.v};Object.defineProperty(we.prototype,"value",{get:function(){1&this.f&&Zt();var t=Tr(this);if(this.h(),t!==void 0&&(t.i=this.i),16&this.f)throw this.v;return this.v}});function Ys(t){return new we(t)}function Ar(t){var e=t.u;if(t.u=void 0,typeof e=="function"){xe++;var n=j;j=void 0;try{e()}catch(r){throw t.f&=-2,t.f|=8,Ln(t),r}finally{j=n,Bn()}}}function Ln(t){for(var e=t.s;e!==void 0;e=e.n)e.S.U(e);t.x=void 0,t.s=void 0,Ar(t)}function qs(t){if(j!==this)throw new Error("Out-of-order effect");Ir(this),j=t,this.f&=-2,8&this.f&&Ln(this),Bn()}function ut(t){this.x=t,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32}ut.prototype.c=function(){var t=this.S();try{!(8&this.f)&&this.x!==void 0&&(this.u=this.x())}finally{t()}};ut.prototype.S=function(){1&this.f&&Zt(),this.f|=1,this.f&=-9,Ar(this),Nr(this),xe++;var t=j;return j=this,qs.bind(this,t)};ut.prototype.N=function(){2&this.f||(this.f|=2,this.o=Ve,Ve=this)};ut.prototype.d=function(){this.f|=8,1&this.f||Ln(this)};function jt(t){var e=new ut(t);try{e.c()}catch(n){throw e.d(),n}return e.d.bind(e)}var Qt;function Oe(t,e){E[t]=e.bind(null,E[t]||function(){})}function Et(t){Qt&&Qt(),Qt=t&&t.S()}function Rr(t){var e=this,n=t.data,r=Ee(n);r.value=n;var s=Nn(function(){for(var i=e.__v;i=i.__;)if(i.__c){i.__c.__$f|=4;break}return e.__$u.c=function(){e.base.data=s.peek()},Ys(function(){var a=r.value.value;return a===0?0:a===!0?"":a||""})},[]);return s.value}Rr.displayName="_st";Object.defineProperties(z.prototype,{constructor:{configurable:!0,value:void 0},type:{configurable:!0,value:Rr},props:{configurable:!0,get:function(){return{data:this}}},__b:{configurable:!0,value:1}});Oe("__b",function(t,e){if(typeof e.type=="string"){var n,r=e.props;for(var s in r)if(s!=="children"){var i=r[s];i instanceof z&&(n||(e.__np=n={}),n[s]=i,r[s]=i.peek())}}t(e)});Oe("__r",function(t,e){Et();var n,r=e.__c;r&&(r.__$f&=-2,(n=r.__$u)===void 0&&(r.__$u=n=function(s){var i;return jt(function(){i=this}),i.c=function(){r.__$f|=1,r.setState({})},i}())),Et(n),t(e)});Oe("__e",function(t,e,n,r){Et(),t(e,n,r)});Oe("diffed",function(t,e){Et();var n;if(typeof e.type=="string"&&(n=e.__e)){var r=e.__np,s=e.props;if(r){var i=n.U;if(i)for(var a in i){var o=i[a];o!==void 0&&!(a in r)&&(o.d(),i[a]=void 0)}else n.U=i={};for(var c in r){var l=i[c],u=r[c];l===void 0?(l=Gs(n,c,u,s),i[c]=l):l.o(u,s)}}}t(e)});function Gs(t,e,n,r){var s=e in t&&t.ownerSVGElement===void 0,i=ue(n);return{o:function(a,o){i.value=a,r=o},d:jt(function(){var a=i.value.value;r[e]!==a&&(r[e]=a,s?t[e]=a:a?t.setAttribute(e,a):t.removeAttribute(e))})}}Oe("unmount",function(t,e){if(typeof e.type=="string"){var n=e.__e;if(n){var r=n.U;if(r){n.U=void 0;for(var s in r){var i=r[s];i&&i.d()}}}}else{var a=e.__c;if(a){var o=a.__$u;o&&(a.__$u=void 0,o.d())}}t(e)});Oe("__h",function(t,e,n,r){r<3&&(e.__$f|=2),t(e,n,r)});je.prototype.shouldComponentUpdate=function(t,e){var n=this.__$u;if(!(n&&n.s!==void 0||4&this.__$f)||3&this.__$f)return!0;for(var r in e)return!0;for(var s in t)if(s!=="__source"&&t[s]!==this.props[s])return!0;for(var i in this.props)if(!(i in t))return!0;return!1};function Ee(t){return Nn(function(){return ue(t)},[])}var Qs=0;function f(t,e,n,r,s){var i,a,o={};for(a in e)a=="ref"?i=e[a]:o[a]=e[a];var c={type:t,props:o,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--Qs,__source:s,__self:r};if(typeof t=="function"&&(i=t.defaultProps))for(a in i)o[a]===void 0&&(o[a]=i[a]);return E.vnode&&E.vnode(c),c}const kt=({alt:t,src:e,size:n=64})=>t?f("img",{width:n,height:n,alt:t,src:e||`https://ui-avatars.com/api/?name=${t}&rounded=true&format=svg&background=random`}):null,ke=t=>f("div",{className:"w-full h-full bg-black flex justify-center text-white font-mono overflow-hidden",children:f("div",{className:"max-w-md flex flex-col justify-center items-center flex-1",children:t.children})});var R;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const a of s)i[a]=a;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(o=>typeof s[s[o]]!="number"),a={};for(const o of i)a[o]=s[o];return t.objectValues(a)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const a in s)Object.prototype.hasOwnProperty.call(s,a)&&i.push(a);return i},t.find=(s,i)=>{for(const a of s)if(i(a))return a},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(a=>typeof a=="string"?`'${a}'`:a).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(R||(R={}));const y=R.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),le=t=>{switch(typeof t){case"undefined":return y.undefined;case"string":return y.string;case"number":return isNaN(t)?y.nan:y.number;case"boolean":return y.boolean;case"function":return y.function;case"bigint":return y.bigint;case"symbol":return y.symbol;case"object":return Array.isArray(t)?y.array:t===null?y.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?y.promise:typeof Map<"u"&&t instanceof Map?y.map:typeof Set<"u"&&t instanceof Set?y.set:typeof Date<"u"&&t instanceof Date?y.date:y.object;default:return y.unknown}},p=R.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Xs=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class ie extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const a of i.issues)if(a.code==="invalid_union")a.unionErrors.map(s);else if(a.code==="invalid_return_type")s(a.returnTypeError);else if(a.code==="invalid_arguments")s(a.argumentsError);else if(a.path.length===0)r._errors.push(n(a));else{let o=r,c=0;for(;c<a.path.length;){const l=a.path[c];c===a.path.length-1?(o[l]=o[l]||{_errors:[]},o[l]._errors.push(n(a))):o[l]=o[l]||{_errors:[]},o=o[l],c++}}};return s(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,R.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}ie.create=t=>new ie(t);const He=(t,e)=>{let n;switch(t.code){case p.invalid_type:t.received===y.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case p.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,R.jsonStringifyReplacer)}`;break;case p.unrecognized_keys:n=`Unrecognized key(s) in object: ${R.joinValues(t.keys,", ")}`;break;case p.invalid_union:n="Invalid input";break;case p.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${R.joinValues(t.options)}`;break;case p.invalid_enum_value:n=`Invalid enum value. Expected ${R.joinValues(t.options)}, received '${t.received}'`;break;case p.invalid_arguments:n="Invalid function arguments";break;case p.invalid_return_type:n="Invalid function return type";break;case p.invalid_date:n="Invalid date";break;case p.invalid_string:typeof t.validation=="object"?"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:R.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case p.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(t.minimum)}`:n="Invalid input";break;case p.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(t.maximum)}`:n="Invalid input";break;case p.custom:n="Invalid input";break;case p.invalid_intersection_types:n="Intersection results could not be merged";break;case p.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case p.not_finite:n="Number must be finite";break;default:n=e.defaultError,R.assertNever(t)}return{message:n}};let Mr=He;function ei(t){Mr=t}function Tt(){return Mr}const St=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],a={...s,path:i};let o="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)o=l(a,{data:e,defaultError:o}).message;return{...s,path:i,message:s.message||o}},ti=[];function g(t,e){const n=St({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Tt(),He].filter(r=>!!r)});t.common.issues.push(n)}class K{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return k;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n)r.push({key:await s.key,value:await s.value});return K.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:a}=s;if(i.status==="aborted"||a.status==="aborted")return k;i.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),(typeof a.value<"u"||s.alwaysSet)&&(r[i.value]=a.value)}return{status:e.value,value:r}}}const k=Object.freeze({status:"aborted"}),Pr=t=>({status:"dirty",value:t}),V=t=>({status:"valid",value:t}),hn=t=>t.status==="aborted",pn=t=>t.status==="dirty",Nt=t=>t.status==="valid",It=t=>typeof Promise!==void 0&&t instanceof Promise;var A;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(A||(A={}));class ee{constructor(e,n,r,s){this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._path.concat(this._key)}}const nr=(t,e)=>{if(Nt(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,error:new ie(t.common.issues)}};function I(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(a,o)=>a.code!=="invalid_type"?{message:o.defaultError}:typeof o.data>"u"?{message:r??o.defaultError}:{message:n??o.defaultError},description:s}}class N{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return le(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:le(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new K,ctx:{common:e.parent.common,data:e.data,parsedType:le(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(It(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:le(e)},i=this._parseSync({data:e,path:s.path,parent:s});return nr(s,i)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:le(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(It(s)?s:Promise.resolve(s));return nr(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const a=e(s),o=()=>i.addIssue({code:p.custom,...r(s)});return typeof Promise<"u"&&a instanceof Promise?a.then(c=>c?!0:(o(),!1)):a?!0:(o(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new Y({schema:this,typeName:x.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return X.create(this)}nullable(){return ve.create(this)}nullish(){return this.optional().nullable()}array(){return J.create(this)}promise(){return Se.create(this)}or(e){return qe.create([this,e])}and(e){return Ge.create(this,e)}transform(e){return new Y({schema:this,typeName:x.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new nt({innerType:this,defaultValue:n,typeName:x.ZodDefault})}brand(){return new Lr({typeName:x.ZodBranded,type:this,...I(void 0)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Bt({innerType:this,defaultValue:n,typeName:x.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return dt.create(this,e)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const ni=/^c[^\s-]{8,}$/i,ri=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,si=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i,ii=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}:\\d{2})|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}:\\d{2})|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}:\\d{2})|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");class oe extends N{constructor(){super(...arguments),this._regex=(e,n,r)=>this.refinement(s=>e.test(s),{validation:n,code:p.invalid_string,...A.errToObj(r)}),this.nonempty=e=>this.min(1,A.errToObj(e)),this.trim=()=>new oe({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==y.string){const i=this._getOrReturnCtx(e);return g(i,{code:p.invalid_type,expected:y.string,received:i.parsedType}),k}const r=new K;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),g(s,{code:p.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),g(s,{code:p.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const a=e.data.length>i.value,o=e.data.length<i.value;(a||o)&&(s=this._getOrReturnCtx(e,s),a?g(s,{code:p.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):o&&g(s,{code:p.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")si.test(e.data)||(s=this._getOrReturnCtx(e,s),g(s,{validation:"email",code:p.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")ri.test(e.data)||(s=this._getOrReturnCtx(e,s),g(s,{validation:"uuid",code:p.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")ni.test(e.data)||(s=this._getOrReturnCtx(e,s),g(s,{validation:"cuid",code:p.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),g(s,{validation:"url",code:p.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),g(s,{validation:"regex",code:p.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),g(s,{code:p.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),g(s,{code:p.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?ii(i).test(e.data)||(s=this._getOrReturnCtx(e,s),g(s,{code:p.invalid_string,validation:"datetime",message:i.message}),r.dirty()):R.assertNever(i);return{status:r.value,value:e.data}}_addCheck(e){return new oe({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...A.errToObj(e)})}url(e){return this._addCheck({kind:"url",...A.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...A.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...A.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...A.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...A.errToObj(n)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...A.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...A.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...A.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...A.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...A.errToObj(n)})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}oe.create=t=>{var e;return new oe({checks:[],typeName:x.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...I(t)})};function ai(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),a=parseInt(e.toFixed(s).replace(".",""));return i%a/Math.pow(10,s)}class pe extends N{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==y.number){const i=this._getOrReturnCtx(e);return g(i,{code:p.invalid_type,expected:y.number,received:i.parsedType}),k}let r;const s=new K;for(const i of this._def.checks)i.kind==="int"?R.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),g(r,{code:p.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),g(r,{code:p.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),g(r,{code:p.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?ai(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),g(r,{code:p.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),g(r,{code:p.not_finite,message:i.message}),s.dirty()):R.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,A.toString(n))}gt(e,n){return this.setLimit("min",e,!1,A.toString(n))}lte(e,n){return this.setLimit("max",e,!0,A.toString(n))}lt(e,n){return this.setLimit("max",e,!1,A.toString(n))}setLimit(e,n,r,s){return new pe({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:A.toString(s)}]})}_addCheck(e){return new pe({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:A.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:A.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:A.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:A.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:A.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:A.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:A.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int")}}pe.create=t=>new pe({checks:[],typeName:x.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...I(t)});class Fe extends N{_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==y.bigint){const r=this._getOrReturnCtx(e);return g(r,{code:p.invalid_type,expected:y.bigint,received:r.parsedType}),k}return V(e.data)}}Fe.create=t=>{var e;return new Fe({typeName:x.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...I(t)})};class We extends N{_parse(e){if(this._def.coerce&&(e.data=Boolean(e.data)),this._getType(e)!==y.boolean){const r=this._getOrReturnCtx(e);return g(r,{code:p.invalid_type,expected:y.boolean,received:r.parsedType}),k}return V(e.data)}}We.create=t=>new We({typeName:x.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...I(t)});class ye extends N{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==y.date){const i=this._getOrReturnCtx(e);return g(i,{code:p.invalid_type,expected:y.date,received:i.parsedType}),k}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return g(i,{code:p.invalid_date}),k}const r=new K;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),g(s,{code:p.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),g(s,{code:p.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):R.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ye({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:A.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:A.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}ye.create=t=>new ye({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:x.ZodDate,...I(t)});class At extends N{_parse(e){if(this._getType(e)!==y.symbol){const r=this._getOrReturnCtx(e);return g(r,{code:p.invalid_type,expected:y.symbol,received:r.parsedType}),k}return V(e.data)}}At.create=t=>new At({typeName:x.ZodSymbol,...I(t)});class Je extends N{_parse(e){if(this._getType(e)!==y.undefined){const r=this._getOrReturnCtx(e);return g(r,{code:p.invalid_type,expected:y.undefined,received:r.parsedType}),k}return V(e.data)}}Je.create=t=>new Je({typeName:x.ZodUndefined,...I(t)});class Ye extends N{_parse(e){if(this._getType(e)!==y.null){const r=this._getOrReturnCtx(e);return g(r,{code:p.invalid_type,expected:y.null,received:r.parsedType}),k}return V(e.data)}}Ye.create=t=>new Ye({typeName:x.ZodNull,...I(t)});class Te extends N{constructor(){super(...arguments),this._any=!0}_parse(e){return V(e.data)}}Te.create=t=>new Te({typeName:x.ZodAny,...I(t)});class _e extends N{constructor(){super(...arguments),this._unknown=!0}_parse(e){return V(e.data)}}_e.create=t=>new _e({typeName:x.ZodUnknown,...I(t)});class ce extends N{_parse(e){const n=this._getOrReturnCtx(e);return g(n,{code:p.invalid_type,expected:y.never,received:n.parsedType}),k}}ce.create=t=>new ce({typeName:x.ZodNever,...I(t)});class Rt extends N{_parse(e){if(this._getType(e)!==y.undefined){const r=this._getOrReturnCtx(e);return g(r,{code:p.invalid_type,expected:y.void,received:r.parsedType}),k}return V(e.data)}}Rt.create=t=>new Rt({typeName:x.ZodVoid,...I(t)});class J extends N{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==y.array)return g(n,{code:p.invalid_type,expected:y.array,received:n.parsedType}),k;if(s.exactLength!==null){const a=n.data.length>s.exactLength.value,o=n.data.length<s.exactLength.value;(a||o)&&(g(n,{code:a?p.too_big:p.too_small,minimum:o?s.exactLength.value:void 0,maximum:a?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(g(n,{code:p.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(g(n,{code:p.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all(n.data.map((a,o)=>s.type._parseAsync(new ee(n,a,n.path,o)))).then(a=>K.mergeArray(r,a));const i=n.data.map((a,o)=>s.type._parseSync(new ee(n,a,n.path,o)));return K.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new J({...this._def,minLength:{value:e,message:A.toString(n)}})}max(e,n){return new J({...this._def,maxLength:{value:e,message:A.toString(n)}})}length(e,n){return new J({...this._def,exactLength:{value:e,message:A.toString(n)}})}nonempty(e){return this.min(1,e)}}J.create=(t,e)=>new J({type:t,minLength:null,maxLength:null,exactLength:null,typeName:x.ZodArray,...I(e)});var Mt;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(Mt||(Mt={}));const rr=t=>e=>new $({...t,shape:()=>({...t.shape(),...e})});function be(t){if(t instanceof $){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=X.create(be(r))}return new $({...t._def,shape:()=>e})}else return t instanceof J?J.create(be(t.element)):t instanceof X?X.create(be(t.unwrap())):t instanceof ve?ve.create(be(t.unwrap())):t instanceof te?te.create(t.items.map(e=>be(e))):t}class $ extends N{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=rr(this._def),this.extend=rr(this._def)}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=R.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==y.object){const l=this._getOrReturnCtx(e);return g(l,{code:p.invalid_type,expected:y.object,received:l.parsedType}),k}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:a}=this._getCached(),o=[];if(!(this._def.catchall instanceof ce&&this._def.unknownKeys==="strip"))for(const l in s.data)a.includes(l)||o.push(l);const c=[];for(const l of a){const u=i[l],_=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new ee(s,_,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof ce){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of o)c.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(l==="strict")o.length>0&&(g(s,{code:p.unrecognized_keys,keys:o}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of o){const _=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new ee(s,_,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const _=await u.key;l.push({key:_,value:await u.value,alwaysSet:u.alwaysSet})}return l}).then(l=>K.mergeObjectSync(r,l)):K.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return A.errToObj,new $({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,a,o;const c=(a=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&a!==void 0?a:r.defaultError;return n.code==="unrecognized_keys"?{message:(o=A.errToObj(e).message)!==null&&o!==void 0?o:c}:{message:c}}}:{}})}strip(){return new $({...this._def,unknownKeys:"strip"})}passthrough(){return new $({...this._def,unknownKeys:"passthrough"})}setKey(e,n){return this.augment({[e]:n})}merge(e){return new $({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>Mt.mergeShapes(this._def.shape(),e._def.shape()),typeName:x.ZodObject})}catchall(e){return new $({...this._def,catchall:e})}pick(e){const n={};return R.objectKeys(e).map(r=>{this.shape[r]&&(n[r]=this.shape[r])}),new $({...this._def,shape:()=>n})}omit(e){const n={};return R.objectKeys(this.shape).map(r=>{R.objectKeys(e).indexOf(r)===-1&&(n[r]=this.shape[r])}),new $({...this._def,shape:()=>n})}deepPartial(){return be(this)}partial(e){const n={};if(e)return R.objectKeys(this.shape).map(r=>{R.objectKeys(e).indexOf(r)===-1?n[r]=this.shape[r]:n[r]=this.shape[r].optional()}),new $({...this._def,shape:()=>n});for(const r in this.shape){const s=this.shape[r];n[r]=s.optional()}return new $({...this._def,shape:()=>n})}required(e){const n={};if(e)R.objectKeys(this.shape).map(r=>{if(R.objectKeys(e).indexOf(r)===-1)n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof X;)i=i._def.innerType;n[r]=i}});else for(const r in this.shape){let i=this.shape[r];for(;i instanceof X;)i=i._def.innerType;n[r]=i}return new $({...this._def,shape:()=>n})}keyof(){return Br(R.objectKeys(this.shape))}}$.create=(t,e)=>new $({shape:()=>t,unknownKeys:"strip",catchall:ce.create(),typeName:x.ZodObject,...I(e)});$.strictCreate=(t,e)=>new $({shape:()=>t,unknownKeys:"strict",catchall:ce.create(),typeName:x.ZodObject,...I(e)});$.lazycreate=(t,e)=>new $({shape:t,unknownKeys:"strip",catchall:ce.create(),typeName:x.ZodObject,...I(e)});class qe extends N{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const o of i)if(o.result.status==="valid")return o.result;for(const o of i)if(o.result.status==="dirty")return n.common.issues.push(...o.ctx.common.issues),o.result;const a=i.map(o=>new ie(o.ctx.common.issues));return g(n,{code:p.invalid_union,unionErrors:a}),k}if(n.common.async)return Promise.all(r.map(async i=>{const a={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:a}),ctx:a}})).then(s);{let i;const a=[];for(const c of r){const l={...n,common:{...n.common,issues:[]},parent:null},u=c._parseSync({data:n.data,path:n.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:l}),l.common.issues.length&&a.push(l.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const o=a.map(c=>new ie(c));return g(n,{code:p.invalid_union,unionErrors:o}),k}}get options(){return this._def.options}}qe.create=(t,e)=>new qe({options:t,typeName:x.ZodUnion,...I(e)});const yt=t=>t instanceof Xe?yt(t.schema):t instanceof Y?yt(t.innerType()):t instanceof et?[t.value]:t instanceof lt?t.options:t instanceof tt?Object.keys(t.enum):t instanceof nt?yt(t._def.innerType):t instanceof Je?[void 0]:t instanceof Ye?[null]:null;class Vt extends N{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==y.object)return g(n,{code:p.invalid_type,expected:y.object,received:n.parsedType}),k;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(g(n,{code:p.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),k)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const a=yt(i.shape[e]);if(!a)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const o of a){if(s.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);s.set(o,i)}}return new Vt({typeName:x.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...I(r)})}}function mn(t,e){const n=le(t),r=le(e);if(t===e)return{valid:!0,data:t};if(n===y.object&&r===y.object){const s=R.objectKeys(e),i=R.objectKeys(t).filter(o=>s.indexOf(o)!==-1),a={...t,...e};for(const o of i){const c=mn(t[o],e[o]);if(!c.valid)return{valid:!1};a[o]=c.data}return{valid:!0,data:a}}else if(n===y.array&&r===y.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const a=t[i],o=e[i],c=mn(a,o);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===y.date&&r===y.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Ge extends N{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,a)=>{if(hn(i)||hn(a))return k;const o=mn(i.value,a.value);return o.valid?((pn(i)||pn(a))&&n.dirty(),{status:n.value,value:o.data}):(g(r,{code:p.invalid_intersection_types}),k)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,a])=>s(i,a)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Ge.create=(t,e,n)=>new Ge({left:t,right:e,typeName:x.ZodIntersection,...I(n)});class te extends N{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==y.array)return g(r,{code:p.invalid_type,expected:y.array,received:r.parsedType}),k;if(r.data.length<this._def.items.length)return g(r,{code:p.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),k;!this._def.rest&&r.data.length>this._def.items.length&&(g(r,{code:p.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=r.data.map((a,o)=>{const c=this._def.items[o]||this._def.rest;return c?c._parse(new ee(r,a,r.path,o)):null}).filter(a=>!!a);return r.common.async?Promise.all(i).then(a=>K.mergeArray(n,a)):K.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new te({...this._def,rest:e})}}te.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new te({items:t,typeName:x.ZodTuple,rest:null,...I(e)})};class Qe extends N{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==y.object)return g(r,{code:p.invalid_type,expected:y.object,received:r.parsedType}),k;const s=[],i=this._def.keyType,a=this._def.valueType;for(const o in r.data)s.push({key:i._parse(new ee(r,o,r.path,o)),value:a._parse(new ee(r,r.data[o],r.path,o))});return r.common.async?K.mergeObjectAsync(n,s):K.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof N?new Qe({keyType:e,valueType:n,typeName:x.ZodRecord,...I(r)}):new Qe({keyType:oe.create(),valueType:e,typeName:x.ZodRecord,...I(n)})}}class Pt extends N{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==y.map)return g(r,{code:p.invalid_type,expected:y.map,received:r.parsedType}),k;const s=this._def.keyType,i=this._def.valueType,a=[...r.data.entries()].map(([o,c],l)=>({key:s._parse(new ee(r,o,r.path,[l,"key"])),value:i._parse(new ee(r,c,r.path,[l,"value"]))}));if(r.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const c of a){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return k;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),o.set(l.value,u.value)}return{status:n.value,value:o}})}else{const o=new Map;for(const c of a){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return k;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),o.set(l.value,u.value)}return{status:n.value,value:o}}}}Pt.create=(t,e,n)=>new Pt({valueType:e,keyType:t,typeName:x.ZodMap,...I(n)});class ge extends N{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==y.set)return g(r,{code:p.invalid_type,expected:y.set,received:r.parsedType}),k;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(g(r,{code:p.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(g(r,{code:p.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function a(c){const l=new Set;for(const u of c){if(u.status==="aborted")return k;u.status==="dirty"&&n.dirty(),l.add(u.value)}return{status:n.value,value:l}}const o=[...r.data.values()].map((c,l)=>i._parse(new ee(r,c,r.path,l)));return r.common.async?Promise.all(o).then(c=>a(c)):a(o)}min(e,n){return new ge({...this._def,minSize:{value:e,message:A.toString(n)}})}max(e,n){return new ge({...this._def,maxSize:{value:e,message:A.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}ge.create=(t,e)=>new ge({valueType:t,minSize:null,maxSize:null,typeName:x.ZodSet,...I(e)});class Ce extends N{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==y.function)return g(n,{code:p.invalid_type,expected:y.function,received:n.parsedType}),k;function r(o,c){return St({data:o,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Tt(),He].filter(l=>!!l),issueData:{code:p.invalid_arguments,argumentsError:c}})}function s(o,c){return St({data:o,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Tt(),He].filter(l=>!!l),issueData:{code:p.invalid_return_type,returnTypeError:c}})}const i={errorMap:n.common.contextualErrorMap},a=n.data;return this._def.returns instanceof Se?V(async(...o)=>{const c=new ie([]),l=await this._def.args.parseAsync(o,i).catch(h=>{throw c.addIssue(r(o,h)),c}),u=await a(...l);return await this._def.returns._def.type.parseAsync(u,i).catch(h=>{throw c.addIssue(s(u,h)),c})}):V((...o)=>{const c=this._def.args.safeParse(o,i);if(!c.success)throw new ie([r(o,c.error)]);const l=a(...c.data),u=this._def.returns.safeParse(l,i);if(!u.success)throw new ie([s(l,u.error)]);return u.data})}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Ce({...this._def,args:te.create(e).rest(_e.create())})}returns(e){return new Ce({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new Ce({args:e||te.create([]).rest(_e.create()),returns:n||_e.create(),typeName:x.ZodFunction,...I(r)})}}class Xe extends N{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Xe.create=(t,e)=>new Xe({getter:t,typeName:x.ZodLazy,...I(e)});class et extends N{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return g(n,{code:p.invalid_literal,expected:this._def.value}),k}return{status:"valid",value:e.data}}get value(){return this._def.value}}et.create=(t,e)=>new et({value:t,typeName:x.ZodLiteral,...I(e)});function Br(t,e){return new lt({values:t,typeName:x.ZodEnum,...I(e)})}class lt extends N{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return g(n,{expected:R.joinValues(r),received:n.parsedType,code:p.invalid_type}),k}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return g(n,{received:n.data,code:p.invalid_enum_value,options:r}),k}return V(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}}lt.create=Br;class tt extends N{_parse(e){const n=R.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==y.string&&r.parsedType!==y.number){const s=R.objectValues(n);return g(r,{expected:R.joinValues(s),received:r.parsedType,code:p.invalid_type}),k}if(n.indexOf(e.data)===-1){const s=R.objectValues(n);return g(r,{received:r.data,code:p.invalid_enum_value,options:s}),k}return V(e.data)}get enum(){return this._def.values}}tt.create=(t,e)=>new tt({values:t,typeName:x.ZodNativeEnum,...I(e)});class Se extends N{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==y.promise&&n.common.async===!1)return g(n,{code:p.invalid_type,expected:y.promise,received:n.parsedType}),k;const r=n.parsedType===y.promise?n.data:Promise.resolve(n.data);return V(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Se.create=(t,e)=>new Se({type:t,typeName:x.ZodPromise,...I(e)});class Y extends N{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===x.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null;if(s.type==="preprocess"){const a=s.transform(r.data);return r.common.async?Promise.resolve(a).then(o=>this._def.schema._parseAsync({data:o,path:r.path,parent:r})):this._def.schema._parseSync({data:a,path:r.path,parent:r})}const i={addIssue:a=>{g(r,a),a.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="refinement"){const a=o=>{const c=s.refinement(o,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?k:(o.status==="dirty"&&n.dirty(),a(o.value),{status:n.value,value:o.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>o.status==="aborted"?k:(o.status==="dirty"&&n.dirty(),a(o.value).then(()=>({status:n.value,value:o.value}))))}if(s.type==="transform")if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Nt(a))return a;const o=s.transform(a.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:o}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>Nt(a)?Promise.resolve(s.transform(a.value,i)).then(o=>({status:n.value,value:o})):a);R.assertNever(s)}}Y.create=(t,e,n)=>new Y({schema:t,typeName:x.ZodEffects,effect:e,...I(n)});Y.createWithPreprocess=(t,e,n)=>new Y({schema:e,effect:{type:"preprocess",transform:t},typeName:x.ZodEffects,...I(n)});class X extends N{_parse(e){return this._getType(e)===y.undefined?V(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}X.create=(t,e)=>new X({innerType:t,typeName:x.ZodOptional,...I(e)});class ve extends N{_parse(e){return this._getType(e)===y.null?V(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ve.create=(t,e)=>new ve({innerType:t,typeName:x.ZodNullable,...I(e)});class nt extends N{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===y.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}nt.create=(t,e)=>new nt({innerType:t,typeName:x.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...I(e)});class Bt extends N{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.innerType._parse({data:n.data,path:n.path,parent:n});return It(r)?r.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.defaultValue()})):{status:"valid",value:r.status==="valid"?r.value:this._def.defaultValue()}}removeDefault(){return this._def.innerType}}Bt.create=(t,e)=>new Bt({innerType:t,typeName:x.ZodCatch,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...I(e)});class Lt extends N{_parse(e){if(this._getType(e)!==y.nan){const r=this._getOrReturnCtx(e);return g(r,{code:p.invalid_type,expected:y.nan,received:r.parsedType}),k}return{status:"valid",value:e.data}}}Lt.create=t=>new Lt({typeName:x.ZodNaN,...I(t)});const oi=Symbol("zod_brand");class Lr extends N{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class dt extends N{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?k:i.status==="dirty"?(n.dirty(),Pr(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?k:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new dt({in:e,out:n,typeName:x.ZodPipeline})}}const Dr=(t,e={},n)=>t?Te.create().superRefine((r,s)=>{if(!t(r)){const i=typeof e=="function"?e(r):e,a=typeof i=="string"?{message:i}:i;s.addIssue({code:"custom",...a,fatal:n})}}):Te.create(),ci={object:$.lazycreate};var x;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline"})(x||(x={}));const ui=(t,e={message:`Input not instance of ${t.name}`})=>Dr(n=>n instanceof t,e,!0),Or=oe.create,$r=pe.create,li=Lt.create,di=Fe.create,Ur=We.create,fi=ye.create,hi=At.create,pi=Je.create,mi=Ye.create,_i=Te.create,yi=_e.create,gi=ce.create,vi=Rt.create,wi=J.create,bi=$.create,xi=$.strictCreate,Ci=qe.create,Ei=Vt.create,ki=Ge.create,Ti=te.create,Si=Qe.create,Ni=Pt.create,Ii=ge.create,Ai=Ce.create,Ri=Xe.create,Mi=et.create,Pi=lt.create,Bi=tt.create,Li=Se.create,sr=Y.create,Di=X.create,Oi=ve.create,$i=Y.createWithPreprocess,Ui=dt.create,Zi=()=>Or().optional(),ji=()=>$r().optional(),Vi=()=>Ur().optional(),Ki={string:t=>oe.create({...t,coerce:!0}),number:t=>pe.create({...t,coerce:!0}),boolean:t=>We.create({...t,coerce:!0}),bigint:t=>Fe.create({...t,coerce:!0}),date:t=>ye.create({...t,coerce:!0})},zi=k;var D=Object.freeze({__proto__:null,defaultErrorMap:He,setErrorMap:ei,getErrorMap:Tt,makeIssue:St,EMPTY_PATH:ti,addIssueToContext:g,ParseStatus:K,INVALID:k,DIRTY:Pr,OK:V,isAborted:hn,isDirty:pn,isValid:Nt,isAsync:It,get util(){return R},ZodParsedType:y,getParsedType:le,ZodType:N,ZodString:oe,ZodNumber:pe,ZodBigInt:Fe,ZodBoolean:We,ZodDate:ye,ZodSymbol:At,ZodUndefined:Je,ZodNull:Ye,ZodAny:Te,ZodUnknown:_e,ZodNever:ce,ZodVoid:Rt,ZodArray:J,get objectUtil(){return Mt},ZodObject:$,ZodUnion:qe,ZodDiscriminatedUnion:Vt,ZodIntersection:Ge,ZodTuple:te,ZodRecord:Qe,ZodMap:Pt,ZodSet:ge,ZodFunction:Ce,ZodLazy:Xe,ZodLiteral:et,ZodEnum:lt,ZodNativeEnum:tt,ZodPromise:Se,ZodEffects:Y,ZodTransformer:Y,ZodOptional:X,ZodNullable:ve,ZodDefault:nt,ZodCatch:Bt,ZodNaN:Lt,BRAND:oi,ZodBranded:Lr,ZodPipeline:dt,custom:Dr,Schema:N,ZodSchema:N,late:ci,get ZodFirstPartyTypeKind(){return x},coerce:Ki,any:_i,array:wi,bigint:di,boolean:Ur,date:fi,discriminatedUnion:Ei,effect:sr,enum:Pi,function:Ai,instanceof:ui,intersection:ki,lazy:Ri,literal:Mi,map:Ni,nan:li,nativeEnum:Bi,never:gi,null:mi,nullable:Oi,number:$r,object:bi,oboolean:Vi,onumber:ji,optional:Di,ostring:Zi,pipeline:Ui,preprocess:$i,promise:Li,record:Si,set:Ii,strictObject:xi,string:Or,symbol:hi,transformer:sr,tuple:Ti,undefined:pi,union:Ci,unknown:yi,void:vi,NEVER:zi,ZodIssueCode:p,quotelessJson:Xs,ZodError:ie});const Ne=t=>{const e=window.atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n},Ie=t=>window.btoa(String.fromCharCode(...t)),Zr={name:"RSA-OAEP",hash:{name:"SHA-256"}},jr={name:"AES-GCM",length:256},Hi=async t=>Ie(new Uint8Array(await crypto.subtle.exportKey("raw",t))),Fi=async t=>Ie(new Uint8Array(await crypto.subtle.exportKey("spki",t))),Wi=async t=>Ie(new Uint8Array(await crypto.subtle.exportKey("pkcs8",t))),Ji=t=>crypto.subtle.importKey("raw",Ne(t),jr,!0,["encrypt","decrypt"]),Vr=t=>crypto.subtle.importKey("spki",Ne(t),Zr,!0,["encrypt"]),Yi=t=>crypto.subtle.importKey("pkcs8",Ne(t),Zr,!0,["decrypt"]),qi=async(t,e)=>{const n=crypto.getRandomValues(new Uint8Array(12)),r=await crypto.subtle.encrypt({name:"AES-GCM",iv:n},t,new TextEncoder().encode(JSON.stringify(e)));return{iv:Ie(n),ciphertext:Ie(new Uint8Array(r))}},Gi=async(t,e,n)=>{const r=await crypto.subtle.decrypt({name:"AES-GCM",iv:Ne(e)},t,Ne(n));return JSON.parse(String.fromCharCode(...new Uint8Array(r)))},Qi=async(t,e)=>{const n=await crypto.subtle.encrypt({name:"RSA-OAEP"},t,new TextEncoder().encode(JSON.stringify(e)));return Ie(new Uint8Array(n))},Xi=async(t,e)=>{const n=await crypto.subtle.decrypt({name:"RSA-OAEP"},t,Ne(e));return JSON.parse(String.fromCharCode(...new Uint8Array(n)))},ea=()=>crypto.subtle.generateKey(jr,!0,["encrypt","decrypt"]),ta=()=>crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:4096,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["encrypt","decrypt"]),na=(t,e)=>e.some(n=>t instanceof n);let ir,ar;function ra(){return ir||(ir=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function sa(){return ar||(ar=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Kr=new WeakMap,_n=new WeakMap,zr=new WeakMap,Xt=new WeakMap,Dn=new WeakMap;function ia(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(ae(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&Kr.set(n,t)}).catch(()=>{}),Dn.set(e,t),e}function aa(t){if(_n.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});_n.set(t,e)}let yn={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return _n.get(t);if(e==="objectStoreNames")return t.objectStoreNames||zr.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ae(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function oa(t){yn=t(yn)}function ca(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(en(this),e,...n);return zr.set(r,e.sort?e.sort():[e]),ae(r)}:sa().includes(t)?function(...e){return t.apply(en(this),e),ae(Kr.get(this))}:function(...e){return ae(t.apply(en(this),e))}}function ua(t){return typeof t=="function"?ca(t):(t instanceof IDBTransaction&&aa(t),na(t,ra())?new Proxy(t,yn):t)}function ae(t){if(t instanceof IDBRequest)return ia(t);if(Xt.has(t))return Xt.get(t);const e=ua(t);return e!==t&&(Xt.set(t,e),Dn.set(e,t)),e}const en=t=>Dn.get(t);function la(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),o=ae(a);return r&&a.addEventListener("upgradeneeded",c=>{r(ae(a.result),c.oldVersion,c.newVersion,ae(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),o.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",l=>s(l.oldVersion,l.newVersion,l))}).catch(()=>{}),o}function da(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),ae(n).then(()=>{})}const fa=["get","getKey","getAll","getAllKeys","count"],ha=["put","add","delete","clear"],tn=new Map;function or(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(tn.get(e))return tn.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=ha.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||fa.includes(n)))return;const i=async function(a,...o){const c=this.transaction(a,s?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(o.shift())),(await Promise.all([l[n](...o),s&&c.done]))[0]};return tn.set(e,i),i}oa(t=>({...t,get:(e,n,r)=>or(e,n)||t.get(e,n,r),has:(e,n)=>!!or(e,n)||t.has(e,n)}));let P;const he=()=>la("noti-db",1,{upgrade(t){t.createObjectStore("chats",{keyPath:"serializedPublicKey"});const e=t.createObjectStore("messages",{keyPath:"entryId"});e.createIndex("sender","sender"),e.createIndex("recipient","recipient"),t.createObjectStore("keyRecords",{keyPath:"serializedPublicKey"})}}),pa=async()=>{P&&(P.close(),P=void 0),await da("noti-db")};class Ae{static async put(e){return P||(P=await he()),await P.put("chats",e)}static async get(e){return P||(P=await he()),await P.get("chats",e)}static async getAll(){return P||(P=await he()),await P.getAll("chats")}}class de{static async getAll(e){return P||(P=await he()),(await Promise.all([P.getAllFromIndex("messages","sender",e),P.getAllFromIndex("messages","recipient",e)])).flat().sort((n,r)=>r.createdAt-n.createdAt)}static async put(e){return P||(P=await he()),await P.put("messages",e)}static async get(e){return P||(P=await he()),await P.get("messages",e)}}class rt{static async put(e){return P||(P=await he()),await P.put("keyRecords",e)}static async get(e){return P||(P=await he()),await P.get("keyRecords",e)}}const Q=ue(!0),Hr=ue(!1),L=ue(void 0),F=ue(void 0);ue(void 0);const Re=ue([]),st=ue([]),On="identity";jt(async()=>{if(!L.value){Re.value=[];return}localStorage.setItem(On,await Fr(L.value)),Re.value=await Ae.getAll()});const ma=t=>new Promise(e=>{if(t.length===0)return e(void 0);const n=new FileReader;n.onloadend=async()=>{const r=await Wr(n.result);return e(r||void 0)},n.readAsText(t[0])}),Fr=async({serializedPublicKey:t,privateKey:e,displayName:n,avatar:r})=>JSON.stringify({publicKey:t,privateKey:await Wi(e),displayName:n,avatar:r}),Wr=async t=>{const e=D.object({publicKey:D.string(),privateKey:D.string(),displayName:D.string(),avatar:D.string().optional()}).safeParse(JSON.parse(t));if(e.success)return{publicKey:await Vr(e.data.publicKey),serializedPublicKey:e.data.publicKey,privateKey:await Yi(e.data.privateKey),displayName:e.data.displayName,avatar:e.data.avatar}},_a=()=>Wr(localStorage.getItem(On)||'""'),ya=async()=>{L.value=void 0,localStorage.removeItem(On),await pa(),Re.value=await Ae.getAll()},ga=async()=>{if(!L.value)return;const t=document.createElement("a");t.setAttribute("href",`data:text/plain;charset=utf-8,${encodeURIComponent(await Fr(L.value))}`),t.setAttribute("download",`${crypto.randomUUID()}.json`),t.click()},va=async(t,e,n,r)=>{const s=await Ae.get(t);if(s&&s.entryId===e.entryId)return;const i={serializedPublicKey:t,displayName:decodeURIComponent(e.displayName),entryId:e.entryId};await Ae.put(i),Re.value=[i,...Re.value],Xr.dispatch(e.entryId,i);const a={type:e.type,entryId:e.entryId,displayName:encodeURIComponent(n),avatar:r};await Kt(t,a)},wa=async(t,e,n)=>{var c,l,u;const r=await de.get(e.entryId);if(r){r.receivedAt=e.receivedAt,await de.put(r),((c=F.value)==null?void 0:c.serializedPublicKey)===t&&(st.value=await de.getAll(t));return}const s=Date.now(),i={sender:t,recipient:n,content:decodeURIComponent(e.content),createdAt:e.createdAt,entryId:e.entryId,receivedAt:s};await de.put(i);const a=await Ae.get(i.sender);if(a&&((l=F.value)==null?void 0:l.serializedPublicKey)!==i.sender){(await navigator.serviceWorker.ready).showNotification("Notification with ServiceWorker");const h=new Notification(`Noti message from ${a.displayName}:`,{body:i.content,icon:`https://ui-avatars.com/api/?name=${a.displayName}&rounded=true&format=svg&background=random`});h.onclick=()=>window.location.href=`${location.protocol}//${location.host}/chat/${encodeURIComponent(i.sender)}`}((u=F.value)==null?void 0:u.serializedPublicKey)===t&&(st.value=await de.getAll(t));const o={type:e.type,entryId:e.entryId,content:e.content,createdAt:e.createdAt,receivedAt:s};await Kt(t,o)};class Jr{constructor(){G(this,"eventTarget");this.eventTarget=new EventTarget}waitFor(e,n){return new Promise(r=>{const s=setTimeout(()=>r(void 0),n),i=a=>{clearTimeout(s),this.eventTarget.removeEventListener(e,i),r(a.detail)};this.eventTarget.addEventListener(e,i)})}dispatch(e,n){const r=new CustomEvent(e,{detail:n});this.eventTarget.dispatchEvent(r)}}const Yr=new Jr,qr=async t=>{const e=await ea(),n=crypto.randomUUID(),r={type:"KEY",entryId:n,symmetricKey:await Hi(e)};return await Qr(t,r),await Yr.waitFor(n,1e4)},ba=async(t,e)=>{const n=await rt.get(t);if(n&&n.entryId===e.entryId)return;const r=await Ji(e.symmetricKey),s={entryId:e.entryId,serializedPublicKey:t,symmetricKey:r};await rt.put(s),Yr.dispatch(e.entryId,s);const i={type:e.type,entryId:e.entryId,symmetricKey:e.symmetricKey};await Qr(t,i)},xa=D.object({type:D.literal("KEY"),entryId:D.string(),symmetricKey:D.string()}),Ca=D.object({type:D.literal("CHAT"),entryId:D.string(),displayName:D.string(),avatar:D.string().optional()}),Ea=D.object({type:D.literal("MESSAGE"),entryId:D.string(),content:D.string(),createdAt:D.number(),receivedAt:D.number().optional()}),ka=D.object({iv:D.string().optional(),publicKey:D.string(),ciphertext:D.string()}),Gr=async(t,e)=>{const n=JSON.stringify(e),r=`https://noti-relay.deno.dev?id=${encodeURIComponent(t)}`,s=await fetch(r,{method:"POST",body:n});if(!s.ok)throw new Error(`Fetch failed with status: ${s.status}, ${await s.text()}`)},Qr=async(t,e)=>{if(!L.value)return;const n=await Vr(t),r={publicKey:L.value.serializedPublicKey,ciphertext:await Qi(n,e)};await Gr(t,r)},Kt=async(t,e)=>{if(!L.value)return;const n=await rt.get(t);if(!n)return;const{iv:r,ciphertext:s}=await qi(n.symmetricKey,e),i={iv:r,publicKey:L.value.serializedPublicKey,ciphertext:s};await Gr(t,i)},Ta=async t=>{const e=ka.safeParse(JSON.parse(t));if(!(!e.success||!L.value))try{if(e.data.iv){let n=await rt.get(e.data.publicKey);if(!n){qr(e.data.publicKey);return}const r=await Gi(n.symmetricKey,e.data.iv,e.data.ciphertext),s=D.discriminatedUnion("type",[Ca,Ea]).safeParse(r);if(!s.success)return;switch(console.log(s.data),s.data.type){case"MESSAGE":return wa(e.data.publicKey,s.data,L.value.serializedPublicKey);case"CHAT":return va(e.data.publicKey,s.data,L.value.displayName,L.value.avatar)}}else{const n=await Xi(L.value.privateKey,e.data.ciphertext),r=xa.safeParse(n);r.success&&(console.log(r.data),ba(e.data.publicKey,r.data))}}catch(n){console.error(n)}},Xr=new Jr,Sa=async(t,e,n)=>{const r=crypto.randomUUID(),s={type:"CHAT",entryId:r,displayName:encodeURIComponent(e),avatar:n};return await Kt(t,s),await Xr.waitFor(r,1e4)},Na=async(t,e,n)=>{var o;const r=Date.now(),s=crypto.randomUUID(),i={sender:n,recipient:t,content:e,createdAt:r,entryId:s};await de.put(i),((o=F.value)==null?void 0:o.serializedPublicKey)===t&&(st.value=await de.getAll(t));const a={type:"MESSAGE",content:encodeURIComponent(e),createdAt:r,entryId:s};await Kt(t,a)},Ia=({publicKey:t,identity:e})=>{var i,a,o;const[n,r]=kr(),s=Ee("");return xt(()=>{if(t===e.serializedPublicKey){r("/");return}(async()=>{let l;for(;!l;)l=await rt.get(t)||await qr(t);for(F.value=await Ae.get(t);!F.value;)F.value=await Sa(t,e.displayName,e.avatar);st.value=await de.getAll(t)})()},[t]),f(ke,{children:[f("div",{className:"flex items-center justify-between p-3 border-b border-gray-500 w-full",children:[f("div",{className:"flex items-center",children:[f(kt,{alt:((i=F.value)==null?void 0:i.displayName)||"User",src:(a=F.value)==null?void 0:a.avatar}),f("h1",{className:"pl-4 font-bold",children:((o=F.value)==null?void 0:o.displayName)||"Loading..."})]}),f("div",{className:"flex items-center",children:f(Pn,{href:"/",children:f("i",{className:"fa-solid fa-chevron-right text-3xl p-3 cursor-pointer"})})})]}),f("div",{className:"flex-1 flex flex-col-reverse overflow-auto w-full",children:st.value.map(c=>{var l,u;return f("div",{className:`${t===c.sender?"self-start":"self-end"} flex items-center m-2 max-w-[80%]`,children:[t===c.sender?f(kt,{alt:((l=F.value)==null?void 0:l.displayName)||"User",src:(u=F.value)==null?void 0:u.avatar,size:30}):null,f("span",{className:`rounded-2xl p-2 ml-2 ${t===c.sender?"bg-slate-600":c.receivedAt?"bg-blue-500":"bg-orange-600"}`,children:c.content})]})})}),f("div",{className:"border-gray-500 flex items-center border-t py-4 px-2 w-full",children:[f("textarea",{className:"bg-black border border-white focus:outline-none w-full px-3 py-2 rounded-[2rem] resize-none overflow-hidden",placeholder:"Type your message...",autofocus:!0,rows:1,value:s.value,onChange:({target:c})=>{c instanceof HTMLTextAreaElement&&(s.value=c.value)}}),f("button",{type:"button",onClick:async()=>{const c=s.value.trim();c!==""&&(await Na(t,c,e.serializedPublicKey),s.value="")},children:f("i",{className:"fa-solid fa-paper-plane py-2 text-2xl pr-3 pl-6 cursor-pointer focus:outline-none"})})]})]})};var Aa=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},es={},W={};let $n;const Ra=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];W.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};W.getSymbolTotalCodewords=function(e){return Ra[e]};W.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e};W.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');$n=e};W.isKanjiModeEnabled=function(){return typeof $n<"u"};W.toSJIS=function(e){return $n(e)};var zt={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+n)}}t.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},t.from=function(r,s){if(t.isValid(r))return r;try{return e(r)}catch{return s}}})(zt);function ts(){this.buffer=[],this.length=0}ts.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let n=0;n<e;n++)this.putBit((t>>>e-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var Ma=ts;function ft(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}ft.prototype.set=function(t,e,n,r){const s=t*this.size+e;this.data[s]=n,r&&(this.reservedBit[s]=!0)};ft.prototype.get=function(t,e){return this.data[t*this.size+e]};ft.prototype.xor=function(t,e,n){this.data[t*this.size+e]^=n};ft.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var Pa=ft,ns={};(function(t){const e=W.getSymbolSize;t.getRowColCoords=function(r){if(r===1)return[];const s=Math.floor(r/7)+2,i=e(r),a=i===145?26:Math.ceil((i-13)/(2*s-2))*2,o=[i-7];for(let c=1;c<s-1;c++)o[c]=o[c-1]-a;return o.push(6),o.reverse()},t.getPositions=function(r){const s=[],i=t.getRowColCoords(r),a=i.length;for(let o=0;o<a;o++)for(let c=0;c<a;c++)o===0&&c===0||o===0&&c===a-1||o===a-1&&c===0||s.push([i[o],i[c]]);return s}})(ns);var rs={};const Ba=W.getSymbolSize,cr=7;rs.getPositions=function(e){const n=Ba(e);return[[0,0],[n-cr,0],[0,n-cr]]};var ss={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(s){return s!=null&&s!==""&&!isNaN(s)&&s>=0&&s<=7},t.from=function(s){return t.isValid(s)?parseInt(s,10):void 0},t.getPenaltyN1=function(s){const i=s.size;let a=0,o=0,c=0,l=null,u=null;for(let _=0;_<i;_++){o=c=0,l=u=null;for(let h=0;h<i;h++){let d=s.get(_,h);d===l?o++:(o>=5&&(a+=e.N1+(o-5)),l=d,o=1),d=s.get(h,_),d===u?c++:(c>=5&&(a+=e.N1+(c-5)),u=d,c=1)}o>=5&&(a+=e.N1+(o-5)),c>=5&&(a+=e.N1+(c-5))}return a},t.getPenaltyN2=function(s){const i=s.size;let a=0;for(let o=0;o<i-1;o++)for(let c=0;c<i-1;c++){const l=s.get(o,c)+s.get(o,c+1)+s.get(o+1,c)+s.get(o+1,c+1);(l===4||l===0)&&a++}return a*e.N2},t.getPenaltyN3=function(s){const i=s.size;let a=0,o=0,c=0;for(let l=0;l<i;l++){o=c=0;for(let u=0;u<i;u++)o=o<<1&2047|s.get(l,u),u>=10&&(o===1488||o===93)&&a++,c=c<<1&2047|s.get(u,l),u>=10&&(c===1488||c===93)&&a++}return a*e.N3},t.getPenaltyN4=function(s){let i=0;const a=s.data.length;for(let c=0;c<a;c++)i+=s.data[c];return Math.abs(Math.ceil(i*100/a/5)-10)*e.N4};function n(r,s,i){switch(r){case t.Patterns.PATTERN000:return(s+i)%2===0;case t.Patterns.PATTERN001:return s%2===0;case t.Patterns.PATTERN010:return i%3===0;case t.Patterns.PATTERN011:return(s+i)%3===0;case t.Patterns.PATTERN100:return(Math.floor(s/2)+Math.floor(i/3))%2===0;case t.Patterns.PATTERN101:return s*i%2+s*i%3===0;case t.Patterns.PATTERN110:return(s*i%2+s*i%3)%2===0;case t.Patterns.PATTERN111:return(s*i%3+(s+i)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}t.applyMask=function(s,i){const a=i.size;for(let o=0;o<a;o++)for(let c=0;c<a;c++)i.isReserved(c,o)||i.xor(c,o,n(s,c,o))},t.getBestMask=function(s,i){const a=Object.keys(t.Patterns).length;let o=0,c=1/0;for(let l=0;l<a;l++){i(l),t.applyMask(l,s);const u=t.getPenaltyN1(s)+t.getPenaltyN2(s)+t.getPenaltyN3(s)+t.getPenaltyN4(s);t.applyMask(l,s),u<c&&(c=u,o=l)}return o}})(ss);var Ht={};const fe=zt,ht=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],pt=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Ht.getBlocksCount=function(e,n){switch(n){case fe.L:return ht[(e-1)*4+0];case fe.M:return ht[(e-1)*4+1];case fe.Q:return ht[(e-1)*4+2];case fe.H:return ht[(e-1)*4+3];default:return}};Ht.getTotalCodewordsCount=function(e,n){switch(n){case fe.L:return pt[(e-1)*4+0];case fe.M:return pt[(e-1)*4+1];case fe.Q:return pt[(e-1)*4+2];case fe.H:return pt[(e-1)*4+3];default:return}};var is={},Ft={};const Ke=new Uint8Array(512),Dt=new Uint8Array(256);(function(){let e=1;for(let n=0;n<255;n++)Ke[n]=e,Dt[e]=n,e<<=1,e&256&&(e^=285);for(let n=255;n<512;n++)Ke[n]=Ke[n-255]})();Ft.log=function(e){if(e<1)throw new Error("log("+e+")");return Dt[e]};Ft.exp=function(e){return Ke[e]};Ft.mul=function(e,n){return e===0||n===0?0:Ke[Dt[e]+Dt[n]]};(function(t){const e=Ft;t.mul=function(r,s){const i=new Uint8Array(r.length+s.length-1);for(let a=0;a<r.length;a++)for(let o=0;o<s.length;o++)i[a+o]^=e.mul(r[a],s[o]);return i},t.mod=function(r,s){let i=new Uint8Array(r);for(;i.length-s.length>=0;){const a=i[0];for(let c=0;c<s.length;c++)i[c]^=e.mul(s[c],a);let o=0;for(;o<i.length&&i[o]===0;)o++;i=i.slice(o)}return i},t.generateECPolynomial=function(r){let s=new Uint8Array([1]);for(let i=0;i<r;i++)s=t.mul(s,new Uint8Array([1,e.exp(i)]));return s}})(is);const as=is;function Un(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}Un.prototype.initialize=function(e){this.degree=e,this.genPoly=as.generateECPolynomial(this.degree)};Un.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const n=new Uint8Array(e.length+this.degree);n.set(e);const r=as.mod(n,this.genPoly),s=this.degree-r.length;if(s>0){const i=new Uint8Array(this.degree);return i.set(r,s),i}return r};var La=Un,os={},me={},Zn={};Zn.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var ne={};const cs="[0-9]+",Da="[A-Z $%*+\\-./:]+";let it="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";it=it.replace(/u/g,"\\u");const Oa="(?:(?![A-Z0-9 $%*+\\-./:]|"+it+`)(?:.|[\r
]))+`;ne.KANJI=new RegExp(it,"g");ne.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");ne.BYTE=new RegExp(Oa,"g");ne.NUMERIC=new RegExp(cs,"g");ne.ALPHANUMERIC=new RegExp(Da,"g");const $a=new RegExp("^"+it+"$"),Ua=new RegExp("^"+cs+"$"),Za=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");ne.testKanji=function(e){return $a.test(e)};ne.testNumeric=function(e){return Ua.test(e)};ne.testAlphanumeric=function(e){return Za.test(e)};(function(t){const e=Zn,n=ne;t.NUMERIC={id:"Numeric",bit:1<<0,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:1<<1,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:1<<2,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:1<<3,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(i,a){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!e.isValid(a))throw new Error("Invalid version: "+a);return a>=1&&a<10?i.ccBits[0]:a<27?i.ccBits[1]:i.ccBits[2]},t.getBestModeForData=function(i){return n.testNumeric(i)?t.NUMERIC:n.testAlphanumeric(i)?t.ALPHANUMERIC:n.testKanji(i)?t.KANJI:t.BYTE},t.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},t.isValid=function(i){return i&&i.bit&&i.ccBits};function r(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+s)}}t.from=function(i,a){if(t.isValid(i))return i;try{return r(i)}catch{return a}}})(me);(function(t){const e=W,n=Ht,r=zt,s=me,i=Zn,a=1<<12|1<<11|1<<10|1<<9|1<<8|1<<5|1<<2|1<<0,o=e.getBCHDigit(a);function c(h,d,m){for(let T=1;T<=40;T++)if(d<=t.getCapacity(T,m,h))return T}function l(h,d){return s.getCharCountIndicator(h,d)+4}function u(h,d){let m=0;return h.forEach(function(T){const S=l(T.mode,d);m+=S+T.getBitsLength()}),m}function _(h,d){for(let m=1;m<=40;m++)if(u(h,m)<=t.getCapacity(m,d,s.MIXED))return m}t.from=function(d,m){return i.isValid(d)?parseInt(d,10):m},t.getCapacity=function(d,m,T){if(!i.isValid(d))throw new Error("Invalid QR Code version");typeof T>"u"&&(T=s.BYTE);const S=e.getSymbolTotalCodewords(d),v=n.getTotalCodewordsCount(d,m),C=(S-v)*8;if(T===s.MIXED)return C;const b=C-l(T,d);switch(T){case s.NUMERIC:return Math.floor(b/10*3);case s.ALPHANUMERIC:return Math.floor(b/11*2);case s.KANJI:return Math.floor(b/13);case s.BYTE:default:return Math.floor(b/8)}},t.getBestVersionForData=function(d,m){let T;const S=r.from(m,r.M);if(Array.isArray(d)){if(d.length>1)return _(d,S);if(d.length===0)return 1;T=d[0]}else T=d;return c(T.mode,T.getLength(),S)},t.getEncodedBits=function(d){if(!i.isValid(d)||d<7)throw new Error("Invalid QR Code version");let m=d<<12;for(;e.getBCHDigit(m)-o>=0;)m^=a<<e.getBCHDigit(m)-o;return d<<12|m}})(os);var us={};const gn=W,ls=1<<10|1<<8|1<<5|1<<4|1<<2|1<<1|1<<0,ja=1<<14|1<<12|1<<10|1<<4|1<<1,ur=gn.getBCHDigit(ls);us.getEncodedBits=function(e,n){const r=e.bit<<3|n;let s=r<<10;for(;gn.getBCHDigit(s)-ur>=0;)s^=ls<<gn.getBCHDigit(s)-ur;return(r<<10|s)^ja};var ds={};const Va=me;function Me(t){this.mode=Va.NUMERIC,this.data=t.toString()}Me.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};Me.prototype.getLength=function(){return this.data.length};Me.prototype.getBitsLength=function(){return Me.getBitsLength(this.data.length)};Me.prototype.write=function(e){let n,r,s;for(n=0;n+3<=this.data.length;n+=3)r=this.data.substr(n,3),s=parseInt(r,10),e.put(s,10);const i=this.data.length-n;i>0&&(r=this.data.substr(n),s=parseInt(r,10),e.put(s,i*3+1))};var Ka=Me;const za=me,nn=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Pe(t){this.mode=za.ALPHANUMERIC,this.data=t}Pe.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};Pe.prototype.getLength=function(){return this.data.length};Pe.prototype.getBitsLength=function(){return Pe.getBitsLength(this.data.length)};Pe.prototype.write=function(e){let n;for(n=0;n+2<=this.data.length;n+=2){let r=nn.indexOf(this.data[n])*45;r+=nn.indexOf(this.data[n+1]),e.put(r,11)}this.data.length%2&&e.put(nn.indexOf(this.data[n]),6)};var Ha=Pe,Fa=function(e){for(var n=[],r=e.length,s=0;s<r;s++){var i=e.charCodeAt(s);if(i>=55296&&i<=56319&&r>s+1){var a=e.charCodeAt(s+1);a>=56320&&a<=57343&&(i=(i-55296)*1024+a-56320+65536,s+=1)}if(i<128){n.push(i);continue}if(i<2048){n.push(i>>6|192),n.push(i&63|128);continue}if(i<55296||i>=57344&&i<65536){n.push(i>>12|224),n.push(i>>6&63|128),n.push(i&63|128);continue}if(i>=65536&&i<=1114111){n.push(i>>18|240),n.push(i>>12&63|128),n.push(i>>6&63|128),n.push(i&63|128);continue}n.push(239,191,189)}return new Uint8Array(n).buffer};const Wa=Fa,Ja=me;function Be(t){this.mode=Ja.BYTE,typeof t=="string"&&(t=Wa(t)),this.data=new Uint8Array(t)}Be.getBitsLength=function(e){return e*8};Be.prototype.getLength=function(){return this.data.length};Be.prototype.getBitsLength=function(){return Be.getBitsLength(this.data.length)};Be.prototype.write=function(t){for(let e=0,n=this.data.length;e<n;e++)t.put(this.data[e],8)};var Ya=Be;const qa=me,Ga=W;function Le(t){this.mode=qa.KANJI,this.data=t}Le.getBitsLength=function(e){return e*13};Le.prototype.getLength=function(){return this.data.length};Le.prototype.getBitsLength=function(){return Le.getBitsLength(this.data.length)};Le.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let n=Ga.toSJIS(this.data[e]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),t.put(n,13)}};var Qa=Le,vn={},Xa={get exports(){return vn},set exports(t){vn=t}};(function(t){var e={single_source_shortest_paths:function(n,r,s){var i={},a={};a[r]=0;var o=e.PriorityQueue.make();o.push(r,0);for(var c,l,u,_,h,d,m,T,S;!o.empty();){c=o.pop(),l=c.value,_=c.cost,h=n[l]||{};for(u in h)h.hasOwnProperty(u)&&(d=h[u],m=_+d,T=a[u],S=typeof a[u]>"u",(S||T>m)&&(a[u]=m,o.push(u,m),i[u]=l))}if(typeof s<"u"&&typeof a[s]>"u"){var v=["Could not find a path from ",r," to ",s,"."].join("");throw new Error(v)}return i},extract_shortest_path_from_predecessor_list:function(n,r){for(var s=[],i=r;i;)s.push(i),n[i],i=n[i];return s.reverse(),s},find_path:function(n,r,s){var i=e.single_source_shortest_paths(n,r,s);return e.extract_shortest_path_from_predecessor_list(i,s)},PriorityQueue:{make:function(n){var r=e.PriorityQueue,s={},i;n=n||{};for(i in r)r.hasOwnProperty(i)&&(s[i]=r[i]);return s.queue=[],s.sorter=n.sorter||r.default_sorter,s},default_sorter:function(n,r){return n.cost-r.cost},push:function(n,r){var s={value:n,cost:r};this.queue.push(s),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(Xa);(function(t){const e=me,n=Ka,r=Ha,s=Ya,i=Qa,a=ne,o=W,c=vn;function l(v){return unescape(encodeURIComponent(v)).length}function u(v,C,b){const w=[];let M;for(;(M=v.exec(b))!==null;)w.push({data:M[0],index:M.index,mode:C,length:M[0].length});return w}function _(v){const C=u(a.NUMERIC,e.NUMERIC,v),b=u(a.ALPHANUMERIC,e.ALPHANUMERIC,v);let w,M;return o.isKanjiModeEnabled()?(w=u(a.BYTE,e.BYTE,v),M=u(a.KANJI,e.KANJI,v)):(w=u(a.BYTE_KANJI,e.BYTE,v),M=[]),C.concat(b,w,M).sort(function(U,O){return U.index-O.index}).map(function(U){return{data:U.data,mode:U.mode,length:U.length}})}function h(v,C){switch(C){case e.NUMERIC:return n.getBitsLength(v);case e.ALPHANUMERIC:return r.getBitsLength(v);case e.KANJI:return i.getBitsLength(v);case e.BYTE:return s.getBitsLength(v)}}function d(v){return v.reduce(function(C,b){const w=C.length-1>=0?C[C.length-1]:null;return w&&w.mode===b.mode?(C[C.length-1].data+=b.data,C):(C.push(b),C)},[])}function m(v){const C=[];for(let b=0;b<v.length;b++){const w=v[b];switch(w.mode){case e.NUMERIC:C.push([w,{data:w.data,mode:e.ALPHANUMERIC,length:w.length},{data:w.data,mode:e.BYTE,length:w.length}]);break;case e.ALPHANUMERIC:C.push([w,{data:w.data,mode:e.BYTE,length:w.length}]);break;case e.KANJI:C.push([w,{data:w.data,mode:e.BYTE,length:l(w.data)}]);break;case e.BYTE:C.push([{data:w.data,mode:e.BYTE,length:l(w.data)}])}}return C}function T(v,C){const b={},w={start:{}};let M=["start"];for(let B=0;B<v.length;B++){const U=v[B],O=[];for(let H=0;H<U.length;H++){const q=U[H],$e=""+B+H;O.push($e),b[$e]={node:q,lastCount:0},w[$e]={};for(let Jt=0;Jt<M.length;Jt++){const re=M[Jt];b[re]&&b[re].node.mode===q.mode?(w[re][$e]=h(b[re].lastCount+q.length,q.mode)-h(b[re].lastCount,q.mode),b[re].lastCount+=q.length):(b[re]&&(b[re].lastCount=q.length),w[re][$e]=h(q.length,q.mode)+4+e.getCharCountIndicator(q.mode,C))}}M=O}for(let B=0;B<M.length;B++)w[M[B]].end=0;return{map:w,table:b}}function S(v,C){let b;const w=e.getBestModeForData(v);if(b=e.from(C,w),b!==e.BYTE&&b.bit<w.bit)throw new Error('"'+v+'" cannot be encoded with mode '+e.toString(b)+`.
 Suggested mode is: `+e.toString(w));switch(b===e.KANJI&&!o.isKanjiModeEnabled()&&(b=e.BYTE),b){case e.NUMERIC:return new n(v);case e.ALPHANUMERIC:return new r(v);case e.KANJI:return new i(v);case e.BYTE:return new s(v)}}t.fromArray=function(C){return C.reduce(function(b,w){return typeof w=="string"?b.push(S(w,null)):w.data&&b.push(S(w.data,w.mode)),b},[])},t.fromString=function(C,b){const w=_(C,o.isKanjiModeEnabled()),M=m(w),B=T(M,b),U=c.find_path(B.map,"start","end"),O=[];for(let H=1;H<U.length-1;H++)O.push(B.table[U[H]].node);return t.fromArray(d(O))},t.rawSplit=function(C){return t.fromArray(_(C,o.isKanjiModeEnabled()))}})(ds);const Wt=W,rn=zt,eo=Ma,to=Pa,no=ns,ro=rs,wn=ss,bn=Ht,so=La,Ot=os,io=us,ao=me,sn=ds;function oo(t,e){const n=t.size,r=ro.getPositions(e);for(let s=0;s<r.length;s++){const i=r[s][0],a=r[s][1];for(let o=-1;o<=7;o++)if(!(i+o<=-1||n<=i+o))for(let c=-1;c<=7;c++)a+c<=-1||n<=a+c||(o>=0&&o<=6&&(c===0||c===6)||c>=0&&c<=6&&(o===0||o===6)||o>=2&&o<=4&&c>=2&&c<=4?t.set(i+o,a+c,!0,!0):t.set(i+o,a+c,!1,!0))}}function co(t){const e=t.size;for(let n=8;n<e-8;n++){const r=n%2===0;t.set(n,6,r,!0),t.set(6,n,r,!0)}}function uo(t,e){const n=no.getPositions(e);for(let r=0;r<n.length;r++){const s=n[r][0],i=n[r][1];for(let a=-2;a<=2;a++)for(let o=-2;o<=2;o++)a===-2||a===2||o===-2||o===2||a===0&&o===0?t.set(s+a,i+o,!0,!0):t.set(s+a,i+o,!1,!0)}}function lo(t,e){const n=t.size,r=Ot.getEncodedBits(e);let s,i,a;for(let o=0;o<18;o++)s=Math.floor(o/3),i=o%3+n-8-3,a=(r>>o&1)===1,t.set(s,i,a,!0),t.set(i,s,a,!0)}function an(t,e,n){const r=t.size,s=io.getEncodedBits(e,n);let i,a;for(i=0;i<15;i++)a=(s>>i&1)===1,i<6?t.set(i,8,a,!0):i<8?t.set(i+1,8,a,!0):t.set(r-15+i,8,a,!0),i<8?t.set(8,r-i-1,a,!0):i<9?t.set(8,15-i-1+1,a,!0):t.set(8,15-i-1,a,!0);t.set(r-8,8,1,!0)}function fo(t,e){const n=t.size;let r=-1,s=n-1,i=7,a=0;for(let o=n-1;o>0;o-=2)for(o===6&&o--;;){for(let c=0;c<2;c++)if(!t.isReserved(s,o-c)){let l=!1;a<e.length&&(l=(e[a]>>>i&1)===1),t.set(s,o-c,l),i--,i===-1&&(a++,i=7)}if(s+=r,s<0||n<=s){s-=r,r=-r;break}}}function ho(t,e,n){const r=new eo;n.forEach(function(c){r.put(c.mode.bit,4),r.put(c.getLength(),ao.getCharCountIndicator(c.mode,t)),c.write(r)});const s=Wt.getSymbolTotalCodewords(t),i=bn.getTotalCodewordsCount(t,e),a=(s-i)*8;for(r.getLengthInBits()+4<=a&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);const o=(a-r.getLengthInBits())/8;for(let c=0;c<o;c++)r.put(c%2?17:236,8);return po(r,t,e)}function po(t,e,n){const r=Wt.getSymbolTotalCodewords(e),s=bn.getTotalCodewordsCount(e,n),i=r-s,a=bn.getBlocksCount(e,n),o=r%a,c=a-o,l=Math.floor(r/a),u=Math.floor(i/a),_=u+1,h=l-u,d=new so(h);let m=0;const T=new Array(a),S=new Array(a);let v=0;const C=new Uint8Array(t.buffer);for(let U=0;U<a;U++){const O=U<c?u:_;T[U]=C.slice(m,m+O),S[U]=d.encode(T[U]),m+=O,v=Math.max(v,O)}const b=new Uint8Array(r);let w=0,M,B;for(M=0;M<v;M++)for(B=0;B<a;B++)M<T[B].length&&(b[w++]=T[B][M]);for(M=0;M<h;M++)for(B=0;B<a;B++)b[w++]=S[B][M];return b}function mo(t,e,n,r){let s;if(Array.isArray(t))s=sn.fromArray(t);else if(typeof t=="string"){let l=e;if(!l){const u=sn.rawSplit(t);l=Ot.getBestVersionForData(u,n)}s=sn.fromString(t,l||40)}else throw new Error("Invalid data");const i=Ot.getBestVersionForData(s,n);if(!i)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=i;else if(e<i)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+i+`.
`);const a=ho(e,n,s),o=Wt.getSymbolSize(e),c=new to(o);return oo(c,e),co(c),uo(c,e),an(c,n,0),e>=7&&lo(c,e),fo(c,a),isNaN(r)&&(r=wn.getBestMask(c,an.bind(null,c,n))),wn.applyMask(r,c),an(c,n,r),{modules:c,version:e,errorCorrectionLevel:n,maskPattern:r,segments:s}}es.create=function(e,n){if(typeof e>"u"||e==="")throw new Error("No input text");let r=rn.M,s,i;return typeof n<"u"&&(r=rn.from(n.errorCorrectionLevel,rn.M),s=Ot.from(n.version),i=wn.from(n.maskPattern),n.toSJISFunc&&Wt.setToSJISFunction(n.toSJISFunc)),mo(e,s,r,i)};var fs={},jn={};(function(t){function e(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let r=n.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+n);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(i){return[i,i]}))),r.length===6&&r.push("F","F");const s=parseInt(r.join(""),16);return{r:s>>24&255,g:s>>16&255,b:s>>8&255,a:s&255,hex:"#"+r.slice(0,6).join("")}}t.getOptions=function(r){r||(r={}),r.color||(r.color={});const s=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,i=r.width&&r.width>=21?r.width:void 0,a=r.scale||4;return{width:i,scale:i?4:a,margin:s,color:{dark:e(r.color.dark||"#000000ff"),light:e(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},t.getScale=function(r,s){return s.width&&s.width>=r+s.margin*2?s.width/(r+s.margin*2):s.scale},t.getImageWidth=function(r,s){const i=t.getScale(r,s);return Math.floor((r+s.margin*2)*i)},t.qrToImageData=function(r,s,i){const a=s.modules.size,o=s.modules.data,c=t.getScale(a,i),l=Math.floor((a+i.margin*2)*c),u=i.margin*c,_=[i.color.light,i.color.dark];for(let h=0;h<l;h++)for(let d=0;d<l;d++){let m=(h*l+d)*4,T=i.color.light;if(h>=u&&d>=u&&h<l-u&&d<l-u){const S=Math.floor((h-u)/c),v=Math.floor((d-u)/c);T=_[o[S*a+v]?1:0]}r[m++]=T.r,r[m++]=T.g,r[m++]=T.b,r[m]=T.a}}})(jn);(function(t){const e=jn;function n(s,i,a){s.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=a,i.width=a,i.style.height=a+"px",i.style.width=a+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(i,a,o){let c=o,l=a;typeof c>"u"&&(!a||!a.getContext)&&(c=a,a=void 0),a||(l=r()),c=e.getOptions(c);const u=e.getImageWidth(i.modules.size,c),_=l.getContext("2d"),h=_.createImageData(u,u);return e.qrToImageData(h.data,i,c),n(_,l,u),_.putImageData(h,0,0),l},t.renderToDataURL=function(i,a,o){let c=o;typeof c>"u"&&(!a||!a.getContext)&&(c=a,a=void 0),c||(c={});const l=t.render(i,a,c),u=c.type||"image/png",_=c.rendererOpts||{};return l.toDataURL(u,_.quality)}})(fs);var hs={};const _o=jn;function lr(t,e){const n=t.a/255,r=e+'="'+t.hex+'"';return n<1?r+" "+e+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function on(t,e,n){let r=t+e;return typeof n<"u"&&(r+=" "+n),r}function yo(t,e,n){let r="",s=0,i=!1,a=0;for(let o=0;o<t.length;o++){const c=Math.floor(o%e),l=Math.floor(o/e);!c&&!i&&(i=!0),t[o]?(a++,o>0&&c>0&&t[o-1]||(r+=i?on("M",c+n,.5+l+n):on("m",s,0),s=0,i=!1),c+1<e&&t[o+1]||(r+=on("h",a),a=0)):s++}return r}hs.render=function(e,n,r){const s=_o.getOptions(n),i=e.modules.size,a=e.modules.data,o=i+s.margin*2,c=s.color.light.a?"<path "+lr(s.color.light,"fill")+' d="M0 0h'+o+"v"+o+'H0z"/>':"",l="<path "+lr(s.color.dark,"stroke")+' d="'+yo(a,i,s.margin)+'"/>',u='viewBox="0 0 '+o+" "+o+'"',h='<svg xmlns="http://www.w3.org/2000/svg" '+(s.width?'width="'+s.width+'" height="'+s.width+'" ':"")+u+' shape-rendering="crispEdges">'+c+l+`</svg>
`;return typeof r=="function"&&r(null,h),h};const go=Aa,xn=es,ps=fs,vo=hs;function Vn(t,e,n,r,s){const i=[].slice.call(arguments,1),a=i.length,o=typeof i[a-1]=="function";if(!o&&!go())throw new Error("Callback required as last argument");if(o){if(a<2)throw new Error("Too few arguments provided");a===2?(s=n,n=e,e=r=void 0):a===3&&(e.getContext&&typeof s>"u"?(s=r,r=void 0):(s=r,r=n,n=e,e=void 0))}else{if(a<1)throw new Error("Too few arguments provided");return a===1?(n=e,e=r=void 0):a===2&&!e.getContext&&(r=n,n=e,e=void 0),new Promise(function(c,l){try{const u=xn.create(n,r);c(t(u,e,r))}catch(u){l(u)}})}try{const c=xn.create(n,r);s(null,t(c,e,r))}catch(c){s(c)}}xn.create;Vn.bind(null,ps.render);Vn.bind(null,ps.renderToDataURL);var wo=Vn.bind(null,function(t,e,n){return vo.render(t,n)});const bo=({text:t,className:e})=>{const n=Ee("");return wo(t,{type:"svg",errorCorrectionLevel:"low",margin:1},(r,s)=>n.value=s||""),f("div",{className:e,dangerouslySetInnerHTML:{__html:n.value}})},xo=({identity:t})=>{const e=`${location.protocol}//${location.host}/chat/${encodeURIComponent(t.serializedPublicKey)}`;return f(ke,{children:[f("h1",{className:"text-center m-1 text-xl",children:"Create a new conversation"}),f("div",{className:"w-full overflow-y-auto",children:[f("p",{className:"m-2 text-justify",children:"Show this QR code to the person you want to chat with or send them the link provided below via a trusted medium. Generally, you should never click on links that you do not trust."}),f(bo,{text:e,className:"p-3 w-full"}),f("textarea",{title:e,value:e,className:"w-full focus:outline-none bg-slate-800 p-3 rounded border-white border resize-none",rows:3,disabled:!0})]})]})},Co=({toggle:t,enabled:e})=>f("button",{title:"Show profile data",type:"button",className:"focus:outline-none p-2",onClick:t,children:f("i",{className:`text-3xl fa-solid ${e?"fa-chevron-up":"fa-chevron-down"}`})}),cn=({onClick:t,children:e})=>f("button",{type:"button",className:"font-bold border rounded border-white p-1 m-2",onClick:t,children:e}),Eo=({enabled:t,onEdit:e,onSave:n,onSignOut:r})=>{var s,i;return f("div",{className:`text-white p-2 w-full ${t?"":"hidden"}`,children:[f("div",{className:"flex justify-evenly items-center p-2",children:[f("div",{children:f(kt,{alt:((s=L.value)==null?void 0:s.displayName)||""})}),f("span",{children:["Username: ",(i=L.value)==null?void 0:i.displayName]})]}),f("div",{className:"flex flex-col justify-evenly py-3",children:[f(cn,{onClick:e,children:["Edit ",f("i",{className:"fa-regular fa-pen-to-square"})]}),f(cn,{onClick:r,children:["Sign out ",f("i",{className:"fa-solid fa-right-from-bracket"})]}),f(cn,{onClick:n,children:["Save identity ",f("i",{className:"fa-solid fa-download"})]})]})]})},ko=({chats:t})=>f("div",{className:"flex-1 w-full p-3",children:t.map((e,n)=>f(Pn,{className:"cursor-pointer",href:`${location.protocol}//${location.host}/chat/${encodeURIComponent(e.serializedPublicKey)}`,children:f("div",{className:`flex items-center justify-between border border-gray-500 rounded font-bold py-4 px-8 ${n===t.length-1?"":"mb-3"}`,children:f("div",{className:"flex items-center",children:[f(kt,{alt:e.displayName}),f("span",{className:"px-4 text-xl",children:e.displayName})]})})}))}),To=()=>{const t=Ee(!1);return F.value=void 0,f(ke,{children:[f("div",{class:"flex items-center justify-between px-5 py-3 w-full",children:[f("h1",{class:"font-bold text-2xl w-full",children:"Conversations"}),f(Co,{toggle:()=>t.value=!t.value,enabled:t.value})]}),f(Eo,{enabled:t.value,onEdit:()=>console.log("edit"),onSignOut:ya,onSave:ga}),f("div",{className:"w-full text-center",children:f("span",{children:["Status: ",Hr.value?"Connected":"Disconnected"]})}),f(ko,{chats:Re.value}),f(Pn,{href:"/create",children:f("div",{className:"absolute bg-blue-500 w-20 h-20 flex justify-center items-center rounded-[50%] cursor-pointer right-10 bottom-10",children:f("i",{className:"fa-solid fa-plus text-3xl"})})})]})},ms=()=>f("div",{className:"text-white flex-1 flex justify-center items-center",children:f("i",{className:"fa-solid fa-circle-notch loading text-5xl"})}),So=()=>{const t=Ee(""),e=Ee("");return Q.value?f(ke,{children:f(ms,{})}):f(ke,{children:f("div",{className:"max-w-sm border border-white rounded p-8 my-2 mx-auto flex flex-col",children:[f("h1",{className:"text-center m-1 text-5xl",children:"Noti"}),f("h2",{className:"text-center m-1",children:["Sign in ",f("i",{className:"fa-solid fa-rocket"})]}),e.value!==""?f("div",{class:"border-2 font-bold text-xs leading-5 rounded text-red-800 bg-red-300 border-red-800 my-2 p-2",children:["Validation error:",f("br",{}),e.value]}):null,f("form",{onSubmit:async n=>{if(Q.value=!0,n.preventDefault(),t.value===""){e.value="You must provide a username.",Q.value=!1;return}const{publicKey:r,privateKey:s}=await ta();L.value={publicKey:r,serializedPublicKey:await Fi(r),privateKey:s,displayName:t.value},Q.value=!1},children:[f("label",{for:"username",children:"New username:"}),f("input",{type:"text",name:"username",title:"username",className:"bg-black border border-white rounded outline-none p-1 my-1 w-full",onInput:({target:n})=>{n instanceof HTMLInputElement&&(t.value=n.value)},value:t.value,autofocus:!0}),f("button",{type:"submit",className:"font-bold border rounded border-white p-1 my-1 w-full",children:"Generate new identity"})]}),f("span",{className:"text-gray-300 mx-auto",children:"- OR -"}),f("label",{className:"font-bold border rounded border-white p-1 my-1 text-center cursor-pointer",children:[f("input",{title:"Import indentity",type:"file",className:"hidden",accept:".json",onChange:async({currentTarget:n})=>{if(Q.value=!0,n.files){const r=await ma(n.files);if(!r){e.value="Failed to import identity. Choose an exported json file that contains your identity.",Q.value=!1;return}L.value=r}Q.value=!1}}),"Import indentity"]})]})})},Cn=128,No=Cn*Math.pow(2,7);class Io{constructor(e){G(this,"timeoutId");G(this,"ws");G(this,"isConnected");G(this,"previousIsConnected");G(this,"retryDelay");G(this,"onStateChange");G(this,"onMessage");G(this,"shouldBeOpen");this.isConnected=!1,this.previousIsConnected=!1,this.retryDelay=Cn,this.shouldBeOpen=!1,e==null||e.addEventListener("abort",()=>{var n;this.shouldBeOpen=!1,(n=this.ws)==null||n.close()})}connect(e,n,r){this.shouldBeOpen=!0,this.ws=this._connect(e),this.onStateChange=n,this.onMessage=r}setState(e){var n;this.previousIsConnected=this.isConnected,this.isConnected=e,this.previousIsConnected!==this.isConnected&&((n=this.onStateChange)==null||n.call(this,this.isConnected))}_connect(e){clearTimeout(this.timeoutId);const n=new WebSocket(e);return n.onopen=()=>{this.setState(!0),this.retryDelay=Cn},n.onmessage=r=>{var s;(s=this.onMessage)==null||s.call(this,r.data)},n.onclose=()=>{this.setState(!1),this.shouldBeOpen&&(this.previousIsConnected===!1&&this.isConnected===!1&&(this.retryDelay*=2),this.timeoutId=window.setTimeout(()=>this._connect(e),Math.min(No,this.retryDelay)))},this.ws=n,n}send(e){var n;(n=this.ws)==null||n.send(e)}}const Ao=()=>(navigator.serviceWorker.register("sw.js"),Notification.permission==="default"&&Notification.requestPermission(),xt(()=>{(async()=>{Q.value=!0;const e=await _a();e&&(L.value=e),Q.value=!1})()},[]),xt(()=>{const t=new AbortController,e=new Io(t.signal);if(!L.value){t.abort();return}return e.connect(`wss://noti-relay.deno.dev?id=${encodeURIComponent(L.value.serializedPublicKey)}`,n=>Hr.value=n,Ta),()=>t.abort()},[L.value]),Q.value?f(ke,{children:f(ms,{})}):L.value?f(Ws,{children:[f(Gt,{path:"/chat/:publicKey",children:({publicKey:t})=>f(Ia,{publicKey:decodeURIComponent(t||""),identity:L.value})}),f(Gt,{path:"/create",children:f(xo,{identity:L.value})}),f(Gt,{path:"/",children:f(To,{})}),f(Js,{to:"/"})]}):f(So,{}));xs(f(Ao,{}),document.getElementById("app"));
