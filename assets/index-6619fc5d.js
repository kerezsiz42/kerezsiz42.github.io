var Xr=Object.defineProperty;var es=(t,e,n)=>e in t?Xr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ee=(t,e,n)=>(es(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var qe,T,rr,mn,Me,Ln,sr,lt={},ir=[],ts=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function te(t,e){for(var n in e)t[n]=e[n];return t}function or(t){var e=t.parentNode;e&&e.removeChild(t)}function yn(t,e,n){var r,i,s,o={};for(s in e)s=="key"?r=e[s]:s=="ref"?i=e[s]:o[s]=e[s];if(arguments.length>2&&(o.children=arguments.length>3?qe.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(s in t.defaultProps)o[s]===void 0&&(o[s]=t.defaultProps[s]);return Re(t,o,r,i,null)}function Re(t,e,n,r,i){var s={type:t,props:e,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:i??++rr};return i==null&&T.vnode!=null&&T.vnode(s),s}function ns(){return{current:null}}function Ge(t){return t.children}function Pe(t,e){this.props=t,this.context=e}function De(t,e){if(e==null)return t.__?De(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?De(t):null}function ar(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return ar(t)}}function Qt(t){(!t.__d&&(t.__d=!0)&&Me.push(t)&&!dt.__r++||Ln!==T.debounceRendering)&&((Ln=T.debounceRendering)||setTimeout)(dt)}function dt(){for(var t;dt.__r=Me.length;)t=Me.sort(function(e,n){return e.__v.__b-n.__v.__b}),Me=[],t.some(function(e){var n,r,i,s,o,a;e.__d&&(o=(s=(n=e).__v).__e,(a=n.__P)&&(r=[],(i=te({},s)).__v=s.__v+1,gn(a,s,i,n.__n,a.ownerSVGElement!==void 0,s.__h!=null?[o]:null,r,o??De(s),s.__h),dr(r,s),s.__e!=o&&ar(s)))})}function cr(t,e,n,r,i,s,o,a,c,l){var u,y,f,d,_,E,N,v=r&&r.__k||ir,k=v.length;for(n.__k=[],u=0;u<e.length;u++)if((d=n.__k[u]=(d=e[u])==null||typeof d=="boolean"?null:typeof d=="string"||typeof d=="number"||typeof d=="bigint"?Re(null,d,null,null,d):Array.isArray(d)?Re(Ge,{children:d},null,null,null):d.__b>0?Re(d.type,d.props,d.key,d.ref?d.ref:null,d.__v):d)!=null){if(d.__=n,d.__b=n.__b+1,(f=v[u])===null||f&&d.key==f.key&&d.type===f.type)v[u]=void 0;else for(y=0;y<k;y++){if((f=v[y])&&d.key==f.key&&d.type===f.type){v[y]=void 0;break}f=null}gn(t,d,f=f||lt,i,s,o,a,c,l),_=d.__e,(y=d.ref)&&f.ref!=y&&(N||(N=[]),f.ref&&N.push(f.ref,null,d),N.push(y,d.__c||_,d)),_!=null?(E==null&&(E=_),typeof d.type=="function"&&d.__k===f.__k?d.__d=c=ur(d,c,t):c=lr(t,d,f,v,_,c),typeof n.type=="function"&&(n.__d=c)):c&&f.__e==c&&c.parentNode!=t&&(c=De(f))}for(n.__e=E,u=k;u--;)v[u]!=null&&hr(v[u],v[u]);if(N)for(u=0;u<N.length;u++)fr(N[u],N[++u],N[++u])}function ur(t,e,n){for(var r,i=t.__k,s=0;i&&s<i.length;s++)(r=i[s])&&(r.__=t,e=typeof r.type=="function"?ur(r,e,n):lr(n,r,r,i,r.__e,e));return e}function lr(t,e,n,r,i,s){var o,a,c;if(e.__d!==void 0)o=e.__d,e.__d=void 0;else if(n==null||i!=s||i.parentNode==null)e:if(s==null||s.parentNode!==t)t.appendChild(i),o=null;else{for(a=s,c=0;(a=a.nextSibling)&&c<r.length;c+=1)if(a==i)break e;t.insertBefore(i,s),o=s}return o!==void 0?o:i.nextSibling}function rs(t,e,n,r,i){var s;for(s in n)s==="children"||s==="key"||s in e||ft(t,s,null,n[s],r);for(s in e)i&&typeof e[s]!="function"||s==="children"||s==="key"||s==="value"||s==="checked"||n[s]===e[s]||ft(t,s,e[s],n[s],r)}function Dn(t,e,n){e[0]==="-"?t.setProperty(e,n):t[e]=n==null?"":typeof n!="number"||ts.test(e)?n:n+"px"}function ft(t,e,n,r,i){var s;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof r=="string"&&(t.style.cssText=r=""),r)for(e in r)n&&e in n||Dn(t.style,e,"");if(n)for(e in n)r&&n[e]===r[e]||Dn(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")s=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+s]=n,n?r||t.addEventListener(e,s?Zn:On,s):t.removeEventListener(e,s?Zn:On,s);else if(e!=="dangerouslySetInnerHTML"){if(i)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e.indexOf("-")==-1?t.removeAttribute(e):t.setAttribute(e,n))}}function On(t){this.l[t.type+!1](T.event?T.event(t):t)}function Zn(t){this.l[t.type+!0](T.event?T.event(t):t)}function gn(t,e,n,r,i,s,o,a,c){var l,u,y,f,d,_,E,N,v,k,b,w,R,P,D,B=e.type;if(e.constructor!==void 0)return null;n.__h!=null&&(c=n.__h,a=e.__e=n.__e,e.__h=null,s=[a]),(l=T.__b)&&l(e);try{e:if(typeof B=="function"){if(N=e.props,v=(l=B.contextType)&&r[l.__c],k=l?v?v.props.value:l.__:r,n.__c?E=(u=e.__c=n.__c).__=u.__E:("prototype"in B&&B.prototype.render?e.__c=u=new B(N,k):(e.__c=u=new Pe(N,k),u.constructor=B,u.render=is),v&&v.sub(u),u.props=N,u.state||(u.state={}),u.context=k,u.__n=r,y=u.__d=!0,u.__h=[],u._sb=[]),u.__s==null&&(u.__s=u.state),B.getDerivedStateFromProps!=null&&(u.__s==u.state&&(u.__s=te({},u.__s)),te(u.__s,B.getDerivedStateFromProps(N,u.__s))),f=u.props,d=u.state,y)B.getDerivedStateFromProps==null&&u.componentWillMount!=null&&u.componentWillMount(),u.componentDidMount!=null&&u.__h.push(u.componentDidMount);else{if(B.getDerivedStateFromProps==null&&N!==f&&u.componentWillReceiveProps!=null&&u.componentWillReceiveProps(N,k),!u.__e&&u.shouldComponentUpdate!=null&&u.shouldComponentUpdate(N,u.__s,k)===!1||e.__v===n.__v){for(u.props=N,u.state=u.__s,e.__v!==n.__v&&(u.__d=!1),u.__v=e,e.__e=n.__e,e.__k=n.__k,e.__k.forEach(function(z){z&&(z.__=e)}),b=0;b<u._sb.length;b++)u.__h.push(u._sb[b]);u._sb=[],u.__h.length&&o.push(u);break e}u.componentWillUpdate!=null&&u.componentWillUpdate(N,u.__s,k),u.componentDidUpdate!=null&&u.__h.push(function(){u.componentDidUpdate(f,d,_)})}if(u.context=k,u.props=N,u.__v=e,u.__P=t,w=T.__r,R=0,"prototype"in B&&B.prototype.render){for(u.state=u.__s,u.__d=!1,w&&w(e),l=u.render(u.props,u.state,u.context),P=0;P<u._sb.length;P++)u.__h.push(u._sb[P]);u._sb=[]}else do u.__d=!1,w&&w(e),l=u.render(u.props,u.state,u.context),u.state=u.__s;while(u.__d&&++R<25);u.state=u.__s,u.getChildContext!=null&&(r=te(te({},r),u.getChildContext())),y||u.getSnapshotBeforeUpdate==null||(_=u.getSnapshotBeforeUpdate(f,d)),D=l!=null&&l.type===Ge&&l.key==null?l.props.children:l,cr(t,Array.isArray(D)?D:[D],e,n,r,i,s,o,a,c),u.base=e.__e,e.__h=null,u.__h.length&&o.push(u),E&&(u.__E=u.__=null),u.__e=!1}else s==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=ss(n.__e,e,n,r,i,s,o,c);(l=T.diffed)&&l(e)}catch(z){e.__v=null,(c||s!=null)&&(e.__e=a,e.__h=!!c,s[s.indexOf(a)]=null),T.__e(z,e,n)}}function dr(t,e){T.__c&&T.__c(e,t),t.some(function(n){try{t=n.__h,n.__h=[],t.some(function(r){r.call(n)})}catch(r){T.__e(r,n.__v)}})}function ss(t,e,n,r,i,s,o,a){var c,l,u,y=n.props,f=e.props,d=e.type,_=0;if(d==="svg"&&(i=!0),s!=null){for(;_<s.length;_++)if((c=s[_])&&"setAttribute"in c==!!d&&(d?c.localName===d:c.nodeType===3)){t=c,s[_]=null;break}}if(t==null){if(d===null)return document.createTextNode(f);t=i?document.createElementNS("http://www.w3.org/2000/svg",d):document.createElement(d,f.is&&f),s=null,a=!1}if(d===null)y===f||a&&t.data===f||(t.data=f);else{if(s=s&&qe.call(t.childNodes),l=(y=n.props||lt).dangerouslySetInnerHTML,u=f.dangerouslySetInnerHTML,!a){if(s!=null)for(y={},_=0;_<t.attributes.length;_++)y[t.attributes[_].name]=t.attributes[_].value;(u||l)&&(u&&(l&&u.__html==l.__html||u.__html===t.innerHTML)||(t.innerHTML=u&&u.__html||""))}if(rs(t,f,y,i,a),u)e.__k=[];else if(_=e.props.children,cr(t,Array.isArray(_)?_:[_],e,n,r,i&&d!=="foreignObject",s,o,s?s[0]:n.__k&&De(n,0),a),s!=null)for(_=s.length;_--;)s[_]!=null&&or(s[_]);a||("value"in f&&(_=f.value)!==void 0&&(_!==t.value||d==="progress"&&!_||d==="option"&&_!==y.value)&&ft(t,"value",_,y.value,!1),"checked"in f&&(_=f.checked)!==void 0&&_!==t.checked&&ft(t,"checked",_,y.checked,!1))}return t}function fr(t,e,n){try{typeof t=="function"?t(e):t.current=e}catch(r){T.__e(r,n)}}function hr(t,e,n){var r,i;if(T.unmount&&T.unmount(t),(r=t.ref)&&(r.current&&r.current!==t.__e||fr(r,null,e)),(r=t.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(s){T.__e(s,e)}r.base=r.__P=null,t.__c=void 0}if(r=t.__k)for(i=0;i<r.length;i++)r[i]&&hr(r[i],e,n||typeof t.type!="function");n||t.__e==null||or(t.__e),t.__=t.__e=t.__d=void 0}function is(t,e,n){return this.constructor(t,n)}function os(t,e,n){var r,i,s;T.__&&T.__(t,e),i=(r=typeof n=="function")?null:n&&n.__k||e.__k,s=[],gn(e,t=(!r&&n||e).__k=yn(Ge,null,[t]),i||lt,lt,e.ownerSVGElement!==void 0,!r&&n?[n]:i?null:e.firstChild?qe.call(e.childNodes):null,s,!r&&n?n:i?i.__e:e.firstChild,r),dr(s,t)}function pr(t,e,n){var r,i,s,o=te({},t.props);for(s in e)s=="key"?r=e[s]:s=="ref"?i=e[s]:o[s]=e[s];return arguments.length>2&&(o.children=arguments.length>3?qe.call(arguments,2):n),Re(t.type,o,r||t.key,i||t.ref,null)}function as(t,e){var n={__c:e="__cC"+sr++,__:t,Consumer:function(r,i){return r.children(i)},Provider:function(r){var i,s;return this.getChildContext||(i=[],(s={})[e]=this,this.getChildContext=function(){return s},this.shouldComponentUpdate=function(o){this.props.value!==o.value&&i.some(Qt)},this.sub=function(o){i.push(o);var a=o.componentWillUnmount;o.componentWillUnmount=function(){i.splice(i.indexOf(o),1),a&&a.call(o)}}),r.children}};return n.Provider.__=n.Consumer.contextType=n}qe=ir.slice,T={__e:function(t,e,n,r){for(var i,s,o;e=e.__;)if((i=e.__c)&&!i.__)try{if((s=i.constructor)&&s.getDerivedStateFromError!=null&&(i.setState(s.getDerivedStateFromError(t)),o=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(t,r||{}),o=i.__d),o)return i.__E=i}catch(a){t=a}throw t}},rr=0,mn=function(t){return t!=null&&t.constructor===void 0},Pe.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=te({},this.state),typeof t=="function"&&(t=t(te({},n),this.props)),t&&te(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),Qt(this))},Pe.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Qt(this))},Pe.prototype.render=Ge,Me=[],dt.__r=0,sr=0;var Se,O,$t,$n,ht=0,_r=[],ot=[],jn=T.__b,Un=T.__r,Vn=T.diffed,zn=T.__c,Hn=T.unmount;function Qe(t,e){T.__h&&T.__h(O,t,ht||e),ht=0;var n=O.__H||(O.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({__V:ot}),n.__[t]}function cs(t){return ht=1,us(mr,t)}function us(t,e,n){var r=Qe(Se++,2);if(r.t=t,!r.__c&&(r.__=[n?n(e):mr(void 0,e),function(s){var o=r.__N?r.__N[0]:r.__[0],a=r.t(o,s);o!==a&&(r.__N=[a,r.__[1]],r.__c.setState({}))}],r.__c=O,!O.u)){O.u=!0;var i=O.shouldComponentUpdate;O.shouldComponentUpdate=function(s,o,a){if(!r.__c.__H)return!0;var c=r.__c.__H.__.filter(function(u){return u.__c});if(c.every(function(u){return!u.__N}))return!i||i.call(this,s,o,a);var l=!1;return c.forEach(function(u){if(u.__N){var y=u.__[0];u.__=u.__N,u.__N=void 0,y!==u.__[0]&&(l=!0)}}),!(!l&&r.__c.props===s)&&(!i||i.call(this,s,o,a))}}return r.__N||r.__}function ae(t,e){var n=Qe(Se++,3);!T.__s&&bn(n.__H,e)&&(n.__=t,n.i=e,O.__H.__h.push(n))}function vn(t,e){var n=Qe(Se++,4);!T.__s&&bn(n.__H,e)&&(n.__=t,n.i=e,O.__h.push(n))}function ls(t){return ht=5,wn(function(){return{current:t}},[])}function wn(t,e){var n=Qe(Se++,7);return bn(n.__H,e)?(n.__V=t(),n.i=e,n.__h=t,n.__V):n.__}function ds(t){var e=O.context[t.__c],n=Qe(Se++,9);return n.c=t,e?(n.__==null&&(n.__=!0,e.sub(O)),e.props.value):t.__}function fs(){for(var t;t=_r.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(at),t.__H.__h.forEach(Xt),t.__H.__h=[]}catch(e){t.__H.__h=[],T.__e(e,t.__v)}}T.__b=function(t){O=null,jn&&jn(t)},T.__r=function(t){Un&&Un(t),Se=0;var e=(O=t.__c).__H;e&&($t===O?(e.__h=[],O.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=ot,n.__N=n.i=void 0})):(e.__h.forEach(at),e.__h.forEach(Xt),e.__h=[])),$t=O},T.diffed=function(t){Vn&&Vn(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(_r.push(e)!==1&&$n===T.requestAnimationFrame||(($n=T.requestAnimationFrame)||hs)(fs)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==ot&&(n.__=n.__V),n.i=void 0,n.__V=ot})),$t=O=null},T.__c=function(t,e){e.some(function(n){try{n.__h.forEach(at),n.__h=n.__h.filter(function(r){return!r.__||Xt(r)})}catch(r){e.some(function(i){i.__h&&(i.__h=[])}),e=[],T.__e(r,n.__v)}}),zn&&zn(t,e)},T.unmount=function(t){Hn&&Hn(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{at(r)}catch(i){e=i}}),n.__H=void 0,e&&T.__e(e,n.__v))};var Kn=typeof requestAnimationFrame=="function";function hs(t){var e,n=function(){clearTimeout(r),Kn&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(n,100);Kn&&(e=requestAnimationFrame(n))}function at(t){var e=O,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),O=e}function Xt(t){var e=O;t.__c=t.__(),O=e}function bn(t,e){return!t||t.length!==e.length||e.some(function(n,r){return n!==t[r]})}function mr(t,e){return typeof e=="function"?e(t):e}function jt(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}function ps(t,e){const n=e(),[{_instance:r},i]=cs({_instance:{_value:n,_getSnapshot:e}});return vn(()=>{r._value=n,r._getSnapshot=e,jt(r._value,e())||i({_instance:r})},[t,n,e]),ae(()=>(jt(r._value,r._getSnapshot())||i({_instance:r}),t(()=>{jt(r._value,r._getSnapshot())||i({_instance:r})})),[t]),n}const xn=t=>{const e=ls([t,(...n)=>e[0](...n)]).current;return vn(()=>{e[0]=t}),e[1]},_s=(t="",e=location.pathname)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",ms=(t,e="")=>t[0]==="~"?t.slice(1):e+t,ys="popstate",kn="pushState",Tn="replaceState",gs="hashchange",Fn=[ys,kn,Tn,gs],vs=t=>{for(const e of Fn)addEventListener(e,t);return()=>{for(const e of Fn)removeEventListener(e,t)}},ws=t=>ps(vs,t),bs=()=>location.pathname,xs=()=>ws(bs),ks=(t,{replace:e=!1}={})=>history[e?Tn:kn](null,"",t),Ts=(t={})=>[_s(t.base,xs()),xn((e,n)=>ks(ms(e,t.base),n))];if(typeof history<"u")for(const t of[kn,Tn]){const e=history[t];history[t]=function(){const n=e.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),n}}function Cs(t=Ns){let e={};const n=r=>e[r]||(e[r]=t(r));return(r,i)=>{const{regexp:s,keys:o}=n(r||""),a=s.exec(i);return a?[!0,o.reduce((l,u,y)=>(l[u.name]=a[y+1],l),{})]:[!1,null]}}const Wn=t=>t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),Es=(t,e,n)=>{let r=t?"((?:[^\\/]+?)(?:\\/(?:[^\\/]+?))*)":"([^\\/]+?)";return e&&n&&(r="(?:\\/"+r+")"),r+(e?"?":"")},Ns=t=>{const e=/:([A-Za-z0-9_]+)([?+*]?)/g;let n=null,r=0,i=[],s="";for(;(n=e.exec(t))!==null;){const[o,a,c]=n,l=c==="+"||c==="*",u=c==="?"||c==="*",y=u&&t[n.index-1]==="/"?1:0,f=t.substring(r,n.index-y);i.push({name:a}),r=e.lastIndex,s+=Wn(f)+Es(l,u,y)}return s+=Wn(t.substring(r)),{keys:i,regexp:new RegExp("^"+s+"(?:\\/)?$","i")}},Ss={hook:Ts,matcher:Cs(),base:""},Is=as(Ss),It=()=>ds(Is),At=t=>t.hook(t),Cn=()=>At(It()),As=t=>{const e=It(),[n]=At(e);return e.matcher(t,n)},Ut=({path:t,match:e,component:n,children:r})=>{const i=As(t),[s,o]=e||i;return s?n?yn(n,{params:o}):typeof r=="function"?r(o):r:null},yr=(t,e)=>{const n=It(),[,r]=At(n),{to:i,href:s=i,children:o,onClick:a}=t,c=xn(y=>{y.ctrlKey||y.metaKey||y.altKey||y.shiftKey||y.button!==0||(a&&a(y),y.defaultPrevented||(y.preventDefault(),r(i||s,t)))}),l={href:s[0]==="~"?s.slice(1):n.base+s,onClick:c,to:null,ref:e},u=mn(o)?o:yn("a",t);return pr(u,l)},en=t=>Array.isArray(t)?[].concat(...t.map(e=>e&&e.type===Ge?en(e.props.children):en(e))):[t],Ms=({children:t,location:e})=>{const n=It(),r=n.matcher,[i]=At(n);for(const s of en(t)){let o=0;if(mn(s)&&(o=s.props.path?r(s.props.path,e||i):[!0,{}])[0])return pr(s,{match:o})}return null},Rs=t=>{const{to:e,href:n=e}=t,[,r]=Cn(),i=xn(()=>r(e||n,t));return vn(()=>{i()},[]),null};var M;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},t.getValidEnumValues=i=>{const s=t.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),o={};for(const a of s)o[a]=i[a];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},t.find=(i,s)=>{for(const o of i)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=r,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(M||(M={}));const m=M.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ie=t=>{switch(typeof t){case"undefined":return m.undefined;case"string":return m.string;case"number":return isNaN(t)?m.nan:m.number;case"boolean":return m.boolean;case"function":return m.function;case"bigint":return m.bigint;case"symbol":return m.symbol;case"object":return Array.isArray(t)?m.array:t===null?m.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?m.promise:typeof Map<"u"&&t instanceof Map?m.map:typeof Set<"u"&&t instanceof Set?m.set:typeof Date<"u"&&t instanceof Date?m.date:m.object;default:return m.unknown}},p=M.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Ps=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class ne extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(s){return s.message},r={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(n(o))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return i(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,M.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}ne.create=t=>new ne(t);const Oe=(t,e)=>{let n;switch(t.code){case p.invalid_type:t.received===m.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case p.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,M.jsonStringifyReplacer)}`;break;case p.unrecognized_keys:n=`Unrecognized key(s) in object: ${M.joinValues(t.keys,", ")}`;break;case p.invalid_union:n="Invalid input";break;case p.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${M.joinValues(t.options)}`;break;case p.invalid_enum_value:n=`Invalid enum value. Expected ${M.joinValues(t.options)}, received '${t.received}'`;break;case p.invalid_arguments:n="Invalid function arguments";break;case p.invalid_return_type:n="Invalid function return type";break;case p.invalid_date:n="Invalid date";break;case p.invalid_string:typeof t.validation=="object"?"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:M.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case p.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(t.minimum)}`:n="Invalid input";break;case p.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(t.maximum)}`:n="Invalid input";break;case p.custom:n="Invalid input";break;case p.invalid_intersection_types:n="Intersection results could not be merged";break;case p.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case p.not_finite:n="Number must be finite";break;default:n=e.defaultError,M.assertNever(t)}return{message:n}};let gr=Oe;function Bs(t){gr=t}function pt(){return gr}const _t=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,s=[...n,...i.path||[]],o={...i,path:s};let a="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)a=l(o,{data:e,defaultError:a}).message;return{...i,path:s,message:i.message||a}},Ls=[];function g(t,e){const n=_t({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,pt(),Oe].filter(r=>!!r)});t.common.issues.push(n)}class U{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return C;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n)r.push({key:await i.key,value:await i.value});return U.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return C;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),(typeof o.value<"u"||i.alwaysSet)&&(r[s.value]=o.value)}return{status:e.value,value:r}}}const C=Object.freeze({status:"aborted"}),vr=t=>({status:"dirty",value:t}),$=t=>({status:"valid",value:t}),tn=t=>t.status==="aborted",nn=t=>t.status==="dirty",mt=t=>t.status==="valid",yt=t=>typeof Promise!==void 0&&t instanceof Promise;var A;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(A||(A={}));class q{constructor(e,n,r,i){this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._path.concat(this._key)}}const Jn=(t,e)=>{if(mt(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,error:new ne(t.common.issues)}};function I(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:i}}class S{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return ie(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:ie(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new U,ctx:{common:e.parent.common,data:e.data,parsedType:ie(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(yt(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const i={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ie(e)},s=this._parseSync({data:e,path:i.path,parent:i});return Jn(i,s)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ie(e)},i=this._parse({data:e,path:r.path,parent:r}),s=await(yt(i)?i:Promise.resolve(i));return Jn(r,s)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,s)=>{const o=e(i),a=()=>s.addIssue({code:p.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new W({schema:this,typeName:x.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Y.create(this)}nullable(){return _e.create(this)}nullish(){return this.optional().nullable()}array(){return F.create(this)}promise(){return ke.create(this)}or(e){return Ve.create([this,e])}and(e){return ze.create(this,e)}transform(e){return new W({schema:this,typeName:x.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Je({innerType:this,defaultValue:n,typeName:x.ZodDefault})}brand(){return new br({typeName:x.ZodBranded,type:this,...I(void 0)})}catch(e){const n=typeof e=="function"?e:()=>e;return new xt({innerType:this,defaultValue:n,typeName:x.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return et.create(this,e)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Ds=/^c[^\s-]{8,}$/i,Os=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,Zs=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i,$s=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}:\\d{2})|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}:\\d{2})|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}:\\d{2})|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");class re extends S{constructor(){super(...arguments),this._regex=(e,n,r)=>this.refinement(i=>e.test(i),{validation:n,code:p.invalid_string,...A.errToObj(r)}),this.nonempty=e=>this.min(1,A.errToObj(e)),this.trim=()=>new re({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==m.string){const s=this._getOrReturnCtx(e);return g(s,{code:p.invalid_type,expected:m.string,received:s.parsedType}),C}const r=new U;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),g(i,{code:p.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),g(i,{code:p.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(i=this._getOrReturnCtx(e,i),o?g(i,{code:p.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&g(i,{code:p.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")Zs.test(e.data)||(i=this._getOrReturnCtx(e,i),g(i,{validation:"email",code:p.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")Os.test(e.data)||(i=this._getOrReturnCtx(e,i),g(i,{validation:"uuid",code:p.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")Ds.test(e.data)||(i=this._getOrReturnCtx(e,i),g(i,{validation:"cuid",code:p.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),g(i,{validation:"url",code:p.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),g(i,{validation:"regex",code:p.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),g(i,{code:p.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),g(i,{code:p.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?$s(s).test(e.data)||(i=this._getOrReturnCtx(e,i),g(i,{code:p.invalid_string,validation:"datetime",message:s.message}),r.dirty()):M.assertNever(s);return{status:r.value,value:e.data}}_addCheck(e){return new re({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...A.errToObj(e)})}url(e){return this._addCheck({kind:"url",...A.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...A.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...A.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...A.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...A.errToObj(n)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...A.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...A.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...A.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...A.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...A.errToObj(n)})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}re.create=t=>{var e;return new re({checks:[],typeName:x.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...I(t)})};function js(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,s=parseInt(t.toFixed(i).replace(".","")),o=parseInt(e.toFixed(i).replace(".",""));return s%o/Math.pow(10,i)}class ue extends S{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==m.number){const s=this._getOrReturnCtx(e);return g(s,{code:p.invalid_type,expected:m.number,received:s.parsedType}),C}let r;const i=new U;for(const s of this._def.checks)s.kind==="int"?M.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),g(r,{code:p.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),g(r,{code:p.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),g(r,{code:p.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?js(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),g(r,{code:p.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),g(r,{code:p.not_finite,message:s.message}),i.dirty()):M.assertNever(s);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,A.toString(n))}gt(e,n){return this.setLimit("min",e,!1,A.toString(n))}lte(e,n){return this.setLimit("max",e,!0,A.toString(n))}lt(e,n){return this.setLimit("max",e,!1,A.toString(n))}setLimit(e,n,r,i){return new ue({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:A.toString(i)}]})}_addCheck(e){return new ue({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:A.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:A.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:A.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:A.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:A.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:A.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:A.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int")}}ue.create=t=>new ue({checks:[],typeName:x.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...I(t)});class Ze extends S{_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==m.bigint){const r=this._getOrReturnCtx(e);return g(r,{code:p.invalid_type,expected:m.bigint,received:r.parsedType}),C}return $(e.data)}}Ze.create=t=>{var e;return new Ze({typeName:x.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...I(t)})};class $e extends S{_parse(e){if(this._def.coerce&&(e.data=Boolean(e.data)),this._getType(e)!==m.boolean){const r=this._getOrReturnCtx(e);return g(r,{code:p.invalid_type,expected:m.boolean,received:r.parsedType}),C}return $(e.data)}}$e.create=t=>new $e({typeName:x.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...I(t)});class he extends S{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==m.date){const s=this._getOrReturnCtx(e);return g(s,{code:p.invalid_type,expected:m.date,received:s.parsedType}),C}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return g(s,{code:p.invalid_date}),C}const r=new U;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),g(i,{code:p.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),g(i,{code:p.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):M.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new he({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:A.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:A.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}he.create=t=>new he({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:x.ZodDate,...I(t)});class gt extends S{_parse(e){if(this._getType(e)!==m.symbol){const r=this._getOrReturnCtx(e);return g(r,{code:p.invalid_type,expected:m.symbol,received:r.parsedType}),C}return $(e.data)}}gt.create=t=>new gt({typeName:x.ZodSymbol,...I(t)});class je extends S{_parse(e){if(this._getType(e)!==m.undefined){const r=this._getOrReturnCtx(e);return g(r,{code:p.invalid_type,expected:m.undefined,received:r.parsedType}),C}return $(e.data)}}je.create=t=>new je({typeName:x.ZodUndefined,...I(t)});class Ue extends S{_parse(e){if(this._getType(e)!==m.null){const r=this._getOrReturnCtx(e);return g(r,{code:p.invalid_type,expected:m.null,received:r.parsedType}),C}return $(e.data)}}Ue.create=t=>new Ue({typeName:x.ZodNull,...I(t)});class xe extends S{constructor(){super(...arguments),this._any=!0}_parse(e){return $(e.data)}}xe.create=t=>new xe({typeName:x.ZodAny,...I(t)});class fe extends S{constructor(){super(...arguments),this._unknown=!0}_parse(e){return $(e.data)}}fe.create=t=>new fe({typeName:x.ZodUnknown,...I(t)});class se extends S{_parse(e){const n=this._getOrReturnCtx(e);return g(n,{code:p.invalid_type,expected:m.never,received:n.parsedType}),C}}se.create=t=>new se({typeName:x.ZodNever,...I(t)});class vt extends S{_parse(e){if(this._getType(e)!==m.undefined){const r=this._getOrReturnCtx(e);return g(r,{code:p.invalid_type,expected:m.void,received:r.parsedType}),C}return $(e.data)}}vt.create=t=>new vt({typeName:x.ZodVoid,...I(t)});class F extends S{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==m.array)return g(n,{code:p.invalid_type,expected:m.array,received:n.parsedType}),C;if(i.exactLength!==null){const o=n.data.length>i.exactLength.value,a=n.data.length<i.exactLength.value;(o||a)&&(g(n,{code:o?p.too_big:p.too_small,minimum:a?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(g(n,{code:p.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(g(n,{code:p.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all(n.data.map((o,a)=>i.type._parseAsync(new q(n,o,n.path,a)))).then(o=>U.mergeArray(r,o));const s=n.data.map((o,a)=>i.type._parseSync(new q(n,o,n.path,a)));return U.mergeArray(r,s)}get element(){return this._def.type}min(e,n){return new F({...this._def,minLength:{value:e,message:A.toString(n)}})}max(e,n){return new F({...this._def,maxLength:{value:e,message:A.toString(n)}})}length(e,n){return new F({...this._def,exactLength:{value:e,message:A.toString(n)}})}nonempty(e){return this.min(1,e)}}F.create=(t,e)=>new F({type:t,minLength:null,maxLength:null,exactLength:null,typeName:x.ZodArray,...I(e)});var wt;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(wt||(wt={}));const Yn=t=>e=>new L({...t,shape:()=>({...t.shape(),...e})});function ge(t){if(t instanceof L){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Y.create(ge(r))}return new L({...t._def,shape:()=>e})}else return t instanceof F?F.create(ge(t.element)):t instanceof Y?Y.create(ge(t.unwrap())):t instanceof _e?_e.create(ge(t.unwrap())):t instanceof G?G.create(t.items.map(e=>ge(e))):t}class L extends S{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=Yn(this._def),this.extend=Yn(this._def)}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=M.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==m.object){const l=this._getOrReturnCtx(e);return g(l,{code:p.invalid_type,expected:m.object,received:l.parsedType}),C}const{status:r,ctx:i}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof se&&this._def.unknownKeys==="strip"))for(const l in i.data)o.includes(l)||a.push(l);const c=[];for(const l of o){const u=s[l],y=i.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new q(i,y,i.path,l)),alwaysSet:l in i.data})}if(this._def.catchall instanceof se){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of a)c.push({key:{status:"valid",value:u},value:{status:"valid",value:i.data[u]}});else if(l==="strict")a.length>0&&(g(i,{code:p.unrecognized_keys,keys:a}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of a){const y=i.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new q(i,y,i.path,u)),alwaysSet:u in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const y=await u.key;l.push({key:y,value:await u.value,alwaysSet:u.alwaysSet})}return l}).then(l=>U.mergeObjectSync(r,l)):U.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return A.errToObj,new L({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var i,s,o,a;const c=(o=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=A.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new L({...this._def,unknownKeys:"strip"})}passthrough(){return new L({...this._def,unknownKeys:"passthrough"})}setKey(e,n){return this.augment({[e]:n})}merge(e){return new L({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>wt.mergeShapes(this._def.shape(),e._def.shape()),typeName:x.ZodObject})}catchall(e){return new L({...this._def,catchall:e})}pick(e){const n={};return M.objectKeys(e).map(r=>{this.shape[r]&&(n[r]=this.shape[r])}),new L({...this._def,shape:()=>n})}omit(e){const n={};return M.objectKeys(this.shape).map(r=>{M.objectKeys(e).indexOf(r)===-1&&(n[r]=this.shape[r])}),new L({...this._def,shape:()=>n})}deepPartial(){return ge(this)}partial(e){const n={};if(e)return M.objectKeys(this.shape).map(r=>{M.objectKeys(e).indexOf(r)===-1?n[r]=this.shape[r]:n[r]=this.shape[r].optional()}),new L({...this._def,shape:()=>n});for(const r in this.shape){const i=this.shape[r];n[r]=i.optional()}return new L({...this._def,shape:()=>n})}required(e){const n={};if(e)M.objectKeys(this.shape).map(r=>{if(M.objectKeys(e).indexOf(r)===-1)n[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof Y;)s=s._def.innerType;n[r]=s}});else for(const r in this.shape){let s=this.shape[r];for(;s instanceof Y;)s=s._def.innerType;n[r]=s}return new L({...this._def,shape:()=>n})}keyof(){return wr(M.objectKeys(this.shape))}}L.create=(t,e)=>new L({shape:()=>t,unknownKeys:"strip",catchall:se.create(),typeName:x.ZodObject,...I(e)});L.strictCreate=(t,e)=>new L({shape:()=>t,unknownKeys:"strict",catchall:se.create(),typeName:x.ZodObject,...I(e)});L.lazycreate=(t,e)=>new L({shape:t,unknownKeys:"strip",catchall:se.create(),typeName:x.ZodObject,...I(e)});class Ve extends S{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new ne(a.ctx.common.issues));return g(n,{code:p.invalid_union,unionErrors:o}),C}if(n.common.async)return Promise.all(r.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(i);{let s;const o=[];for(const c of r){const l={...n,common:{...n.common,issues:[]},parent:null},u=c._parseSync({data:n.data,path:n.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!s&&(s={result:u,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(c=>new ne(c));return g(n,{code:p.invalid_union,unionErrors:a}),C}}get options(){return this._def.options}}Ve.create=(t,e)=>new Ve({options:t,typeName:x.ZodUnion,...I(e)});const ct=t=>t instanceof Ke?ct(t.schema):t instanceof W?ct(t.innerType()):t instanceof Fe?[t.value]:t instanceof Xe?t.options:t instanceof We?Object.keys(t.enum):t instanceof Je?ct(t._def.innerType):t instanceof je?[void 0]:t instanceof Ue?[null]:null;class Mt extends S{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==m.object)return g(n,{code:p.invalid_type,expected:m.object,received:n.parsedType}),C;const r=this.discriminator,i=n.data[r],s=this.optionsMap.get(i);return s?n.common.async?s._parseAsync({data:n.data,path:n.path,parent:n}):s._parseSync({data:n.data,path:n.path,parent:n}):(g(n,{code:p.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),C)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const i=new Map;for(const s of n){const o=ct(s.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(i.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);i.set(a,s)}}return new Mt({typeName:x.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:i,...I(r)})}}function rn(t,e){const n=ie(t),r=ie(e);if(t===e)return{valid:!0,data:t};if(n===m.object&&r===m.object){const i=M.objectKeys(e),s=M.objectKeys(t).filter(a=>i.indexOf(a)!==-1),o={...t,...e};for(const a of s){const c=rn(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===m.array&&r===m.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<t.length;s++){const o=t[s],a=e[s],c=rn(o,a);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return n===m.date&&r===m.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class ze extends S{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(s,o)=>{if(tn(s)||tn(o))return C;const a=rn(s.value,o.value);return a.valid?((nn(s)||nn(o))&&n.dirty(),{status:n.value,value:a.data}):(g(r,{code:p.invalid_intersection_types}),C)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}ze.create=(t,e,n)=>new ze({left:t,right:e,typeName:x.ZodIntersection,...I(n)});class G extends S{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==m.array)return g(r,{code:p.invalid_type,expected:m.array,received:r.parsedType}),C;if(r.data.length<this._def.items.length)return g(r,{code:p.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),C;!this._def.rest&&r.data.length>this._def.items.length&&(g(r,{code:p.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=r.data.map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new q(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(s).then(o=>U.mergeArray(n,o)):U.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new G({...this._def,rest:e})}}G.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new G({items:t,typeName:x.ZodTuple,rest:null,...I(e)})};class He extends S{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==m.object)return g(r,{code:p.invalid_type,expected:m.object,received:r.parsedType}),C;const i=[],s=this._def.keyType,o=this._def.valueType;for(const a in r.data)i.push({key:s._parse(new q(r,a,r.path,a)),value:o._parse(new q(r,r.data[a],r.path,a))});return r.common.async?U.mergeObjectAsync(n,i):U.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof S?new He({keyType:e,valueType:n,typeName:x.ZodRecord,...I(r)}):new He({keyType:re.create(),valueType:e,typeName:x.ZodRecord,...I(n)})}}class bt extends S{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==m.map)return g(r,{code:p.invalid_type,expected:m.map,received:r.parsedType}),C;const i=this._def.keyType,s=this._def.valueType,o=[...r.data.entries()].map(([a,c],l)=>({key:i._parse(new q(r,a,r.path,[l,"key"])),value:s._parse(new q(r,c,r.path,[l,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return C;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return C;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}}}}bt.create=(t,e,n)=>new bt({valueType:e,keyType:t,typeName:x.ZodMap,...I(n)});class pe extends S{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==m.set)return g(r,{code:p.invalid_type,expected:m.set,received:r.parsedType}),C;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(g(r,{code:p.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(g(r,{code:p.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const s=this._def.valueType;function o(c){const l=new Set;for(const u of c){if(u.status==="aborted")return C;u.status==="dirty"&&n.dirty(),l.add(u.value)}return{status:n.value,value:l}}const a=[...r.data.values()].map((c,l)=>s._parse(new q(r,c,r.path,l)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new pe({...this._def,minSize:{value:e,message:A.toString(n)}})}max(e,n){return new pe({...this._def,maxSize:{value:e,message:A.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}pe.create=(t,e)=>new pe({valueType:t,minSize:null,maxSize:null,typeName:x.ZodSet,...I(e)});class we extends S{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==m.function)return g(n,{code:p.invalid_type,expected:m.function,received:n.parsedType}),C;function r(a,c){return _t({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,pt(),Oe].filter(l=>!!l),issueData:{code:p.invalid_arguments,argumentsError:c}})}function i(a,c){return _t({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,pt(),Oe].filter(l=>!!l),issueData:{code:p.invalid_return_type,returnTypeError:c}})}const s={errorMap:n.common.contextualErrorMap},o=n.data;return this._def.returns instanceof ke?$(async(...a)=>{const c=new ne([]),l=await this._def.args.parseAsync(a,s).catch(f=>{throw c.addIssue(r(a,f)),c}),u=await o(...l);return await this._def.returns._def.type.parseAsync(u,s).catch(f=>{throw c.addIssue(i(u,f)),c})}):$((...a)=>{const c=this._def.args.safeParse(a,s);if(!c.success)throw new ne([r(a,c.error)]);const l=o(...c.data),u=this._def.returns.safeParse(l,s);if(!u.success)throw new ne([i(l,u.error)]);return u.data})}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new we({...this._def,args:G.create(e).rest(fe.create())})}returns(e){return new we({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new we({args:e||G.create([]).rest(fe.create()),returns:n||fe.create(),typeName:x.ZodFunction,...I(r)})}}class Ke extends S{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Ke.create=(t,e)=>new Ke({getter:t,typeName:x.ZodLazy,...I(e)});class Fe extends S{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return g(n,{code:p.invalid_literal,expected:this._def.value}),C}return{status:"valid",value:e.data}}get value(){return this._def.value}}Fe.create=(t,e)=>new Fe({value:t,typeName:x.ZodLiteral,...I(e)});function wr(t,e){return new Xe({values:t,typeName:x.ZodEnum,...I(e)})}class Xe extends S{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return g(n,{expected:M.joinValues(r),received:n.parsedType,code:p.invalid_type}),C}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return g(n,{received:n.data,code:p.invalid_enum_value,options:r}),C}return $(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}}Xe.create=wr;class We extends S{_parse(e){const n=M.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==m.string&&r.parsedType!==m.number){const i=M.objectValues(n);return g(r,{expected:M.joinValues(i),received:r.parsedType,code:p.invalid_type}),C}if(n.indexOf(e.data)===-1){const i=M.objectValues(n);return g(r,{received:r.data,code:p.invalid_enum_value,options:i}),C}return $(e.data)}get enum(){return this._def.values}}We.create=(t,e)=>new We({values:t,typeName:x.ZodNativeEnum,...I(e)});class ke extends S{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==m.promise&&n.common.async===!1)return g(n,{code:p.invalid_type,expected:m.promise,received:n.parsedType}),C;const r=n.parsedType===m.promise?n.data:Promise.resolve(n.data);return $(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}ke.create=(t,e)=>new ke({type:t,typeName:x.ZodPromise,...I(e)});class W extends S{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===x.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null;if(i.type==="preprocess"){const o=i.transform(r.data);return r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}const s={addIssue:o=>{g(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="refinement"){const o=a=>{const c=i.refinement(a,s);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?C:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?C:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!mt(o))return o;const a=i.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>mt(o)?Promise.resolve(i.transform(o.value,s)).then(a=>({status:n.value,value:a})):o);M.assertNever(i)}}W.create=(t,e,n)=>new W({schema:t,typeName:x.ZodEffects,effect:e,...I(n)});W.createWithPreprocess=(t,e,n)=>new W({schema:e,effect:{type:"preprocess",transform:t},typeName:x.ZodEffects,...I(n)});class Y extends S{_parse(e){return this._getType(e)===m.undefined?$(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Y.create=(t,e)=>new Y({innerType:t,typeName:x.ZodOptional,...I(e)});class _e extends S{_parse(e){return this._getType(e)===m.null?$(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}_e.create=(t,e)=>new _e({innerType:t,typeName:x.ZodNullable,...I(e)});class Je extends S{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===m.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Je.create=(t,e)=>new Je({innerType:t,typeName:x.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...I(e)});class xt extends S{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.innerType._parse({data:n.data,path:n.path,parent:n});return yt(r)?r.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.defaultValue()})):{status:"valid",value:r.status==="valid"?r.value:this._def.defaultValue()}}removeDefault(){return this._def.innerType}}xt.create=(t,e)=>new xt({innerType:t,typeName:x.ZodCatch,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...I(e)});class kt extends S{_parse(e){if(this._getType(e)!==m.nan){const r=this._getOrReturnCtx(e);return g(r,{code:p.invalid_type,expected:m.nan,received:r.parsedType}),C}return{status:"valid",value:e.data}}}kt.create=t=>new kt({typeName:x.ZodNaN,...I(t)});const Us=Symbol("zod_brand");class br extends S{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class et extends S{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?C:s.status==="dirty"?(n.dirty(),vr(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?C:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new et({in:e,out:n,typeName:x.ZodPipeline})}}const xr=(t,e={},n)=>t?xe.create().superRefine((r,i)=>{if(!t(r)){const s=typeof e=="function"?e(r):e,o=typeof s=="string"?{message:s}:s;i.addIssue({code:"custom",...o,fatal:n})}}):xe.create(),Vs={object:L.lazycreate};var x;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline"})(x||(x={}));const zs=(t,e={message:`Input not instance of ${t.name}`})=>xr(n=>n instanceof t,e,!0),kr=re.create,Tr=ue.create,Hs=kt.create,Ks=Ze.create,Cr=$e.create,Fs=he.create,Ws=gt.create,Js=je.create,Ys=Ue.create,qs=xe.create,Gs=fe.create,Qs=se.create,Xs=vt.create,ei=F.create,ti=L.create,ni=L.strictCreate,ri=Ve.create,si=Mt.create,ii=ze.create,oi=G.create,ai=He.create,ci=bt.create,ui=pe.create,li=we.create,di=Ke.create,fi=Fe.create,hi=Xe.create,pi=We.create,_i=ke.create,qn=W.create,mi=Y.create,yi=_e.create,gi=W.createWithPreprocess,vi=et.create,wi=()=>kr().optional(),bi=()=>Tr().optional(),xi=()=>Cr().optional(),ki={string:t=>re.create({...t,coerce:!0}),number:t=>ue.create({...t,coerce:!0}),boolean:t=>$e.create({...t,coerce:!0}),bigint:t=>Ze.create({...t,coerce:!0}),date:t=>he.create({...t,coerce:!0})},Ti=C;var ve=Object.freeze({__proto__:null,defaultErrorMap:Oe,setErrorMap:Bs,getErrorMap:pt,makeIssue:_t,EMPTY_PATH:Ls,addIssueToContext:g,ParseStatus:U,INVALID:C,DIRTY:vr,OK:$,isAborted:tn,isDirty:nn,isValid:mt,isAsync:yt,get util(){return M},ZodParsedType:m,getParsedType:ie,ZodType:S,ZodString:re,ZodNumber:ue,ZodBigInt:Ze,ZodBoolean:$e,ZodDate:he,ZodSymbol:gt,ZodUndefined:je,ZodNull:Ue,ZodAny:xe,ZodUnknown:fe,ZodNever:se,ZodVoid:vt,ZodArray:F,get objectUtil(){return wt},ZodObject:L,ZodUnion:Ve,ZodDiscriminatedUnion:Mt,ZodIntersection:ze,ZodTuple:G,ZodRecord:He,ZodMap:bt,ZodSet:pe,ZodFunction:we,ZodLazy:Ke,ZodLiteral:Fe,ZodEnum:Xe,ZodNativeEnum:We,ZodPromise:ke,ZodEffects:W,ZodTransformer:W,ZodOptional:Y,ZodNullable:_e,ZodDefault:Je,ZodCatch:xt,ZodNaN:kt,BRAND:Us,ZodBranded:br,ZodPipeline:et,custom:xr,Schema:S,ZodSchema:S,late:Vs,get ZodFirstPartyTypeKind(){return x},coerce:ki,any:qs,array:ei,bigint:Ks,boolean:Cr,date:Fs,discriminatedUnion:si,effect:qn,enum:hi,function:li,instanceof:zs,intersection:ii,lazy:di,literal:fi,map:ci,nan:Hs,nativeEnum:pi,never:Qs,null:Ys,nullable:yi,number:Tr,object:ti,oboolean:xi,onumber:bi,optional:mi,ostring:wi,pipeline:vi,preprocess:gi,promise:_i,record:ai,set:ui,strictObject:ni,string:kr,symbol:Ws,transformer:qn,tuple:oi,undefined:Js,union:ri,unknown:Gs,void:Xs,NEVER:Ti,ZodIssueCode:p,quotelessJson:Ps,ZodError:ne});const sn={name:"RSA-OAEP",hash:{name:"SHA-256"}},Tt="identity",Er=async t=>{const e=await crypto.subtle.exportKey("spki",t);return window.btoa(String.fromCharCode(...new Uint8Array(e)))},Ci=async t=>{const e=window.atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return await crypto.subtle.importKey("spki",n,sn,!0,["encrypt"])},Ei=t=>new Promise(e=>{if(t.length===0)return e(void 0);const n=new FileReader;n.onloadend=async()=>{const r=await Nr(n.result);return e(r||void 0)},n.readAsText(t[0])}),Ni=async({publicKey:t,privateKey:e,displayName:n})=>JSON.stringify({publicKey:await crypto.subtle.exportKey("jwk",t),privateKey:await crypto.subtle.exportKey("jwk",e),displayName:n}),Nr=async t=>{const e=ve.object({publicKey:ve.any(),privateKey:ve.any(),displayName:ve.string()}).safeParse(JSON.parse(t));if(!e.success)return;const n=await crypto.subtle.importKey("jwk",e.data.publicKey,sn,!0,["encrypt"]),r=await crypto.subtle.importKey("jwk",e.data.privateKey,sn,!0,["decrypt"]);return{publicKey:n,privateKey:r,displayName:e.data.displayName,serializedPublicKey:await Er(n)}},Si=async()=>await crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:4096,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["encrypt","decrypt"]),Ii=()=>Nr(localStorage.getItem(Tt)||'""');function Rt(){throw new Error("Cycle detected")}function En(){if(be>1)be--;else{for(var t,e=!1;Be!==void 0;){var n=Be;for(Be=void 0,on++;n!==void 0;){var r=n.o;if(n.o=void 0,n.f&=-3,!(8&n.f)&&Ir(n))try{n.c()}catch(i){e||(t=i,e=!0)}n=r}}if(on=0,be--,e)throw t}}var Z=void 0,Be=void 0,be=0,on=0,Ct=0;function Sr(t){if(Z!==void 0){var e=t.n;if(e===void 0||e.t!==Z)return e={i:0,S:t,p:Z.s,n:void 0,t:Z,e:void 0,x:void 0,r:e},Z.s!==void 0&&(Z.s.n=e),Z.s=e,t.n=e,32&Z.f&&t.S(e),e;if(e.i===-1)return e.i=0,e.n!==void 0&&(e.n.p=e.p,e.p!==void 0&&(e.p.n=e.n),e.p=Z.s,e.n=void 0,Z.s.n=e,Z.s=e),e}}function V(t){this.v=t,this.i=0,this.n=void 0,this.t=void 0}V.prototype.h=function(){return!0};V.prototype.S=function(t){this.t!==t&&t.e===void 0&&(t.x=this.t,this.t!==void 0&&(this.t.e=t),this.t=t)};V.prototype.U=function(t){if(this.t!==void 0){var e=t.e,n=t.x;e!==void 0&&(e.x=n,t.e=void 0),n!==void 0&&(n.e=e,t.x=void 0),t===this.t&&(this.t=n)}};V.prototype.subscribe=function(t){var e=this;return Pt(function(){var n=e.value,r=32&this.f;this.f&=-33;try{t(n)}finally{this.f|=r}})};V.prototype.valueOf=function(){return this.value};V.prototype.toString=function(){return this.value+""};V.prototype.peek=function(){return this.v};Object.defineProperty(V.prototype,"value",{get:function(){var t=Sr(this);return t!==void 0&&(t.i=this.i),this.v},set:function(t){if(t!==this.v){on>100&&Rt(),this.v=t,this.i++,Ct++,be++;try{for(var e=this.t;e!==void 0;e=e.x)e.t.N()}finally{En()}}}});function le(t){return new V(t)}function Ir(t){for(var e=t.s;e!==void 0;e=e.n)if(e.S.i!==e.i||!e.S.h()||e.S.i!==e.i)return!0;return!1}function Ar(t){for(var e=t.s;e!==void 0;e=e.n){var n=e.S.n;if(n!==void 0&&(e.r=n),e.S.n=e,e.i=-1,e.n===void 0){t.s=e;break}}}function Mr(t){for(var e=t.s,n=void 0;e!==void 0;){var r=e.p;e.i===-1?(e.S.U(e),r!==void 0&&(r.n=e.n),e.n!==void 0&&(e.n.p=r)):n=e,e.S.n=e.r,e.r!==void 0&&(e.r=void 0),e=r}t.s=n}function ye(t){V.call(this,void 0),this.x=t,this.s=void 0,this.g=Ct-1,this.f=4}(ye.prototype=new V).h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===Ct))return!0;if(this.g=Ct,this.f|=1,this.i>0&&!Ir(this))return this.f&=-2,!0;var t=Z;try{Ar(this),Z=this;var e=this.x();(16&this.f||this.v!==e||this.i===0)&&(this.v=e,this.f&=-17,this.i++)}catch(n){this.v=n,this.f|=16,this.i++}return Z=t,Mr(this),this.f&=-2,!0};ye.prototype.S=function(t){if(this.t===void 0){this.f|=36;for(var e=this.s;e!==void 0;e=e.n)e.S.S(e)}V.prototype.S.call(this,t)};ye.prototype.U=function(t){if(this.t!==void 0&&(V.prototype.U.call(this,t),this.t===void 0)){this.f&=-33;for(var e=this.s;e!==void 0;e=e.n)e.S.U(e)}};ye.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var t=this.t;t!==void 0;t=t.x)t.t.N()}};ye.prototype.peek=function(){if(this.h()||Rt(),16&this.f)throw this.v;return this.v};Object.defineProperty(ye.prototype,"value",{get:function(){1&this.f&&Rt();var t=Sr(this);if(this.h(),t!==void 0&&(t.i=this.i),16&this.f)throw this.v;return this.v}});function Ai(t){return new ye(t)}function Rr(t){var e=t.u;if(t.u=void 0,typeof e=="function"){be++;var n=Z;Z=void 0;try{e()}catch(r){throw t.f&=-2,t.f|=8,Nn(t),r}finally{Z=n,En()}}}function Nn(t){for(var e=t.s;e!==void 0;e=e.n)e.S.U(e);t.x=void 0,t.s=void 0,Rr(t)}function Mi(t){if(Z!==this)throw new Error("Out-of-order effect");Mr(this),Z=t,this.f&=-2,8&this.f&&Nn(this),En()}function tt(t){this.x=t,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32}tt.prototype.c=function(){var t=this.S();try{!(8&this.f)&&this.x!==void 0&&(this.u=this.x())}finally{t()}};tt.prototype.S=function(){1&this.f&&Rt(),this.f|=1,this.f&=-9,Rr(this),Ar(this),be++;var t=Z;return Z=this,Mi.bind(this,t)};tt.prototype.N=function(){2&this.f||(this.f|=2,this.o=Be,Be=this)};tt.prototype.d=function(){this.f|=8,1&this.f||Nn(this)};function Pt(t){var e=new tt(t);try{e.c()}catch(n){throw e.d(),n}return e.d.bind(e)}var Vt;function Ie(t,e){T[t]=e.bind(null,T[t]||function(){})}function Et(t){Vt&&Vt(),Vt=t&&t.S()}function Pr(t){var e=this,n=t.data,r=me(n);r.value=n;var i=wn(function(){for(var s=e.__v;s=s.__;)if(s.__c){s.__c.__$f|=4;break}return e.__$u.c=function(){e.base.data=i.peek()},Ai(function(){var o=r.value.value;return o===0?0:o===!0?"":o||""})},[]);return i.value}Pr.displayName="_st";Object.defineProperties(V.prototype,{constructor:{configurable:!0,value:void 0},type:{configurable:!0,value:Pr},props:{configurable:!0,get:function(){return{data:this}}},__b:{configurable:!0,value:1}});Ie("__b",function(t,e){if(typeof e.type=="string"){var n,r=e.props;for(var i in r)if(i!=="children"){var s=r[i];s instanceof V&&(n||(e.__np=n={}),n[i]=s,r[i]=s.peek())}}t(e)});Ie("__r",function(t,e){Et();var n,r=e.__c;r&&(r.__$f&=-2,(n=r.__$u)===void 0&&(r.__$u=n=function(i){var s;return Pt(function(){s=this}),s.c=function(){r.__$f|=1,r.setState({})},s}())),Et(n),t(e)});Ie("__e",function(t,e,n,r){Et(),t(e,n,r)});Ie("diffed",function(t,e){Et();var n;if(typeof e.type=="string"&&(n=e.__e)){var r=e.__np,i=e.props;if(r){var s=n.U;if(s)for(var o in s){var a=s[o];a!==void 0&&!(o in r)&&(a.d(),s[o]=void 0)}else n.U=s={};for(var c in r){var l=s[c],u=r[c];l===void 0?(l=Ri(n,c,u,i),s[c]=l):l.o(u,i)}}}t(e)});function Ri(t,e,n,r){var i=e in t&&t.ownerSVGElement===void 0,s=le(n);return{o:function(o,a){s.value=o,r=a},d:Pt(function(){var o=s.value.value;r[e]!==o&&(r[e]=o,i?t[e]=o:o?t.setAttribute(e,o):t.removeAttribute(e))})}}Ie("unmount",function(t,e){if(typeof e.type=="string"){var n=e.__e;if(n){var r=n.U;if(r){n.U=void 0;for(var i in r){var s=r[i];s&&s.d()}}}}else{var o=e.__c;if(o){var a=o.__$u;a&&(o.__$u=void 0,a.d())}}t(e)});Ie("__h",function(t,e,n,r){r<3&&(e.__$f|=2),t(e,n,r)});Pe.prototype.shouldComponentUpdate=function(t,e){var n=this.__$u;if(!(n&&n.s!==void 0||4&this.__$f)||3&this.__$f)return!0;for(var r in e)return!0;for(var i in t)if(i!=="__source"&&t[i]!==this.props[i])return!0;for(var s in this.props)if(!(s in t))return!0;return!1};function me(t){return wn(function(){return le(t)},[])}var Pi=0;function h(t,e,n,r,i){var s,o,a={};for(o in e)o=="ref"?s=e[o]:a[o]=e[o];var c={type:t,props:a,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--Pi,__source:i,__self:r};if(typeof t=="function"&&(s=t.defaultProps))for(o in s)a[o]===void 0&&(a[o]=s[o]);return T.vnode&&T.vnode(c),c}const Sn=({alt:t,src:e,size:n=64})=>t?h("img",{width:n,height:n,alt:t,src:e||`https://ui-avatars.com/api/?name=${t}&rounded=true&format=svg&background=random`}):null,nt=t=>h("div",{className:"w-full h-full bg-black flex justify-center text-white font-mono overflow-hidden",children:h("div",{className:"max-w-md flex flex-col justify-center items-center flex-1",children:t.children})}),j=le(void 0),K=le(!0),Br=le(!1),an=le([]);Pt(async()=>{if(!j.value)return;const t=await Ni(j.value);localStorage.setItem(Tt,t)});const Bi=({serializedPublicKey:t,displayName:e})=>{var o,a,c;const n=me(void 0),[r,i]=Cn(),s=me("");return ae(()=>{(async()=>{if(t===""||e===""){i("/");return}const u=await Ci(t);n.value={publicKey:u,serializedPublicKey:t,displayName:e}})()},[]),h(nt,{children:[h("div",{className:"flex items-center justify-between p-3 border-b border-gray-500 w-full",children:[h("div",{className:"flex items-center",children:[h(Sn,{alt:(o=n.value)==null?void 0:o.displayName,src:(a=n.value)==null?void 0:a.avatar}),h("h1",{className:"pl-4 font-bold",children:(c=n.value)==null?void 0:c.displayName})]}),h(yr,{href:"/",children:h("i",{className:"fa-solid fa-bars text-3xl p-3 cursor-pointer"})})]}),h("div",{className:"flex-1 flex flex-col",children:an.value.map(l=>h("span",{className:"bg-blue-500 rounded-2xl p-2 m-2",children:l}))}),h("div",{className:"border-gray-500 flex items-center border-t py-4 px-2 w-full",children:[h("textarea",{className:"bg-black border border-white focus:outline-none w-full px-3 py-2 rounded-[2rem] resize-none overflow-hidden",placeholder:"Type your message...",autofocus:!0,rows:2,onChange:({target:l})=>{l instanceof HTMLTextAreaElement&&(s.value=l.value)}}),h("button",{type:"button",onClick:async()=>{const l=encodeURIComponent(t),u=await fetch(`https://noti-relay.deno.dev?id=${l}`,{method:"POST",body:JSON.stringify({message:s.value})});console.log(u.status)},children:h("i",{className:"fa-solid fa-paper-plane py-2 text-2xl pr-3 pl-6 cursor-pointer"})})]})]})};var Li=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},Lr={},H={};let In;const Di=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];H.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};H.getSymbolTotalCodewords=function(e){return Di[e]};H.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e};H.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');In=e};H.isKanjiModeEnabled=function(){return typeof In<"u"};H.toSJIS=function(e){return In(e)};var Bt={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+n)}}t.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},t.from=function(r,i){if(t.isValid(r))return r;try{return e(r)}catch{return i}}})(Bt);function Dr(){this.buffer=[],this.length=0}Dr.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let n=0;n<e;n++)this.putBit((t>>>e-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var Oi=Dr;function rt(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}rt.prototype.set=function(t,e,n,r){const i=t*this.size+e;this.data[i]=n,r&&(this.reservedBit[i]=!0)};rt.prototype.get=function(t,e){return this.data[t*this.size+e]};rt.prototype.xor=function(t,e,n){this.data[t*this.size+e]^=n};rt.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var Zi=rt,Or={};(function(t){const e=H.getSymbolSize;t.getRowColCoords=function(r){if(r===1)return[];const i=Math.floor(r/7)+2,s=e(r),o=s===145?26:Math.ceil((s-13)/(2*i-2))*2,a=[s-7];for(let c=1;c<i-1;c++)a[c]=a[c-1]-o;return a.push(6),a.reverse()},t.getPositions=function(r){const i=[],s=t.getRowColCoords(r),o=s.length;for(let a=0;a<o;a++)for(let c=0;c<o;c++)a===0&&c===0||a===0&&c===o-1||a===o-1&&c===0||i.push([s[a],s[c]]);return i}})(Or);var Zr={};const $i=H.getSymbolSize,Gn=7;Zr.getPositions=function(e){const n=$i(e);return[[0,0],[n-Gn,0],[0,n-Gn]]};var $r={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},t.from=function(i){return t.isValid(i)?parseInt(i,10):void 0},t.getPenaltyN1=function(i){const s=i.size;let o=0,a=0,c=0,l=null,u=null;for(let y=0;y<s;y++){a=c=0,l=u=null;for(let f=0;f<s;f++){let d=i.get(y,f);d===l?a++:(a>=5&&(o+=e.N1+(a-5)),l=d,a=1),d=i.get(f,y),d===u?c++:(c>=5&&(o+=e.N1+(c-5)),u=d,c=1)}a>=5&&(o+=e.N1+(a-5)),c>=5&&(o+=e.N1+(c-5))}return o},t.getPenaltyN2=function(i){const s=i.size;let o=0;for(let a=0;a<s-1;a++)for(let c=0;c<s-1;c++){const l=i.get(a,c)+i.get(a,c+1)+i.get(a+1,c)+i.get(a+1,c+1);(l===4||l===0)&&o++}return o*e.N2},t.getPenaltyN3=function(i){const s=i.size;let o=0,a=0,c=0;for(let l=0;l<s;l++){a=c=0;for(let u=0;u<s;u++)a=a<<1&2047|i.get(l,u),u>=10&&(a===1488||a===93)&&o++,c=c<<1&2047|i.get(u,l),u>=10&&(c===1488||c===93)&&o++}return o*e.N3},t.getPenaltyN4=function(i){let s=0;const o=i.data.length;for(let c=0;c<o;c++)s+=i.data[c];return Math.abs(Math.ceil(s*100/o/5)-10)*e.N4};function n(r,i,s){switch(r){case t.Patterns.PATTERN000:return(i+s)%2===0;case t.Patterns.PATTERN001:return i%2===0;case t.Patterns.PATTERN010:return s%3===0;case t.Patterns.PATTERN011:return(i+s)%3===0;case t.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(s/3))%2===0;case t.Patterns.PATTERN101:return i*s%2+i*s%3===0;case t.Patterns.PATTERN110:return(i*s%2+i*s%3)%2===0;case t.Patterns.PATTERN111:return(i*s%3+(i+s)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}t.applyMask=function(i,s){const o=s.size;for(let a=0;a<o;a++)for(let c=0;c<o;c++)s.isReserved(c,a)||s.xor(c,a,n(i,c,a))},t.getBestMask=function(i,s){const o=Object.keys(t.Patterns).length;let a=0,c=1/0;for(let l=0;l<o;l++){s(l),t.applyMask(l,i);const u=t.getPenaltyN1(i)+t.getPenaltyN2(i)+t.getPenaltyN3(i)+t.getPenaltyN4(i);t.applyMask(l,i),u<c&&(c=u,a=l)}return a}})($r);var Lt={};const oe=Bt,st=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],it=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Lt.getBlocksCount=function(e,n){switch(n){case oe.L:return st[(e-1)*4+0];case oe.M:return st[(e-1)*4+1];case oe.Q:return st[(e-1)*4+2];case oe.H:return st[(e-1)*4+3];default:return}};Lt.getTotalCodewordsCount=function(e,n){switch(n){case oe.L:return it[(e-1)*4+0];case oe.M:return it[(e-1)*4+1];case oe.Q:return it[(e-1)*4+2];case oe.H:return it[(e-1)*4+3];default:return}};var jr={},Dt={};const Le=new Uint8Array(512),Nt=new Uint8Array(256);(function(){let e=1;for(let n=0;n<255;n++)Le[n]=e,Nt[e]=n,e<<=1,e&256&&(e^=285);for(let n=255;n<512;n++)Le[n]=Le[n-255]})();Dt.log=function(e){if(e<1)throw new Error("log("+e+")");return Nt[e]};Dt.exp=function(e){return Le[e]};Dt.mul=function(e,n){return e===0||n===0?0:Le[Nt[e]+Nt[n]]};(function(t){const e=Dt;t.mul=function(r,i){const s=new Uint8Array(r.length+i.length-1);for(let o=0;o<r.length;o++)for(let a=0;a<i.length;a++)s[o+a]^=e.mul(r[o],i[a]);return s},t.mod=function(r,i){let s=new Uint8Array(r);for(;s.length-i.length>=0;){const o=s[0];for(let c=0;c<i.length;c++)s[c]^=e.mul(i[c],o);let a=0;for(;a<s.length&&s[a]===0;)a++;s=s.slice(a)}return s},t.generateECPolynomial=function(r){let i=new Uint8Array([1]);for(let s=0;s<r;s++)i=t.mul(i,new Uint8Array([1,e.exp(s)]));return i}})(jr);const Ur=jr;function An(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}An.prototype.initialize=function(e){this.degree=e,this.genPoly=Ur.generateECPolynomial(this.degree)};An.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const n=new Uint8Array(e.length+this.degree);n.set(e);const r=Ur.mod(n,this.genPoly),i=this.degree-r.length;if(i>0){const s=new Uint8Array(this.degree);return s.set(r,i),s}return r};var ji=An,Vr={},de={},Mn={};Mn.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var Q={};const zr="[0-9]+",Ui="[A-Z $%*+\\-./:]+";let Ye="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Ye=Ye.replace(/u/g,"\\u");const Vi="(?:(?![A-Z0-9 $%*+\\-./:]|"+Ye+`)(?:.|[\r
]))+`;Q.KANJI=new RegExp(Ye,"g");Q.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Q.BYTE=new RegExp(Vi,"g");Q.NUMERIC=new RegExp(zr,"g");Q.ALPHANUMERIC=new RegExp(Ui,"g");const zi=new RegExp("^"+Ye+"$"),Hi=new RegExp("^"+zr+"$"),Ki=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Q.testKanji=function(e){return zi.test(e)};Q.testNumeric=function(e){return Hi.test(e)};Q.testAlphanumeric=function(e){return Ki.test(e)};(function(t){const e=Mn,n=Q;t.NUMERIC={id:"Numeric",bit:1<<0,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:1<<1,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:1<<2,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:1<<3,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(s,o){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?s.ccBits[0]:o<27?s.ccBits[1]:s.ccBits[2]},t.getBestModeForData=function(s){return n.testNumeric(s)?t.NUMERIC:n.testAlphanumeric(s)?t.ALPHANUMERIC:n.testKanji(s)?t.KANJI:t.BYTE},t.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},t.isValid=function(s){return s&&s.bit&&s.ccBits};function r(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+i)}}t.from=function(s,o){if(t.isValid(s))return s;try{return r(s)}catch{return o}}})(de);(function(t){const e=H,n=Lt,r=Bt,i=de,s=Mn,o=1<<12|1<<11|1<<10|1<<9|1<<8|1<<5|1<<2|1<<0,a=e.getBCHDigit(o);function c(f,d,_){for(let E=1;E<=40;E++)if(d<=t.getCapacity(E,_,f))return E}function l(f,d){return i.getCharCountIndicator(f,d)+4}function u(f,d){let _=0;return f.forEach(function(E){const N=l(E.mode,d);_+=N+E.getBitsLength()}),_}function y(f,d){for(let _=1;_<=40;_++)if(u(f,_)<=t.getCapacity(_,d,i.MIXED))return _}t.from=function(d,_){return s.isValid(d)?parseInt(d,10):_},t.getCapacity=function(d,_,E){if(!s.isValid(d))throw new Error("Invalid QR Code version");typeof E>"u"&&(E=i.BYTE);const N=e.getSymbolTotalCodewords(d),v=n.getTotalCodewordsCount(d,_),k=(N-v)*8;if(E===i.MIXED)return k;const b=k-l(E,d);switch(E){case i.NUMERIC:return Math.floor(b/10*3);case i.ALPHANUMERIC:return Math.floor(b/11*2);case i.KANJI:return Math.floor(b/13);case i.BYTE:default:return Math.floor(b/8)}},t.getBestVersionForData=function(d,_){let E;const N=r.from(_,r.M);if(Array.isArray(d)){if(d.length>1)return y(d,N);if(d.length===0)return 1;E=d[0]}else E=d;return c(E.mode,E.getLength(),N)},t.getEncodedBits=function(d){if(!s.isValid(d)||d<7)throw new Error("Invalid QR Code version");let _=d<<12;for(;e.getBCHDigit(_)-a>=0;)_^=o<<e.getBCHDigit(_)-a;return d<<12|_}})(Vr);var Hr={};const cn=H,Kr=1<<10|1<<8|1<<5|1<<4|1<<2|1<<1|1<<0,Fi=1<<14|1<<12|1<<10|1<<4|1<<1,Qn=cn.getBCHDigit(Kr);Hr.getEncodedBits=function(e,n){const r=e.bit<<3|n;let i=r<<10;for(;cn.getBCHDigit(i)-Qn>=0;)i^=Kr<<cn.getBCHDigit(i)-Qn;return(r<<10|i)^Fi};var Fr={};const Wi=de;function Te(t){this.mode=Wi.NUMERIC,this.data=t.toString()}Te.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};Te.prototype.getLength=function(){return this.data.length};Te.prototype.getBitsLength=function(){return Te.getBitsLength(this.data.length)};Te.prototype.write=function(e){let n,r,i;for(n=0;n+3<=this.data.length;n+=3)r=this.data.substr(n,3),i=parseInt(r,10),e.put(i,10);const s=this.data.length-n;s>0&&(r=this.data.substr(n),i=parseInt(r,10),e.put(i,s*3+1))};var Ji=Te;const Yi=de,zt=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Ce(t){this.mode=Yi.ALPHANUMERIC,this.data=t}Ce.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};Ce.prototype.getLength=function(){return this.data.length};Ce.prototype.getBitsLength=function(){return Ce.getBitsLength(this.data.length)};Ce.prototype.write=function(e){let n;for(n=0;n+2<=this.data.length;n+=2){let r=zt.indexOf(this.data[n])*45;r+=zt.indexOf(this.data[n+1]),e.put(r,11)}this.data.length%2&&e.put(zt.indexOf(this.data[n]),6)};var qi=Ce,Gi=function(e){for(var n=[],r=e.length,i=0;i<r;i++){var s=e.charCodeAt(i);if(s>=55296&&s<=56319&&r>i+1){var o=e.charCodeAt(i+1);o>=56320&&o<=57343&&(s=(s-55296)*1024+o-56320+65536,i+=1)}if(s<128){n.push(s);continue}if(s<2048){n.push(s>>6|192),n.push(s&63|128);continue}if(s<55296||s>=57344&&s<65536){n.push(s>>12|224),n.push(s>>6&63|128),n.push(s&63|128);continue}if(s>=65536&&s<=1114111){n.push(s>>18|240),n.push(s>>12&63|128),n.push(s>>6&63|128),n.push(s&63|128);continue}n.push(239,191,189)}return new Uint8Array(n).buffer};const Qi=Gi,Xi=de;function Ee(t){this.mode=Xi.BYTE,typeof t=="string"&&(t=Qi(t)),this.data=new Uint8Array(t)}Ee.getBitsLength=function(e){return e*8};Ee.prototype.getLength=function(){return this.data.length};Ee.prototype.getBitsLength=function(){return Ee.getBitsLength(this.data.length)};Ee.prototype.write=function(t){for(let e=0,n=this.data.length;e<n;e++)t.put(this.data[e],8)};var eo=Ee;const to=de,no=H;function Ne(t){this.mode=to.KANJI,this.data=t}Ne.getBitsLength=function(e){return e*13};Ne.prototype.getLength=function(){return this.data.length};Ne.prototype.getBitsLength=function(){return Ne.getBitsLength(this.data.length)};Ne.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let n=no.toSJIS(this.data[e]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),t.put(n,13)}};var ro=Ne,un={},so={get exports(){return un},set exports(t){un=t}};(function(t){var e={single_source_shortest_paths:function(n,r,i){var s={},o={};o[r]=0;var a=e.PriorityQueue.make();a.push(r,0);for(var c,l,u,y,f,d,_,E,N;!a.empty();){c=a.pop(),l=c.value,y=c.cost,f=n[l]||{};for(u in f)f.hasOwnProperty(u)&&(d=f[u],_=y+d,E=o[u],N=typeof o[u]>"u",(N||E>_)&&(o[u]=_,a.push(u,_),s[u]=l))}if(typeof i<"u"&&typeof o[i]>"u"){var v=["Could not find a path from ",r," to ",i,"."].join("");throw new Error(v)}return s},extract_shortest_path_from_predecessor_list:function(n,r){for(var i=[],s=r;s;)i.push(s),n[s],s=n[s];return i.reverse(),i},find_path:function(n,r,i){var s=e.single_source_shortest_paths(n,r,i);return e.extract_shortest_path_from_predecessor_list(s,i)},PriorityQueue:{make:function(n){var r=e.PriorityQueue,i={},s;n=n||{};for(s in r)r.hasOwnProperty(s)&&(i[s]=r[s]);return i.queue=[],i.sorter=n.sorter||r.default_sorter,i},default_sorter:function(n,r){return n.cost-r.cost},push:function(n,r){var i={value:n,cost:r};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(so);(function(t){const e=de,n=Ji,r=qi,i=eo,s=ro,o=Q,a=H,c=un;function l(v){return unescape(encodeURIComponent(v)).length}function u(v,k,b){const w=[];let R;for(;(R=v.exec(b))!==null;)w.push({data:R[0],index:R.index,mode:k,length:R[0].length});return w}function y(v){const k=u(o.NUMERIC,e.NUMERIC,v),b=u(o.ALPHANUMERIC,e.ALPHANUMERIC,v);let w,R;return a.isKanjiModeEnabled()?(w=u(o.BYTE,e.BYTE,v),R=u(o.KANJI,e.KANJI,v)):(w=u(o.BYTE_KANJI,e.BYTE,v),R=[]),k.concat(b,w,R).sort(function(D,B){return D.index-B.index}).map(function(D){return{data:D.data,mode:D.mode,length:D.length}})}function f(v,k){switch(k){case e.NUMERIC:return n.getBitsLength(v);case e.ALPHANUMERIC:return r.getBitsLength(v);case e.KANJI:return s.getBitsLength(v);case e.BYTE:return i.getBitsLength(v)}}function d(v){return v.reduce(function(k,b){const w=k.length-1>=0?k[k.length-1]:null;return w&&w.mode===b.mode?(k[k.length-1].data+=b.data,k):(k.push(b),k)},[])}function _(v){const k=[];for(let b=0;b<v.length;b++){const w=v[b];switch(w.mode){case e.NUMERIC:k.push([w,{data:w.data,mode:e.ALPHANUMERIC,length:w.length},{data:w.data,mode:e.BYTE,length:w.length}]);break;case e.ALPHANUMERIC:k.push([w,{data:w.data,mode:e.BYTE,length:w.length}]);break;case e.KANJI:k.push([w,{data:w.data,mode:e.BYTE,length:l(w.data)}]);break;case e.BYTE:k.push([{data:w.data,mode:e.BYTE,length:l(w.data)}])}}return k}function E(v,k){const b={},w={start:{}};let R=["start"];for(let P=0;P<v.length;P++){const D=v[P],B=[];for(let z=0;z<D.length;z++){const J=D[z],Ae=""+P+z;B.push(Ae),b[Ae]={node:J,lastCount:0},w[Ae]={};for(let Zt=0;Zt<R.length;Zt++){const X=R[Zt];b[X]&&b[X].node.mode===J.mode?(w[X][Ae]=f(b[X].lastCount+J.length,J.mode)-f(b[X].lastCount,J.mode),b[X].lastCount+=J.length):(b[X]&&(b[X].lastCount=J.length),w[X][Ae]=f(J.length,J.mode)+4+e.getCharCountIndicator(J.mode,k))}}R=B}for(let P=0;P<R.length;P++)w[R[P]].end=0;return{map:w,table:b}}function N(v,k){let b;const w=e.getBestModeForData(v);if(b=e.from(k,w),b!==e.BYTE&&b.bit<w.bit)throw new Error('"'+v+'" cannot be encoded with mode '+e.toString(b)+`.
 Suggested mode is: `+e.toString(w));switch(b===e.KANJI&&!a.isKanjiModeEnabled()&&(b=e.BYTE),b){case e.NUMERIC:return new n(v);case e.ALPHANUMERIC:return new r(v);case e.KANJI:return new s(v);case e.BYTE:return new i(v)}}t.fromArray=function(k){return k.reduce(function(b,w){return typeof w=="string"?b.push(N(w,null)):w.data&&b.push(N(w.data,w.mode)),b},[])},t.fromString=function(k,b){const w=y(k,a.isKanjiModeEnabled()),R=_(w),P=E(R,b),D=c.find_path(P.map,"start","end"),B=[];for(let z=1;z<D.length-1;z++)B.push(P.table[D[z]].node);return t.fromArray(d(B))},t.rawSplit=function(k){return t.fromArray(y(k,a.isKanjiModeEnabled()))}})(Fr);const Ot=H,Ht=Bt,io=Oi,oo=Zi,ao=Or,co=Zr,ln=$r,dn=Lt,uo=ji,St=Vr,lo=Hr,fo=de,Kt=Fr;function ho(t,e){const n=t.size,r=co.getPositions(e);for(let i=0;i<r.length;i++){const s=r[i][0],o=r[i][1];for(let a=-1;a<=7;a++)if(!(s+a<=-1||n<=s+a))for(let c=-1;c<=7;c++)o+c<=-1||n<=o+c||(a>=0&&a<=6&&(c===0||c===6)||c>=0&&c<=6&&(a===0||a===6)||a>=2&&a<=4&&c>=2&&c<=4?t.set(s+a,o+c,!0,!0):t.set(s+a,o+c,!1,!0))}}function po(t){const e=t.size;for(let n=8;n<e-8;n++){const r=n%2===0;t.set(n,6,r,!0),t.set(6,n,r,!0)}}function _o(t,e){const n=ao.getPositions(e);for(let r=0;r<n.length;r++){const i=n[r][0],s=n[r][1];for(let o=-2;o<=2;o++)for(let a=-2;a<=2;a++)o===-2||o===2||a===-2||a===2||o===0&&a===0?t.set(i+o,s+a,!0,!0):t.set(i+o,s+a,!1,!0)}}function mo(t,e){const n=t.size,r=St.getEncodedBits(e);let i,s,o;for(let a=0;a<18;a++)i=Math.floor(a/3),s=a%3+n-8-3,o=(r>>a&1)===1,t.set(i,s,o,!0),t.set(s,i,o,!0)}function Ft(t,e,n){const r=t.size,i=lo.getEncodedBits(e,n);let s,o;for(s=0;s<15;s++)o=(i>>s&1)===1,s<6?t.set(s,8,o,!0):s<8?t.set(s+1,8,o,!0):t.set(r-15+s,8,o,!0),s<8?t.set(8,r-s-1,o,!0):s<9?t.set(8,15-s-1+1,o,!0):t.set(8,15-s-1,o,!0);t.set(r-8,8,1,!0)}function yo(t,e){const n=t.size;let r=-1,i=n-1,s=7,o=0;for(let a=n-1;a>0;a-=2)for(a===6&&a--;;){for(let c=0;c<2;c++)if(!t.isReserved(i,a-c)){let l=!1;o<e.length&&(l=(e[o]>>>s&1)===1),t.set(i,a-c,l),s--,s===-1&&(o++,s=7)}if(i+=r,i<0||n<=i){i-=r,r=-r;break}}}function go(t,e,n){const r=new io;n.forEach(function(c){r.put(c.mode.bit,4),r.put(c.getLength(),fo.getCharCountIndicator(c.mode,t)),c.write(r)});const i=Ot.getSymbolTotalCodewords(t),s=dn.getTotalCodewordsCount(t,e),o=(i-s)*8;for(r.getLengthInBits()+4<=o&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);const a=(o-r.getLengthInBits())/8;for(let c=0;c<a;c++)r.put(c%2?17:236,8);return vo(r,t,e)}function vo(t,e,n){const r=Ot.getSymbolTotalCodewords(e),i=dn.getTotalCodewordsCount(e,n),s=r-i,o=dn.getBlocksCount(e,n),a=r%o,c=o-a,l=Math.floor(r/o),u=Math.floor(s/o),y=u+1,f=l-u,d=new uo(f);let _=0;const E=new Array(o),N=new Array(o);let v=0;const k=new Uint8Array(t.buffer);for(let D=0;D<o;D++){const B=D<c?u:y;E[D]=k.slice(_,_+B),N[D]=d.encode(E[D]),_+=B,v=Math.max(v,B)}const b=new Uint8Array(r);let w=0,R,P;for(R=0;R<v;R++)for(P=0;P<o;P++)R<E[P].length&&(b[w++]=E[P][R]);for(R=0;R<f;R++)for(P=0;P<o;P++)b[w++]=N[P][R];return b}function wo(t,e,n,r){let i;if(Array.isArray(t))i=Kt.fromArray(t);else if(typeof t=="string"){let l=e;if(!l){const u=Kt.rawSplit(t);l=St.getBestVersionForData(u,n)}i=Kt.fromString(t,l||40)}else throw new Error("Invalid data");const s=St.getBestVersionForData(i,n);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=s;else if(e<s)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+s+`.
`);const o=go(e,n,i),a=Ot.getSymbolSize(e),c=new oo(a);return ho(c,e),po(c),_o(c,e),Ft(c,n,0),e>=7&&mo(c,e),yo(c,o),isNaN(r)&&(r=ln.getBestMask(c,Ft.bind(null,c,n))),ln.applyMask(r,c),Ft(c,n,r),{modules:c,version:e,errorCorrectionLevel:n,maskPattern:r,segments:i}}Lr.create=function(e,n){if(typeof e>"u"||e==="")throw new Error("No input text");let r=Ht.M,i,s;return typeof n<"u"&&(r=Ht.from(n.errorCorrectionLevel,Ht.M),i=St.from(n.version),s=ln.from(n.maskPattern),n.toSJISFunc&&Ot.setToSJISFunction(n.toSJISFunc)),wo(e,i,r,s)};var Wr={},Rn={};(function(t){function e(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let r=n.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+n);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(s){return[s,s]}))),r.length===6&&r.push("F","F");const i=parseInt(r.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+r.slice(0,6).join("")}}t.getOptions=function(r){r||(r={}),r.color||(r.color={});const i=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,s=r.width&&r.width>=21?r.width:void 0,o=r.scale||4;return{width:s,scale:s?4:o,margin:i,color:{dark:e(r.color.dark||"#000000ff"),light:e(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},t.getScale=function(r,i){return i.width&&i.width>=r+i.margin*2?i.width/(r+i.margin*2):i.scale},t.getImageWidth=function(r,i){const s=t.getScale(r,i);return Math.floor((r+i.margin*2)*s)},t.qrToImageData=function(r,i,s){const o=i.modules.size,a=i.modules.data,c=t.getScale(o,s),l=Math.floor((o+s.margin*2)*c),u=s.margin*c,y=[s.color.light,s.color.dark];for(let f=0;f<l;f++)for(let d=0;d<l;d++){let _=(f*l+d)*4,E=s.color.light;if(f>=u&&d>=u&&f<l-u&&d<l-u){const N=Math.floor((f-u)/c),v=Math.floor((d-u)/c);E=y[a[N*o+v]?1:0]}r[_++]=E.r,r[_++]=E.g,r[_++]=E.b,r[_]=E.a}}})(Rn);(function(t){const e=Rn;function n(i,s,o){i.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=o,s.width=o,s.style.height=o+"px",s.style.width=o+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(s,o,a){let c=a,l=o;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),o||(l=r()),c=e.getOptions(c);const u=e.getImageWidth(s.modules.size,c),y=l.getContext("2d"),f=y.createImageData(u,u);return e.qrToImageData(f.data,s,c),n(y,l,u),y.putImageData(f,0,0),l},t.renderToDataURL=function(s,o,a){let c=a;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),c||(c={});const l=t.render(s,o,c),u=c.type||"image/png",y=c.rendererOpts||{};return l.toDataURL(u,y.quality)}})(Wr);var Jr={};const bo=Rn;function Xn(t,e){const n=t.a/255,r=e+'="'+t.hex+'"';return n<1?r+" "+e+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function Wt(t,e,n){let r=t+e;return typeof n<"u"&&(r+=" "+n),r}function xo(t,e,n){let r="",i=0,s=!1,o=0;for(let a=0;a<t.length;a++){const c=Math.floor(a%e),l=Math.floor(a/e);!c&&!s&&(s=!0),t[a]?(o++,a>0&&c>0&&t[a-1]||(r+=s?Wt("M",c+n,.5+l+n):Wt("m",i,0),i=0,s=!1),c+1<e&&t[a+1]||(r+=Wt("h",o),o=0)):i++}return r}Jr.render=function(e,n,r){const i=bo.getOptions(n),s=e.modules.size,o=e.modules.data,a=s+i.margin*2,c=i.color.light.a?"<path "+Xn(i.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",l="<path "+Xn(i.color.dark,"stroke")+' d="'+xo(o,s,i.margin)+'"/>',u='viewBox="0 0 '+a+" "+a+'"',f='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+u+' shape-rendering="crispEdges">'+c+l+`</svg>
`;return typeof r=="function"&&r(null,f),f};const ko=Li,fn=Lr,Yr=Wr,To=Jr;function Pn(t,e,n,r,i){const s=[].slice.call(arguments,1),o=s.length,a=typeof s[o-1]=="function";if(!a&&!ko())throw new Error("Callback required as last argument");if(a){if(o<2)throw new Error("Too few arguments provided");o===2?(i=n,n=e,e=r=void 0):o===3&&(e.getContext&&typeof i>"u"?(i=r,r=void 0):(i=r,r=n,n=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(n=e,e=r=void 0):o===2&&!e.getContext&&(r=n,n=e,e=void 0),new Promise(function(c,l){try{const u=fn.create(n,r);c(t(u,e,r))}catch(u){l(u)}})}try{const c=fn.create(n,r);i(null,t(c,e,r))}catch(c){i(c)}}fn.create;Pn.bind(null,Yr.render);Pn.bind(null,Yr.renderToDataURL);var Co=Pn.bind(null,function(t,e,n){return To.render(t,n)});const Eo=({text:t,className:e})=>{const n=ns();return ae(()=>{Co(t,{type:"svg",errorCorrectionLevel:"low",margin:1},(r,i)=>{if(i===void 0){n.current.innerHTML="";return}n.current.innerHTML=i})},[t]),h("div",{ref:n,className:e})},No=()=>{const t=me("");return ae(()=>{if(!j.value)return;const{serializedPublicKey:e,displayName:n}=j.value;t.value=`${location.protocol}//${location.host}/chat/${encodeURIComponent(n)}/${encodeURIComponent(e)}`},[j.value]),h(nt,{children:[h("h1",{className:"text-center m-1 text-xl",children:"Create a new conversation"}),h("div",{className:"w-full overflow-y-auto",children:[h("p",{className:"m-2 text-justify",children:"Show this QR code to the person you want to chat with or send them the link provided below via a trusted medium. Generally, you should never click on links that you do not trust."}),h(Eo,{text:t.value,className:"p-3 w-full"}),h("textarea",{title:t.value,className:"w-full focus:outline-none bg-slate-800 p-3 rounded border-white border resize-none",rows:3,disabled:!0,children:t.value})]})]})},ut=le(!1),So=()=>h("button",{title:"Show profile data",type:"button",className:"focus:outline-none p-2",onClick:()=>ut.value=!ut.value,children:h("i",{className:`text-3xl fa-solid ${ut.value?"fa-chevron-up":"fa-chevron-down"}`})}),Jt=({onClick:t,children:e})=>h("button",{type:"button",className:"font-bold border rounded border-white p-1 m-2",onClick:t,children:e}),Io=t=>{var r,i;const[e,n]=Cn();return h("div",{className:`text-white p-2 w-full ${ut.value?"":"hidden"}`,children:[h("div",{className:"flex justify-evenly items-center p-2",children:[h("div",{children:h(Sn,{alt:((r=j.value)==null?void 0:r.displayName)||""})}),h("span",{children:["Username: ",(i=j.value)==null?void 0:i.displayName]})]}),h("div",{className:"flex flex-col justify-evenly py-3",children:[h(Jt,{onClick:()=>console.log("edit"),children:["Edit ",h("i",{className:"fa-regular fa-pen-to-square"})]}),h(Jt,{onClick:()=>{localStorage.removeItem(Tt),j.value=void 0,n("/")},children:["Sign out ",h("i",{className:"fa-solid fa-right-from-bracket"})]}),h(Jt,{onClick:()=>{const s=document.createElement("a");s.setAttribute("href",`data:text/plain;charset=utf-8,${encodeURIComponent(localStorage.getItem(Tt)||"")}`),s.setAttribute("download",`${crypto.randomUUID()}.json`),s.click()},children:"Save identity"})]})]})},Ao=({entities:t})=>h("div",{className:"flex-1",children:t.map((e,n)=>h("div",{className:`flex items-center justify-between border border-gray-500 rounded font-bold py-2 px-8 ${n===t.length-1?"":"mb-3"}`,children:[h("div",{className:"flex items-center",children:[h(Sn,{alt:e.displayName}),h("span",{className:"px-4 text-xl",children:e.displayName})]}),h("button",{className:"border border-white p-1 rounded focus:outline-none",children:["Add ",h("i",{className:"fa-solid fa-user-plus"})]})]}))}),Mo=(t,e)=>e.some(n=>t instanceof n);let er,tr;function Ro(){return er||(er=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Po(){return tr||(tr=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const qr=new WeakMap,hn=new WeakMap,Gr=new WeakMap,Yt=new WeakMap,Bn=new WeakMap;function Bo(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(ce(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&qr.set(n,t)}).catch(()=>{}),Bn.set(e,t),e}function Lo(t){if(hn.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});hn.set(t,e)}let pn={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return hn.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Gr.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ce(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Do(t){pn=t(pn)}function Oo(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(qt(this),e,...n);return Gr.set(r,e.sort?e.sort():[e]),ce(r)}:Po().includes(t)?function(...e){return t.apply(qt(this),e),ce(qr.get(this))}:function(...e){return ce(t.apply(qt(this),e))}}function Zo(t){return typeof t=="function"?Oo(t):(t instanceof IDBTransaction&&Lo(t),Mo(t,Ro())?new Proxy(t,pn):t)}function ce(t){if(t instanceof IDBRequest)return Bo(t);if(Yt.has(t))return Yt.get(t);const e=Zo(t);return e!==t&&(Yt.set(t,e),Bn.set(e,t)),e}const qt=t=>Bn.get(t);function $o(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=ce(o);return r&&o.addEventListener("upgradeneeded",c=>{r(ce(o.result),c.oldVersion,c.newVersion,ce(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const jo=["get","getKey","getAll","getAllKeys","count"],Uo=["put","add","delete","clear"],Gt=new Map;function nr(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Gt.get(e))return Gt.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Uo.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||jo.includes(n)))return;const s=async function(o,...a){const c=this.transaction(o,i?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&c.done]))[0]};return Gt.set(e,s),s}Do(t=>({...t,get:(e,n,r)=>nr(e,n)||t.get(e,n,r),has:(e,n)=>!!nr(e,n)||t.has(e,n)}));const Vo=async()=>await $o("noti-db",1,{upgrade(t){t.createObjectStore("entities",{keyPath:"serializedPublicKey"})}});le(void 0);const zo=async()=>[],Ho=()=>{const t=me([]);return ae(()=>{(async()=>{t.value=await zo()})()},[]),h(nt,{children:[h("div",{class:"flex items-center justify-between px-5 py-3 w-full",children:[h("h1",{class:"font-bold text-2xl w-full",children:"Conversations"}),h(So,{})]}),h(Io,{}),h("div",{className:"w-full text-center",children:h("span",{children:["Status: ",Br.value?"Connected":"Not connected"]})}),h(Ao,{entities:t.value}),h(yr,{href:"/create",children:h("div",{className:"absolute bg-blue-500 w-20 h-20 flex justify-center items-center rounded-[50%] cursor-pointer right-10 bottom-10",children:h("i",{className:"fa-solid fa-plus text-3xl"})})})]})},Qr=()=>h(nt,{children:h("div",{className:"text-white flex-1 flex justify-center items-center",children:h("i",{className:"fa-solid fa-circle-notch loading text-5xl"})})}),Ko=()=>{const t=me(""),e=me("");return K.value?h(Qr,{}):h(nt,{children:h("div",{className:"max-w-sm border border-white rounded p-8 my-2 mx-auto flex flex-col",children:[h("h1",{className:"text-center m-1 text-5xl",children:"Noti"}),h("h2",{className:"text-center m-1",children:["Sign in ",h("i",{className:"fa-solid fa-rocket"})]}),e.value!==""?h("div",{class:"border-2 font-bold text-xs leading-5 rounded text-red-800 bg-red-300 border-red-800 my-2 p-2",children:["Validation error:",h("br",{}),e.value]}):null,h("form",{onSubmit:async n=>{if(K.value=!0,n.preventDefault(),t.value===""){e.value="You must provide a username.",K.value=!1;return}const{publicKey:r,privateKey:i}=await Si();j.value={publicKey:r,privateKey:i,serializedPublicKey:await Er(r),displayName:t.value},K.value=!1},children:[h("label",{for:"username",children:"New username:"}),h("input",{type:"text",name:"username",title:"username",className:"bg-black border border-white rounded outline-none p-1 my-1 w-full",onInput:({target:n})=>{n instanceof HTMLInputElement&&(t.value=n.value)},value:t.value,autofocus:!0}),h("button",{type:"submit",className:"font-bold border rounded border-white p-1 my-1 w-full",children:"Generate new identity"})]}),h("span",{className:"text-gray-300 mx-auto",children:"- OR -"}),h("label",{className:"font-bold border rounded border-white p-1 my-1 text-center cursor-pointer",children:[h("input",{title:"Import indentity",type:"file",className:"hidden",accept:".json",onChange:async({currentTarget:n})=>{if(K.value=!0,n.files){const r=await Ei(n.files);if(!r){e.value="Failed to import identity. Choose an exported json file that contains your identity.",K.value=!1;return}j.value=r}K.value=!1}}),"Import indentity"]})]})})},_n=128,Fo=_n*Math.pow(2,7);class Wo{constructor(){ee(this,"timeoutId");ee(this,"ws");ee(this,"isConnected");ee(this,"previousIsConnected");ee(this,"retryDelay");ee(this,"onStateChange");ee(this,"onMessage");ee(this,"shouldBeOpen");this.isConnected=!1,this.previousIsConnected=!1,this.retryDelay=_n,this.shouldBeOpen=!1}connect(e,n,r){this.shouldBeOpen=!0,this.ws=this._connect(e),this.onStateChange=n,this.onMessage=r}setState(e){var n;this.previousIsConnected=this.isConnected,this.isConnected=e,this.previousIsConnected!==this.isConnected&&((n=this.onStateChange)==null||n.call(this,this.isConnected))}_connect(e){clearTimeout(this.timeoutId);const n=new WebSocket(e);return n.onopen=()=>{this.setState(!0),this.retryDelay=_n},n.onmessage=r=>{var i;(i=this.onMessage)==null||i.call(this,JSON.parse(r.data))},n.onclose=()=>{this.setState(!1),this.shouldBeOpen&&(this.previousIsConnected===!1&&this.isConnected===!1&&(this.retryDelay*=2),this.timeoutId=window.setTimeout(()=>this._connect(e),Math.min(Fo,this.retryDelay)))},this.ws=n,n}send(e){var n;(n=this.ws)==null||n.send(JSON.stringify(e))}close(){var e;this.shouldBeOpen=!1,(e=this.ws)==null||e.close()}}const Jo=()=>(ae(()=>{Vo()},[]),ae(()=>{(async()=>{K.value=!0;const e=await Ii();if(!e){K.value=!1;return}j.value=e,K.value=!1})()},[]),ae(()=>{if(!j.value)return;const t=new Wo,e=encodeURIComponent(j.value.serializedPublicKey);return t.connect(`wss://noti-relay.deno.dev?id=${e}`,n=>Br.value=n,n=>{const r=ve.object({message:ve.string()}).safeParse(n);r.success&&(an.value=[...an.value,r.data.message])}),()=>t.close()},[j.value]),K.value?h(Qr,{}):j.value?h(Ms,{children:[h(Ut,{path:"/chat/:displayName/:serializedPublicKey",children:({displayName:t,serializedPublicKey:e})=>h(Bi,{displayName:decodeURIComponent(t||""),serializedPublicKey:decodeURIComponent(e||"")})}),h(Ut,{path:"/create",component:No}),h(Ut,{path:"/",component:Ho}),h(Rs,{to:"/"})]}):h(Ko,{}));os(h(Jo,{}),document.getElementById("app"));
